import{c as ae,r as n,j as e,b as _,m as le,u as k,f as _e,d as ie,P as D,h as T,O as De,g as B,i as L,D as ze,p as Me,q as He,s as Ie,S as ce,t as Oe,L as de,v as H,T as We,x as Be,y as Y,z as F,F as $,G as q,H as J,I as G,J as K,A as Ue,w as Q,M as Xe,N as Ve}from"./globals-ByXEjEg8.js";/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=ae("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=ae("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),ue=n.forwardRef(({className:t,...o},r)=>e.jsx("div",{ref:r,className:_("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2","border-transparent bg-primary text-secondary-foreground hover:bg-primary/80",t),...o}));ue.displayName="Badge";function $e(t){const o=n.useRef({value:t,previous:t});return n.useMemo(()=>(o.current.value!==t&&(o.current.previous=o.current.value,o.current.value=t),o.current.previous),[t])}function qe(t){const[o,r]=n.useState(void 0);return le(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const a=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const l=s[0];let i,c;if("borderBoxSize"in l){const d=l.borderBoxSize,h=Array.isArray(d)?d[0]:d;i=h.inlineSize,c=h.blockSize}else i=t.offsetWidth,c=t.offsetHeight;r({width:i,height:c})});return a.observe(t,{box:"border-box"}),()=>a.unobserve(t)}else r(void 0)},[t]),o}var U="Switch",[Je]=ie(U),[Ge,Ke]=Je(U),he=n.forwardRef((t,o)=>{const{__scopeSwitch:r,name:a,checked:s,defaultChecked:l,required:i,disabled:c,value:d="on",onCheckedChange:h,form:u,...m}=t,[f,b]=n.useState(null),g=k(o,N=>b(N)),y=n.useRef(!1),R=f?u||!!f.closest("form"):!0,[v,E]=_e({prop:s,defaultProp:l??!1,onChange:h,caller:U});return e.jsxs(Ge,{scope:r,checked:v,disabled:c,children:[e.jsx(D.button,{type:"button",role:"switch","aria-checked":v,"aria-required":i,"data-state":be(v),"data-disabled":c?"":void 0,disabled:c,value:d,...m,ref:g,onClick:T(t.onClick,N=>{E(p=>!p),R&&(y.current=N.isPropagationStopped(),y.current||N.stopPropagation())})}),R&&e.jsx(pe,{control:f,bubbles:!y.current,name:a,value:d,checked:v,required:i,disabled:c,form:u,style:{transform:"translateX(-100%)"}})]})});he.displayName=U;var fe="SwitchThumb",me=n.forwardRef((t,o)=>{const{__scopeSwitch:r,...a}=t,s=Ke(fe,r);return e.jsx(D.span,{"data-state":be(s.checked),"data-disabled":s.disabled?"":void 0,...a,ref:o})});me.displayName=fe;var Qe="SwitchBubbleInput",pe=n.forwardRef(({__scopeSwitch:t,control:o,checked:r,bubbles:a=!0,...s},l)=>{const i=n.useRef(null),c=k(i,l),d=$e(r),h=qe(o);return n.useEffect(()=>{const u=i.current;if(!u)return;const m=window.HTMLInputElement.prototype,b=Object.getOwnPropertyDescriptor(m,"checked").set;if(d!==r&&b){const g=new Event("click",{bubbles:a});b.call(u,r),u.dispatchEvent(g)}},[d,r,a]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...s,tabIndex:-1,ref:c,style:{...s.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});pe.displayName=Qe;function be(t){return t?"checked":"unchecked"}var xe=he,Ze=me;const ge=n.forwardRef(({className:t,...o},r)=>e.jsx(xe,{className:_("peer inline-flex h-[20px] w-[36px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...o,ref:r,children:e.jsx(Ze,{className:_("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));ge.displayName=xe.displayName;function et(t,[o,r]){return Math.min(r,Math.max(o,t))}function tt(t,o){return n.useReducer((r,a)=>o[r][a]??r,t)}var ee="ScrollArea",[we]=ie(ee),[rt,j]=we(ee),ve=n.forwardRef((t,o)=>{const{__scopeScrollArea:r,type:a="hover",dir:s,scrollHideDelay:l=600,...i}=t,[c,d]=n.useState(null),[h,u]=n.useState(null),[m,f]=n.useState(null),[b,g]=n.useState(null),[y,R]=n.useState(null),[v,E]=n.useState(0),[N,p]=n.useState(0),[S,x]=n.useState(!1),[z,A]=n.useState(!1),w=k(o,M=>d(M)),C=De(s);return e.jsx(rt,{scope:r,type:a,dir:C,scrollHideDelay:l,scrollArea:c,viewport:h,onViewportChange:u,content:m,onContentChange:f,scrollbarX:b,onScrollbarXChange:g,scrollbarXEnabled:S,onScrollbarXEnabledChange:x,scrollbarY:y,onScrollbarYChange:R,scrollbarYEnabled:z,onScrollbarYEnabledChange:A,onCornerWidthChange:E,onCornerHeightChange:p,children:e.jsx(D.div,{dir:C,...i,ref:w,style:{position:"relative","--radix-scroll-area-corner-width":v+"px","--radix-scroll-area-corner-height":N+"px",...t.style}})})});ve.displayName=ee;var Se="ScrollAreaViewport",ye=n.forwardRef((t,o)=>{const{__scopeScrollArea:r,children:a,nonce:s,...l}=t,i=j(Se,r),c=n.useRef(null),d=k(o,c,i.onViewportChange);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),e.jsx(D.div,{"data-radix-scroll-area-viewport":"",...l,ref:d,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...t.style},children:e.jsx("div",{ref:i.onContentChange,style:{minWidth:"100%",display:"table"},children:a})})]})});ye.displayName=Se;var P="ScrollAreaScrollbar",te=n.forwardRef((t,o)=>{const{forceMount:r,...a}=t,s=j(P,t.__scopeScrollArea),{onScrollbarXEnabledChange:l,onScrollbarYEnabledChange:i}=s,c=t.orientation==="horizontal";return n.useEffect(()=>(c?l(!0):i(!0),()=>{c?l(!1):i(!1)}),[c,l,i]),s.type==="hover"?e.jsx(ot,{...a,ref:o,forceMount:r}):s.type==="scroll"?e.jsx(st,{...a,ref:o,forceMount:r}):s.type==="auto"?e.jsx(je,{...a,ref:o,forceMount:r}):s.type==="always"?e.jsx(re,{...a,ref:o}):null});te.displayName=P;var ot=n.forwardRef((t,o)=>{const{forceMount:r,...a}=t,s=j(P,t.__scopeScrollArea),[l,i]=n.useState(!1);return n.useEffect(()=>{const c=s.scrollArea;let d=0;if(c){const h=()=>{window.clearTimeout(d),i(!0)},u=()=>{d=window.setTimeout(()=>i(!1),s.scrollHideDelay)};return c.addEventListener("pointerenter",h),c.addEventListener("pointerleave",u),()=>{window.clearTimeout(d),c.removeEventListener("pointerenter",h),c.removeEventListener("pointerleave",u)}}},[s.scrollArea,s.scrollHideDelay]),e.jsx(B,{present:r||l,children:e.jsx(je,{"data-state":l?"visible":"hidden",...a,ref:o})})}),st=n.forwardRef((t,o)=>{const{forceMount:r,...a}=t,s=j(P,t.__scopeScrollArea),l=t.orientation==="horizontal",i=V(()=>d("SCROLL_END"),100),[c,d]=tt("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return n.useEffect(()=>{if(c==="idle"){const h=window.setTimeout(()=>d("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(h)}},[c,s.scrollHideDelay,d]),n.useEffect(()=>{const h=s.viewport,u=l?"scrollLeft":"scrollTop";if(h){let m=h[u];const f=()=>{const b=h[u];m!==b&&(d("SCROLL"),i()),m=b};return h.addEventListener("scroll",f),()=>h.removeEventListener("scroll",f)}},[s.viewport,l,d,i]),e.jsx(B,{present:r||c!=="hidden",children:e.jsx(re,{"data-state":c==="hidden"?"hidden":"visible",...a,ref:o,onPointerEnter:T(t.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:T(t.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),je=n.forwardRef((t,o)=>{const r=j(P,t.__scopeScrollArea),{forceMount:a,...s}=t,[l,i]=n.useState(!1),c=t.orientation==="horizontal",d=V(()=>{if(r.viewport){const h=r.viewport.offsetWidth<r.viewport.scrollWidth,u=r.viewport.offsetHeight<r.viewport.scrollHeight;i(c?h:u)}},10);return I(r.viewport,d),I(r.content,d),e.jsx(B,{present:a||l,children:e.jsx(re,{"data-state":l?"visible":"hidden",...s,ref:o})})}),re=n.forwardRef((t,o)=>{const{orientation:r="vertical",...a}=t,s=j(P,t.__scopeScrollArea),l=n.useRef(null),i=n.useRef(0),[c,d]=n.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),h=Ee(c.viewport,c.content),u={...a,sizes:c,onSizesChange:d,hasThumb:h>0&&h<1,onThumbChange:f=>l.current=f,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:f=>i.current=f};function m(f,b){return dt(f,i.current,c,b)}return r==="horizontal"?e.jsx(nt,{...u,ref:o,onThumbPositionChange:()=>{if(s.viewport&&l.current){const f=s.viewport.scrollLeft,b=se(f,c,s.dir);l.current.style.transform=`translate3d(${b}px, 0, 0)`}},onWheelScroll:f=>{s.viewport&&(s.viewport.scrollLeft=f)},onDragScroll:f=>{s.viewport&&(s.viewport.scrollLeft=m(f,s.dir))}}):r==="vertical"?e.jsx(at,{...u,ref:o,onThumbPositionChange:()=>{if(s.viewport&&l.current){const f=s.viewport.scrollTop,b=se(f,c);l.current.style.transform=`translate3d(0, ${b}px, 0)`}},onWheelScroll:f=>{s.viewport&&(s.viewport.scrollTop=f)},onDragScroll:f=>{s.viewport&&(s.viewport.scrollTop=m(f))}}):null}),nt=n.forwardRef((t,o)=>{const{sizes:r,onSizesChange:a,...s}=t,l=j(P,t.__scopeScrollArea),[i,c]=n.useState(),d=n.useRef(null),h=k(o,d,l.onScrollbarXChange);return n.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),e.jsx(Ne,{"data-orientation":"horizontal",...s,ref:h,sizes:r,style:{bottom:0,left:l.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:l.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":X(r)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.x),onDragScroll:u=>t.onDragScroll(u.x),onWheelScroll:(u,m)=>{if(l.viewport){const f=l.viewport.scrollLeft+u.deltaX;t.onWheelScroll(f),Te(f,m)&&u.preventDefault()}},onResize:()=>{d.current&&l.viewport&&i&&a({content:l.viewport.scrollWidth,viewport:l.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:W(i.paddingLeft),paddingEnd:W(i.paddingRight)}})}})}),at=n.forwardRef((t,o)=>{const{sizes:r,onSizesChange:a,...s}=t,l=j(P,t.__scopeScrollArea),[i,c]=n.useState(),d=n.useRef(null),h=k(o,d,l.onScrollbarYChange);return n.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),e.jsx(Ne,{"data-orientation":"vertical",...s,ref:h,sizes:r,style:{top:0,right:l.dir==="ltr"?0:void 0,left:l.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":X(r)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.y),onDragScroll:u=>t.onDragScroll(u.y),onWheelScroll:(u,m)=>{if(l.viewport){const f=l.viewport.scrollTop+u.deltaY;t.onWheelScroll(f),Te(f,m)&&u.preventDefault()}},onResize:()=>{d.current&&l.viewport&&i&&a({content:l.viewport.scrollHeight,viewport:l.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:W(i.paddingTop),paddingEnd:W(i.paddingBottom)}})}})}),[lt,Ce]=we(P),Ne=n.forwardRef((t,o)=>{const{__scopeScrollArea:r,sizes:a,hasThumb:s,onThumbChange:l,onThumbPointerUp:i,onThumbPointerDown:c,onThumbPositionChange:d,onDragScroll:h,onWheelScroll:u,onResize:m,...f}=t,b=j(P,r),[g,y]=n.useState(null),R=k(o,w=>y(w)),v=n.useRef(null),E=n.useRef(""),N=b.viewport,p=a.content-a.viewport,S=L(u),x=L(d),z=V(m,10);function A(w){if(v.current){const C=w.clientX-v.current.left,M=w.clientY-v.current.top;h({x:C,y:M})}}return n.useEffect(()=>{const w=C=>{const M=C.target;(g==null?void 0:g.contains(M))&&S(C,p)};return document.addEventListener("wheel",w,{passive:!1}),()=>document.removeEventListener("wheel",w,{passive:!1})},[N,g,p,S]),n.useEffect(x,[a,x]),I(g,z),I(b.content,z),e.jsx(lt,{scope:r,scrollbar:g,hasThumb:s,onThumbChange:L(l),onThumbPointerUp:L(i),onThumbPositionChange:x,onThumbPointerDown:L(c),children:e.jsx(D.div,{...f,ref:R,style:{position:"absolute",...f.style},onPointerDown:T(t.onPointerDown,w=>{w.button===0&&(w.target.setPointerCapture(w.pointerId),v.current=g.getBoundingClientRect(),E.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",b.viewport&&(b.viewport.style.scrollBehavior="auto"),A(w))}),onPointerMove:T(t.onPointerMove,A),onPointerUp:T(t.onPointerUp,w=>{const C=w.target;C.hasPointerCapture(w.pointerId)&&C.releasePointerCapture(w.pointerId),document.body.style.webkitUserSelect=E.current,b.viewport&&(b.viewport.style.scrollBehavior=""),v.current=null})})})}),O="ScrollAreaThumb",Pe=n.forwardRef((t,o)=>{const{forceMount:r,...a}=t,s=Ce(O,t.__scopeScrollArea);return e.jsx(B,{present:r||s.hasThumb,children:e.jsx(it,{ref:o,...a})})}),it=n.forwardRef((t,o)=>{const{__scopeScrollArea:r,style:a,...s}=t,l=j(O,r),i=Ce(O,r),{onThumbPositionChange:c}=i,d=k(o,m=>i.onThumbChange(m)),h=n.useRef(void 0),u=V(()=>{h.current&&(h.current(),h.current=void 0)},100);return n.useEffect(()=>{const m=l.viewport;if(m){const f=()=>{if(u(),!h.current){const b=ut(m,c);h.current=b,c()}};return c(),m.addEventListener("scroll",f),()=>m.removeEventListener("scroll",f)}},[l.viewport,u,c]),e.jsx(D.div,{"data-state":i.hasThumb?"visible":"hidden",...s,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...a},onPointerDownCapture:T(t.onPointerDownCapture,m=>{const b=m.target.getBoundingClientRect(),g=m.clientX-b.left,y=m.clientY-b.top;i.onThumbPointerDown({x:g,y})}),onPointerUp:T(t.onPointerUp,i.onThumbPointerUp)})});Pe.displayName=O;var oe="ScrollAreaCorner",Re=n.forwardRef((t,o)=>{const r=j(oe,t.__scopeScrollArea),a=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&a?e.jsx(ct,{...t,ref:o}):null});Re.displayName=oe;var ct=n.forwardRef((t,o)=>{const{__scopeScrollArea:r,...a}=t,s=j(oe,r),[l,i]=n.useState(0),[c,d]=n.useState(0),h=!!(l&&c);return I(s.scrollbarX,()=>{var m;const u=((m=s.scrollbarX)==null?void 0:m.offsetHeight)||0;s.onCornerHeightChange(u),d(u)}),I(s.scrollbarY,()=>{var m;const u=((m=s.scrollbarY)==null?void 0:m.offsetWidth)||0;s.onCornerWidthChange(u),i(u)}),h?e.jsx(D.div,{...a,ref:o,style:{width:l,height:c,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function W(t){return t?parseInt(t,10):0}function Ee(t,o){const r=t/o;return isNaN(r)?0:r}function X(t){const o=Ee(t.viewport,t.content),r=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=(t.scrollbar.size-r)*o;return Math.max(a,18)}function dt(t,o,r,a="ltr"){const s=X(r),l=s/2,i=o||l,c=s-i,d=r.scrollbar.paddingStart+i,h=r.scrollbar.size-r.scrollbar.paddingEnd-c,u=r.content-r.viewport,m=a==="ltr"?[0,u]:[u*-1,0];return Ae([d,h],m)(t)}function se(t,o,r="ltr"){const a=X(o),s=o.scrollbar.paddingStart+o.scrollbar.paddingEnd,l=o.scrollbar.size-s,i=o.content-o.viewport,c=l-a,d=r==="ltr"?[0,i]:[i*-1,0],h=et(t,d);return Ae([0,i],[0,c])(h)}function Ae(t,o){return r=>{if(t[0]===t[1]||o[0]===o[1])return o[0];const a=(o[1]-o[0])/(t[1]-t[0]);return o[0]+a*(r-t[0])}}function Te(t,o){return t>0&&t<o}var ut=(t,o=()=>{})=>{let r={left:t.scrollLeft,top:t.scrollTop},a=0;return function s(){const l={left:t.scrollLeft,top:t.scrollTop},i=r.left!==l.left,c=r.top!==l.top;(i||c)&&o(),r=l,a=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(a)};function V(t,o){const r=L(t),a=n.useRef(0);return n.useEffect(()=>()=>window.clearTimeout(a.current),[]),n.useCallback(()=>{window.clearTimeout(a.current),a.current=window.setTimeout(r,o)},[r,o])}function I(t,o){const r=L(o);le(()=>{let a=0;if(t){const s=new ResizeObserver(()=>{cancelAnimationFrame(a),a=window.requestAnimationFrame(r)});return s.observe(t),()=>{window.cancelAnimationFrame(a),s.unobserve(t)}}},[t,r])}var ke=ve,ht=ye,ft=Re;const Z=n.forwardRef(({className:t,children:o,...r},a)=>e.jsxs(ke,{ref:a,className:_("relative overflow-hidden",t),...r,children:[e.jsx(ht,{className:"h-full w-full rounded-[inherit]",children:o}),e.jsx(Le,{}),e.jsx(ft,{})]}));Z.displayName=ke.displayName;const Le=n.forwardRef(({className:t,orientation:o="vertical",...r},a)=>e.jsx(te,{ref:a,orientation:o,className:_("flex touch-none select-none transition-colors",o==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",o==="horizontal"&&"h-2.5 border-t border-t-transparent p-[1px]",t),...r,children:e.jsx(Pe,{className:"relative flex-1 rounded-full bg-border"})}));Le.displayName=te.displayName;function mt({open:t,onOpenChange:o,logSnippet:r}){const[a,s]=n.useState(!1),[l,i]=n.useState(null);n.useEffect(()=>{t&&r&&c()},[t,r]);const c=async()=>{s(!0),i(null);const d=window.sbwpData||window.sbwpRecoveryData;try{const u=await(await fetch(`${d.restUrl}/ai/analyze`,{method:"POST",headers:{"X-WP-Nonce":d.nonce,"Content-Type":"application/json"},body:JSON.stringify({log_snippet:r})})).json();setTimeout(()=>{i(u.analysis),s(!1)},1500)}catch(h){console.error(h),s(!1)}};return e.jsx(ze,{open:t,onOpenChange:o,children:e.jsxs(Me,{className:"sm:max-w-[500px]",children:[e.jsxs(He,{children:[e.jsxs(Ie,{className:"flex items-center gap-2",children:[e.jsx(ce,{className:"h-5 w-5 text-indigo-500"}),"AI Error Analysis"]}),e.jsx(Oe,{children:"Asking our virtual expert to interpret this error log..."})]}),e.jsx("div",{className:"py-4",children:a?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ye,{className:"h-12 w-12 text-indigo-200"}),e.jsx(de,{className:"h-6 w-6 absolute -bottom-1 -right-1 animate-spin text-indigo-600"})]}),e.jsxs("div",{className:"text-center space-y-1",children:[e.jsx("p",{className:"font-medium text-indigo-900 dark:text-indigo-100",children:"Analyzing Code..."}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Identifying patterns and known conflicts"})]})]}):l?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-950/30 p-4 rounded-lg border border-indigo-100 dark:border-indigo-900",children:[e.jsx("h3",{className:"font-semibold text-indigo-900 dark:text-indigo-200 mb-1",children:"Summary"}),e.jsx("p",{className:"text-sm text-indigo-800 dark:text-indigo-300",children:l.summary})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-xs font-bold uppercase tracking-wider text-muted-foreground",children:"Root Cause"}),e.jsx("p",{className:"text-sm",children:l.cause})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-xs font-bold uppercase tracking-wider text-muted-foreground",children:"Suggested Fix"}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Fe,{className:"h-4 w-4 text-emerald-500 shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm",children:l.solution})]})]})]}),e.jsx("div",{className:"pt-4 flex justify-end",children:e.jsx(H,{onClick:()=>o(!1),children:"Close Analysis"})})]}):e.jsx("div",{className:"text-center text-muted-foreground py-4",children:"No analysis available."})})]})})}function pt(){const[t,o]=n.useState("restore"),[r,a]=n.useState(!1),[s,l]=n.useState([]),[i,c]=n.useState(!1),[d,h]=n.useState(""),[u,m]=n.useState(""),[f,b]=n.useState(!1),[g,y]=n.useState(!1);n.useEffect(()=>{t==="plugins"?R():t==="logs"&&E()},[t]);const R=async()=>{c(!0);const p=new URLSearchParams;p.append("action","sbwp_recovery_get_plugins"),p.append("nonce",window.sbwpRecoveryData.nonce);try{const x=await(await fetch(window.sbwpRecoveryData.ajaxUrl,{method:"POST",body:p})).json();x.success&&l(x.data)}catch(S){console.error(S)}finally{c(!1)}},v=async(p,S)=>{l(z=>z.map(A=>A.file===p?{...A,active:!S}:A));const x=new URLSearchParams;x.append("action","sbwp_recovery_toggle_plugin"),x.append("nonce",window.sbwpRecoveryData.nonce),x.append("plugin",p),x.append("plugin_action",S?"deactivate":"activate"),await fetch(window.sbwpRecoveryData.ajaxUrl,{method:"POST",body:x})},E=async()=>{b(!0);const p=new URLSearchParams;p.append("action","sbwp_recovery_get_log"),p.append("nonce",window.sbwpRecoveryData.nonce);try{const x=await(await fetch(window.sbwpRecoveryData.ajaxUrl,{method:"POST",body:p})).json();x.success?(h(x.data.content),m(x.data.size)):h(x.data)}catch{h("Failed to load logs.")}finally{b(!1)}},N=async()=>{if(!confirm("Are you sure? This will overwrite your database and files."))return;a(!0);const p=new URLSearchParams;p.append("action","sbwp_recovery_restore"),p.append("nonce",window.sbwpRecoveryData.nonce),p.append("backup_id","1");try{const x=await(await fetch(window.sbwpRecoveryData.ajaxUrl,{method:"POST",body:p})).json();x.success?(alert("Restore Complete!"),window.location.reload()):alert("Error: "+x.data)}catch{alert("Network Error")}finally{a(!1)}};return e.jsx("div",{className:"min-h-screen bg-slate-950 text-slate-50 p-8 flex items-start justify-center font-sans antialiased selection:bg-emerald-500/30",children:e.jsxs("div",{className:"w-full max-w-4xl space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold tracking-tight text-white flex items-center gap-2",children:[e.jsx(bt,{className:"h-6 w-6 text-emerald-500"}),"Recovery Portal"]}),e.jsx("p",{className:"text-slate-400",children:"Safe Mode Active • Plugins Filtered"})]}),e.jsx(H,{variant:"outline",className:"border-slate-800 bg-slate-900 text-slate-200 hover:bg-slate-800 hover:text-white",onClick:()=>window.location.href="/wp-admin",children:"Exit to WP Admin"})]}),e.jsxs(We,{defaultValue:"restore",onValueChange:o,className:"w-full",children:[e.jsxs(Be,{className:"grid w-full grid-cols-3 bg-slate-900 border border-slate-800",children:[e.jsx(Y,{value:"restore",children:"Restore Backup"}),e.jsx(Y,{value:"plugins",children:"Plugin Manager"}),e.jsx(Y,{value:"logs",children:"Debug Logs"})]}),e.jsx(F,{value:"restore",children:e.jsxs($,{className:"bg-slate-900 border-slate-800 text-slate-200",children:[e.jsxs(q,{children:[e.jsx(J,{className:"text-white",children:"System Restore"}),e.jsx(G,{className:"text-slate-400",children:"Restore your site to a previous working state."})]}),e.jsxs(K,{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-lg border border-yellow-900/50 bg-yellow-900/10 p-4 text-yellow-200 flex items-start gap-4",children:[e.jsx(Ue,{className:"h-5 w-5 shrink-0"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-bold mb-1",children:"Warning: Destructive Action"}),e.jsx("p",{children:"Restoring will overwrite your database and files. Any changes made since the backup will be lost."})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border border-slate-800 rounded-lg bg-slate-950/50",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-white",children:"Latest Local Backup"}),e.jsx("div",{className:"text-sm text-slate-500",children:"Dec 26, 2025 • 24.5 MB"})]}),e.jsxs(H,{onClick:N,disabled:r,className:"bg-emerald-600 hover:bg-emerald-500 text-white",children:[r?e.jsx(de,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(Q,{className:"mr-2 h-4 w-4"}),"Restore Now"]})]})]})]})}),e.jsx(F,{value:"plugins",children:e.jsxs($,{className:"bg-slate-900 border-slate-800 text-slate-200",children:[e.jsxs(q,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(J,{className:"text-white",children:"Plugin Manager"}),e.jsx(H,{variant:"ghost",size:"sm",onClick:R,disabled:i,children:e.jsx(Q,{className:_("h-4 w-4",i&&"animate-spin")})})]}),e.jsx(G,{className:"text-slate-400",children:"Disable problematic plugins to regain access to your site."})]}),e.jsx(K,{children:e.jsx(Z,{className:"h-[400px] pr-4",children:e.jsx("div",{className:"space-y-2",children:s.map(p=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-slate-800 bg-slate-950/30",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-200",children:p.name}),e.jsx("div",{className:"text-xs text-slate-500",children:p.file})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ue,{className:p.active?"bg-emerald-500/20 text-emerald-500 hover:bg-emerald-500/30":"bg-slate-800 text-slate-500 hover:bg-slate-700",children:p.active?"Active":"Inactive"}),e.jsx(ge,{checked:p.active,onCheckedChange:()=>v(p.file,p.active)})]})]},p.file))})})})]})}),e.jsx(F,{value:"logs",children:e.jsxs($,{className:"bg-slate-900 border-slate-800 text-slate-200",children:[e.jsx(mt,{open:g,onOpenChange:y,logSnippet:d.slice(0,2e3)}),e.jsxs(q,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(J,{className:"text-white",children:"Debug Log"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(H,{variant:"outline",size:"sm",className:"border-indigo-500/50 text-indigo-400 hover:bg-indigo-500/10",onClick:()=>y(!0),disabled:!d,children:[e.jsx(ce,{className:"mr-2 h-4 w-4"}),"Analyze with AI"]}),e.jsx(H,{variant:"ghost",size:"sm",onClick:E,disabled:f,children:e.jsx(Q,{className:_("h-4 w-4",f&&"animate-spin")})})]})]}),e.jsxs(G,{className:"text-slate-400",children:["Viewing ",u||"file",". Last 500 lines."]})]}),e.jsx(K,{children:e.jsx(Z,{className:"h-[500px] w-full rounded-md border border-slate-800 bg-slate-950 p-4",children:e.jsx("pre",{className:"text-xs font-mono text-slate-300 whitespace-pre-wrap",children:f?"Loading...":d||"debug.log is empty or not found."})})})]})})]})]})})}function bt(t){return e.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10"}),e.jsx("path",{d:"m9 12 2 2 4-4"})]})}document.documentElement.classList.add("dark");const ne=document.getElementById("sbwp-recovery-root");ne&&Xe.createRoot(ne).render(e.jsx(Ve.StrictMode,{children:e.jsx(pt,{})}));
