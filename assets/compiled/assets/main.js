import{c as A,r,j as e,P as U,a as ct,b as lt,u as Pe,B as dt,d as ut,e as pt,f as I,g as Z,h as mt,R as xt,i as ft,k as ht,l as wt,m as F,n as De,C as gt,D as ue,o as pe,p as me,q as xe,s as fe,L as M,t as v,A as yt,v as E,w as P,x as D,y as R,z as vt,E as ee,F as jt,G as be,H as Ne}from"./globals-BGt4knd6.js";/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=A("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=A("ArrowUpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=A("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=A("CalendarClock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.25V14",key:"re2vv1"}],["path",{d:"M22 16a6 6 0 1 1-12 0 6 6 0 0 1 12 0Z",key:"ame013"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=A("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=A("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=A("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kt=A("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=A("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=A("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=A("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);async function Dt(){const t=await fetch(`${window.sbwpData.restUrl}/stats`,{headers:{"X-WP-Nonce":window.sbwpData.nonce}});if(!t.ok)throw new Error("Failed to fetch stats");return t.json()}async function Rt(){const t=await fetch(`${window.sbwpData.restUrl}/backups`,{method:"POST",headers:{"X-WP-Nonce":window.sbwpData.nonce,"Content-Type":"application/json"}});if(!t.ok)throw new Error("Failed to create backup");return t.json()}async function At(){const t=await fetch(`${window.sbwpData.restUrl}/cloud/providers`,{headers:{"X-WP-Nonce":window.sbwpData.nonce}});if(t.status===404)return[];if(!t.ok)throw new Error("Failed to fetch cloud providers");return t.json()}async function It(t,s){const a=await fetch(`${window.sbwpData.restUrl}/cloud/connect`,{method:"POST",headers:{"X-WP-Nonce":window.sbwpData.nonce,"Content-Type":"application/json"},body:JSON.stringify({provider_id:t,action:s})});if(!a.ok)throw new Error("Failed to update provider");return a.json()}async function Mt(){const t=await fetch(`${window.sbwpData.restUrl}/settings`,{headers:{"X-WP-Nonce":window.sbwpData.nonce}});if(!t.ok)throw new Error("Failed to fetch settings");return t.json()}async function _t(t){const s=await fetch(`${window.sbwpData.restUrl}/settings`,{method:"POST",headers:{"X-WP-Nonce":window.sbwpData.nonce,"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok)throw new Error("Failed to save settings");return s.json()}const Ft=1,Ot=1e6;let re=0;function Lt(){return re=(re+1)%Number.MAX_SAFE_INTEGER,re.toString()}const oe=new Map,Se=t=>{if(oe.has(t))return;const s=setTimeout(()=>{oe.delete(t),z({type:"REMOVE_TOAST",toastId:t})},Ot);oe.set(t,s)},Ut=(t,s)=>{switch(s.type){case"ADD_TOAST":return{...t,toasts:[s.toast,...t.toasts].slice(0,Ft)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(a=>a.id===s.toast.id?{...a,...s.toast}:a)};case"DISMISS_TOAST":{const{toastId:a}=s;return a?Se(a):t.toasts.forEach(n=>{Se(n.id)}),{...t,toasts:t.toasts.map(n=>n.id===a||s.toastId===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return s.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(a=>a.id!==s.toastId)}}},J=[];let Q={toasts:[]};function z(t){Q=Ut(Q,t),J.forEach(s=>{s(Q)})}function Vt({...t}){const s=Lt(),a=i=>z({type:"UPDATE_TOAST",toast:{...i,id:s}}),n=()=>z({type:"DISMISS_TOAST",toastId:s});return z({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:i=>{i||n()}}}),{id:s,dismiss:n,update:a}}function te(){const[t,s]=r.useState(Q);return r.useEffect(()=>(J.push(s),()=>{const a=J.indexOf(s);a>-1&&J.splice(a,1)}),[t]),{...t,toast:Vt,dismiss:a=>z({type:"DISMISS_TOAST",toastId:a})}}var $t=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Bt="VisuallyHidden",we=r.forwardRef((t,s)=>e.jsx(U.span,{...t,ref:s,style:{...$t,...t.style}}));we.displayName=Bt;var ge="ToastProvider",[ye,Wt,Ht]=lt("Toast"),[Ae]=ct("Toast",[Ht]),[zt,se]=Ae(ge),Ie=t=>{const{__scopeToast:s,label:a="Notification",duration:n=5e3,swipeDirection:i="right",swipeThreshold:c=50,children:l}=t,[d,m]=r.useState(null),[o,u]=r.useState(0),x=r.useRef(!1),h=r.useRef(!1);return a.trim()||console.error(`Invalid prop \`label\` supplied to \`${ge}\`. Expected non-empty \`string\`.`),e.jsx(ye.Provider,{scope:s,children:e.jsx(zt,{scope:s,label:a,duration:n,swipeDirection:i,swipeThreshold:c,toastCount:o,viewport:d,onViewportChange:m,onToastAdd:r.useCallback(()=>u(g=>g+1),[]),onToastRemove:r.useCallback(()=>u(g=>g-1),[]),isFocusedToastEscapeKeyDownRef:x,isClosePausedRef:h,children:l})})};Ie.displayName=ge;var Me="ToastViewport",Kt=["F8"],ce="toast.viewportPause",le="toast.viewportResume",_e=r.forwardRef((t,s)=>{const{__scopeToast:a,hotkey:n=Kt,label:i="Notifications ({hotkey})",...c}=t,l=se(Me,a),d=Wt(a),m=r.useRef(null),o=r.useRef(null),u=r.useRef(null),x=r.useRef(null),h=Pe(s,x,l.onViewportChange),g=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),b=l.toastCount>0;r.useEffect(()=>{const p=S=>{var j;n.length!==0&&n.every(N=>S[N]||S.code===N)&&((j=x.current)==null||j.focus())};return document.addEventListener("keydown",p),()=>document.removeEventListener("keydown",p)},[n]),r.useEffect(()=>{const p=m.current,S=x.current;if(b&&p&&S){const y=()=>{if(!l.isClosePausedRef.current){const C=new CustomEvent(ce);S.dispatchEvent(C),l.isClosePausedRef.current=!0}},j=()=>{if(l.isClosePausedRef.current){const C=new CustomEvent(le);S.dispatchEvent(C),l.isClosePausedRef.current=!1}},N=C=>{!p.contains(C.relatedTarget)&&j()},T=()=>{p.contains(document.activeElement)||j()};return p.addEventListener("focusin",y),p.addEventListener("focusout",N),p.addEventListener("pointermove",y),p.addEventListener("pointerleave",T),window.addEventListener("blur",y),window.addEventListener("focus",j),()=>{p.removeEventListener("focusin",y),p.removeEventListener("focusout",N),p.removeEventListener("pointermove",y),p.removeEventListener("pointerleave",T),window.removeEventListener("blur",y),window.removeEventListener("focus",j)}}},[b,l.isClosePausedRef]);const w=r.useCallback(({tabbingDirection:p})=>{const y=d().map(j=>{const N=j.ref.current,T=[N,...rs(N)];return p==="forwards"?T:T.reverse()});return(p==="forwards"?y.reverse():y).flat()},[d]);return r.useEffect(()=>{const p=x.current;if(p){const S=y=>{var T,C,O;const j=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!j){const B=document.activeElement,V=y.shiftKey;if(y.target===p&&V){(T=o.current)==null||T.focus();return}const L=w({tabbingDirection:V?"backwards":"forwards"}),X=L.findIndex(f=>f===B);ie(L.slice(X+1))?y.preventDefault():V?(C=o.current)==null||C.focus():(O=u.current)==null||O.focus()}};return p.addEventListener("keydown",S),()=>p.removeEventListener("keydown",S)}},[d,w]),e.jsxs(dt,{ref:m,role:"region","aria-label":i.replace("{hotkey}",g),tabIndex:-1,style:{pointerEvents:b?void 0:"none"},children:[b&&e.jsx(de,{ref:o,onFocusFromOutsideViewport:()=>{const p=w({tabbingDirection:"forwards"});ie(p)}}),e.jsx(ye.Slot,{scope:a,children:e.jsx(U.ol,{tabIndex:-1,...c,ref:h})}),b&&e.jsx(de,{ref:u,onFocusFromOutsideViewport:()=>{const p=w({tabbingDirection:"backwards"});ie(p)}})]})});_e.displayName=Me;var Fe="ToastFocusProxy",de=r.forwardRef((t,s)=>{const{__scopeToast:a,onFocusFromOutsideViewport:n,...i}=t,c=se(Fe,a);return e.jsx(we,{tabIndex:0,...i,ref:s,style:{position:"fixed"},onFocus:l=>{var o;const d=l.relatedTarget;!((o=c.viewport)!=null&&o.contains(d))&&n()}})});de.displayName=Fe;var K="Toast",Xt="toast.swipeStart",Yt="toast.swipeMove",Gt="toast.swipeCancel",qt="toast.swipeEnd",Oe=r.forwardRef((t,s)=>{const{forceMount:a,open:n,defaultOpen:i,onOpenChange:c,...l}=t,[d,m]=ut({prop:n,defaultProp:i??!0,onChange:c,caller:K});return e.jsx(pt,{present:a||d,children:e.jsx(Zt,{open:d,...l,ref:s,onClose:()=>m(!1),onPause:Z(t.onPause),onResume:Z(t.onResume),onSwipeStart:I(t.onSwipeStart,o=>{o.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:I(t.onSwipeMove,o=>{const{x:u,y:x}=o.detail.delta;o.currentTarget.setAttribute("data-swipe","move"),o.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),o.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${x}px`)}),onSwipeCancel:I(t.onSwipeCancel,o=>{o.currentTarget.setAttribute("data-swipe","cancel"),o.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),o.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),o.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),o.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:I(t.onSwipeEnd,o=>{const{x:u,y:x}=o.detail.delta;o.currentTarget.setAttribute("data-swipe","end"),o.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),o.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),o.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),o.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${x}px`),m(!1)})})})});Oe.displayName=K;var[Jt,Qt]=Ae(K,{onClose(){}}),Zt=r.forwardRef((t,s)=>{const{__scopeToast:a,type:n="foreground",duration:i,open:c,onClose:l,onEscapeKeyDown:d,onPause:m,onResume:o,onSwipeStart:u,onSwipeMove:x,onSwipeCancel:h,onSwipeEnd:g,...b}=t,w=se(K,a),[p,S]=r.useState(null),y=Pe(s,f=>S(f)),j=r.useRef(null),N=r.useRef(null),T=i||w.duration,C=r.useRef(0),O=r.useRef(T),B=r.useRef(0),{onToastAdd:V,onToastRemove:ae}=w,$=Z(()=>{var k;(p==null?void 0:p.contains(document.activeElement))&&((k=w.viewport)==null||k.focus()),l()}),L=r.useCallback(f=>{!f||f===1/0||(window.clearTimeout(B.current),C.current=new Date().getTime(),B.current=window.setTimeout($,f))},[$]);r.useEffect(()=>{const f=w.viewport;if(f){const k=()=>{L(O.current),o==null||o()},_=()=>{const W=new Date().getTime()-C.current;O.current=O.current-W,window.clearTimeout(B.current),m==null||m()};return f.addEventListener(ce,_),f.addEventListener(le,k),()=>{f.removeEventListener(ce,_),f.removeEventListener(le,k)}}},[w.viewport,T,m,o,L]),r.useEffect(()=>{c&&!w.isClosePausedRef.current&&L(T)},[c,T,w.isClosePausedRef,L]),r.useEffect(()=>(V(),()=>ae()),[V,ae]);const X=r.useMemo(()=>p?He(p):null,[p]);return w.viewport?e.jsxs(e.Fragment,{children:[X&&e.jsx(es,{__scopeToast:a,role:"status","aria-live":n==="foreground"?"assertive":"polite",children:X}),e.jsx(Jt,{scope:a,onClose:$,children:mt.createPortal(e.jsx(ye.ItemSlot,{scope:a,children:e.jsx(xt,{asChild:!0,onEscapeKeyDown:I(d,()=>{w.isFocusedToastEscapeKeyDownRef.current||$(),w.isFocusedToastEscapeKeyDownRef.current=!1}),children:e.jsx(U.li,{tabIndex:0,"data-state":c?"open":"closed","data-swipe-direction":w.swipeDirection,...b,ref:y,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:I(t.onKeyDown,f=>{f.key==="Escape"&&(d==null||d(f.nativeEvent),f.nativeEvent.defaultPrevented||(w.isFocusedToastEscapeKeyDownRef.current=!0,$()))}),onPointerDown:I(t.onPointerDown,f=>{f.button===0&&(j.current={x:f.clientX,y:f.clientY})}),onPointerMove:I(t.onPointerMove,f=>{if(!j.current)return;const k=f.clientX-j.current.x,_=f.clientY-j.current.y,W=!!N.current,H=["left","right"].includes(w.swipeDirection),Y=["left","up"].includes(w.swipeDirection)?Math.min:Math.max,ot=H?Y(0,k):0,it=H?0:Y(0,_),ne=f.pointerType==="touch"?10:2,G={x:ot,y:it},je={originalEvent:f,delta:G};W?(N.current=G,q(Yt,x,je,{discrete:!1})):Ce(G,w.swipeDirection,ne)?(N.current=G,q(Xt,u,je,{discrete:!1}),f.target.setPointerCapture(f.pointerId)):(Math.abs(k)>ne||Math.abs(_)>ne)&&(j.current=null)}),onPointerUp:I(t.onPointerUp,f=>{const k=N.current,_=f.target;if(_.hasPointerCapture(f.pointerId)&&_.releasePointerCapture(f.pointerId),N.current=null,j.current=null,k){const W=f.currentTarget,H={originalEvent:f,delta:k};Ce(k,w.swipeDirection,w.swipeThreshold)?q(qt,g,H,{discrete:!0}):q(Gt,h,H,{discrete:!0}),W.addEventListener("click",Y=>Y.preventDefault(),{once:!0})}})})})}),w.viewport)})]}):null}),es=t=>{const{__scopeToast:s,children:a,...n}=t,i=se(K,s),[c,l]=r.useState(!1),[d,m]=r.useState(!1);return as(()=>l(!0)),r.useEffect(()=>{const o=window.setTimeout(()=>m(!0),1e3);return()=>window.clearTimeout(o)},[]),d?null:e.jsx(ft,{asChild:!0,children:e.jsx(we,{...n,children:c&&e.jsxs(e.Fragment,{children:[i.label," ",a]})})})},ts="ToastTitle",Le=r.forwardRef((t,s)=>{const{__scopeToast:a,...n}=t;return e.jsx(U.div,{...n,ref:s})});Le.displayName=ts;var ss="ToastDescription",Ue=r.forwardRef((t,s)=>{const{__scopeToast:a,...n}=t;return e.jsx(U.div,{...n,ref:s})});Ue.displayName=ss;var Ve="ToastAction",$e=r.forwardRef((t,s)=>{const{altText:a,...n}=t;return a.trim()?e.jsx(We,{altText:a,asChild:!0,children:e.jsx(ve,{...n,ref:s})}):(console.error(`Invalid prop \`altText\` supplied to \`${Ve}\`. Expected non-empty \`string\`.`),null)});$e.displayName=Ve;var Be="ToastClose",ve=r.forwardRef((t,s)=>{const{__scopeToast:a,...n}=t,i=Qt(Be,a);return e.jsx(We,{asChild:!0,children:e.jsx(U.button,{type:"button",...n,ref:s,onClick:I(t.onClick,i.onClose)})})});ve.displayName=Be;var We=r.forwardRef((t,s)=>{const{__scopeToast:a,altText:n,...i}=t;return e.jsx(U.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...i,ref:s})});function He(t){const s=[];return Array.from(t.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&s.push(n.textContent),ns(n)){const i=n.ariaHidden||n.hidden||n.style.display==="none",c=n.dataset.radixToastAnnounceExclude==="";if(!i)if(c){const l=n.dataset.radixToastAnnounceAlt;l&&s.push(l)}else s.push(...He(n))}}),s}function q(t,s,a,{discrete:n}){const i=a.originalEvent.currentTarget,c=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:a});s&&i.addEventListener(t,s,{once:!0}),n?wt(i,c):i.dispatchEvent(c)}var Ce=(t,s,a=0)=>{const n=Math.abs(t.x),i=Math.abs(t.y),c=n>i;return s==="left"||s==="right"?c&&n>a:!c&&i>a};function as(t=()=>{}){const s=Z(t);ht(()=>{let a=0,n=0;return a=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(s)),()=>{window.cancelAnimationFrame(a),window.cancelAnimationFrame(n)}},[s])}function ns(t){return t.nodeType===t.ELEMENT_NODE}function rs(t){const s=[],a=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const i=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||i?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;a.nextNode();)s.push(a.currentNode);return s}function ie(t){const s=document.activeElement;return t.some(a=>a===s?!0:(a.focus(),document.activeElement!==s))}var os=Ie,ze=_e,Ke=Oe,Xe=Le,Ye=Ue,Ge=$e,qe=ve;const is=os,Je=r.forwardRef(({className:t,...s},a)=>e.jsx(ze,{ref:a,className:F("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...s}));Je.displayName=ze.displayName;const cs=De("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Qe=r.forwardRef(({className:t,variant:s,...a},n)=>e.jsx(Ke,{ref:n,className:F(cs({variant:s}),t),...a}));Qe.displayName=Ke.displayName;const ls=r.forwardRef(({className:t,...s},a)=>e.jsx(Ge,{ref:a,className:F("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...s}));ls.displayName=Ge.displayName;const Ze=r.forwardRef(({className:t,...s},a)=>e.jsx(qe,{ref:a,className:F("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...s,children:e.jsx(gt,{className:"h-4 w-4"})}));Ze.displayName=qe.displayName;const et=r.forwardRef(({className:t,...s},a)=>e.jsx(Xe,{ref:a,className:F("text-sm font-semibold",t),...s}));et.displayName=Xe.displayName;const tt=r.forwardRef(({className:t,...s},a)=>e.jsx(Ye,{ref:a,className:F("text-sm opacity-90",t),...s}));tt.displayName=Ye.displayName;function ds(){const{toasts:t}=te();return e.jsxs(is,{children:[t.map(function({id:s,title:a,description:n,action:i,...c}){return e.jsxs(Qe,{...c,children:[e.jsxs("div",{className:"grid gap-1",children:[a&&e.jsx(et,{children:a}),n&&e.jsx(tt,{children:n})]}),i,e.jsx(Ze,{})]},s)}),e.jsx(Je,{})]})}function us({open:t,onOpenChange:s}){const[a,n]=r.useState([]),[i,c]=r.useState(!1),[l,d]=r.useState(null),m=()=>{c(!0),At().then(n).catch(console.error).finally(()=>c(!1))};r.useEffect(()=>{t&&m()},[t]);const o=async u=>{d(u.id);try{await It(u.id,u.connected?"disconnect":"connect"),m()}catch(x){console.error(x)}finally{d(null)}};return e.jsx(ue,{open:t,onOpenChange:s,children:e.jsxs(pe,{className:"sm:max-w-[425px]",children:[e.jsxs(me,{children:[e.jsx(xe,{children:"Cloud Storage Settings"}),e.jsx(fe,{children:"Connect your cloud storage provider to enable automatic off-site backups."})]}),e.jsx("div",{className:"grid gap-4 py-4",children:i&&a.length===0?e.jsx("div",{className:"flex justify-center p-4",children:e.jsx(M,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):e.jsxs("div",{className:"space-y-2",children:[a.length===0&&e.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"No providers available."}),a.map(u=>e.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-slate-100 dark:bg-slate-800",children:e.jsx(St,{className:"h-4 w-4 text-slate-500"})}),e.jsxs("div",{className:"grid gap-0.5",children:[e.jsx("div",{className:"font-medium text-sm",children:u.name}),e.jsx("div",{className:"text-[10px] text-muted-foreground uppercase",children:u.connected?"Connected":"Not Connected"})]})]}),e.jsx(v,{size:"sm",variant:u.connected?"outline":"default",onClick:()=>o(u),disabled:l===u.id||u.id!=="gdrive"&&u.id!=="aws_s3"&&u.id!=="dropbox",children:l===u.id?e.jsx(M,{className:"h-4 w-4 animate-spin"}):u.connected?e.jsxs("div",{className:"flex items-center gap-2 group",children:[e.jsx(he,{className:"h-4 w-4 text-green-500 group-hover:hidden"}),e.jsx("span",{className:"hidden group-hover:inline text-xs text-red-500",children:"Disconnect"})]}):"Connect"})]},u.id))]})})]})})}function ps({open:t,onOpenChange:s}){const[a,n]=r.useState("idle"),[i,c]=r.useState(""),[l,d]=r.useState(0),[m,o]=r.useState([]),u=async()=>{n("running"),o([]),d(0);try{const h=await(await fetch(`${window.sbwpData.restUrl}/safe-update/start`,{method:"POST",headers:{"X-WP-Nonce":window.sbwpData.nonce}})).json();for(const g of h.steps)c(g.label),o(b=>[...b,`> ${g.label}`]),await new Promise(b=>setTimeout(b,g.duration/2)),d(b=>b+100/h.steps.length);n("complete"),o(g=>[...g,"✅ Test Complete: No Issues Found."])}catch{n("error"),o(h=>[...h,"❌ Error: Failed to start safe update simulator."])}};return e.jsx(ue,{open:t,onOpenChange:s,children:e.jsxs(pe,{className:"sm:max-w-[500px]",children:[e.jsxs(me,{children:[e.jsx(xe,{children:"Safe Update Tester"}),e.jsx(fe,{children:"Test updates in a temporary sandbox before applying them to your live site."})]}),e.jsxs("div",{className:"py-4 space-y-4",children:[a==="idle"&&e.jsxs("div",{className:"text-center py-8 space-y-4",children:[e.jsx("div",{className:"mx-auto w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(kt,{className:"h-6 w-6 text-blue-600"})}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"This will clone your site to a temporary staging area and attempt to update 3 plugins."}),e.jsx(v,{className:"w-full",onClick:u,children:"Start Safe Update Test"})]}),a==="running"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(M,{className:"h-5 w-5 animate-spin text-blue-500"}),e.jsx("span",{className:"font-medium text-sm",children:i})]}),e.jsx("div",{className:"h-2 bg-slate-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-500 transition-all duration-500",style:{width:`${l}%`}})}),e.jsx("div",{className:"bg-slate-950 text-slate-50 p-3 rounded-md font-mono text-xs h-32 overflow-y-auto",children:m.map((x,h)=>e.jsx("div",{children:x},h))})]}),a==="complete"&&e.jsxs("div",{className:"text-center py-4 space-y-4",children:[e.jsx("div",{className:"mx-auto w-12 h-12 bg-emerald-100 rounded-full flex items-center justify-center",children:e.jsx(he,{className:"h-6 w-6 text-emerald-600"})}),e.jsx("h3",{className:"font-bold",children:"Updates Passed"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"The updates were applied successfully in the sandbox. It is safe to update your live site."}),e.jsx(v,{className:"w-full bg-emerald-600 hover:bg-emerald-700",onClick:()=>window.location.href="/wp-admin/update-core.php",children:"Apply Updates Logic"})]})]})]})})}function ms({open:t,onOpenChange:s}){const[a,n]=r.useState("idle"),[i,c]=r.useState(0),[l,d]=r.useState(0),[m,o]=r.useState(null),u=async()=>{n("scanning"),c(0),d(0);const x=setInterval(()=>{c(h=>{const g=h+5;return g>90?90:g}),d(h=>h+1)},200);try{const g=await(await fetch(`${window.sbwpData.restUrl}/conflict-scan/start`,{method:"POST",headers:{"X-WP-Nonce":window.sbwpData.nonce}})).json();clearInterval(x),c(100),g.culprit?(n("found"),o(g.culprit)):n("clean")}catch(h){clearInterval(x),n("idle"),console.error(h)}};return e.jsx(ue,{open:t,onOpenChange:s,children:e.jsxs(pe,{className:"sm:max-w-[500px]",children:[e.jsxs(me,{children:[e.jsx(xe,{children:"Automated Conflict Scanner"}),e.jsx(fe,{children:"Automatically diagnose plugin conflicts by simulating binary searches."})]}),e.jsxs("div",{className:"py-6 space-y-6",children:[a==="idle"&&e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center",children:e.jsx(Nt,{className:"h-8 w-8 text-orange-600"})}),e.jsx("p",{className:"text-muted-foreground",children:"This tool will temporarily simulate deactivating plugins to identify which one is causing errors on your site."}),e.jsx(v,{size:"lg",onClick:u,className:"bg-orange-600 hover:bg-orange-700",children:"Start Auto-Diagnosis"})]}),a==="scanning"&&e.jsxs("div",{className:"space-y-4 text-center",children:[e.jsx(M,{className:"h-12 w-12 animate-spin text-orange-500 mx-auto"}),e.jsx("h3",{className:"font-semibold text-lg",children:"Scanning Plugins..."}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Checked ",l," plugins so far"]}),e.jsx("div",{className:"h-2 bg-slate-100 rounded-full overflow-hidden w-full",children:e.jsx("div",{className:"h-full bg-orange-500 transition-all duration-300",style:{width:`${i}%`}})})]}),a==="found"&&m&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3 text-red-800",children:[e.jsx(yt,{className:"h-6 w-6"}),e.jsx("h3",{className:"font-bold text-lg",children:"Conflict Detected!"})]}),e.jsxs("div",{className:"bg-white p-3 rounded border border-red-100",children:[e.jsx("p",{className:"font-semibold",children:m.name}),e.jsx("p",{className:"text-xs text-muted-foreground font-mono mt-1",children:m.file})]}),e.jsxs("p",{className:"text-sm text-red-700",children:[e.jsx("strong",{children:"Issue:"})," ",m.reason]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsx(v,{variant:"destructive",className:"flex-1",children:"Deactivate Plugin"}),e.jsx(v,{variant:"outline",className:"flex-1",onClick:()=>s(!1),children:"Ignore"})]})]}),a==="clean"&&e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-emerald-100 rounded-full flex items-center justify-center",children:e.jsx(he,{className:"h-8 w-8 text-emerald-600"})}),e.jsx("h3",{className:"font-bold text-lg",children:"No Conflicts Found"}),e.jsx("p",{className:"text-muted-foreground",children:"your plugins appear to be working correctly together."}),e.jsx(v,{variant:"outline",onClick:()=>s(!1),children:"Close"})]})]})]})})}function xs({onNavigate:t}){const[s,a]=r.useState(null),[n,i]=r.useState(!0),[c,l]=r.useState(!1),[d,m]=r.useState(!1),[o,u]=r.useState(!1),[x,h]=r.useState(!1),{toast:g}=te(),b=async()=>{try{const p=await Dt();a(p)}catch(p){console.error("Failed to load stats",p)}finally{i(!1)}};r.useEffect(()=>{b()},[]);const w=async()=>{l(!0);try{await Rt(),g({title:"Backup Complete",description:"Your local backup was created successfully."}),await b()}catch{g({title:"Backup Failed",description:"There was an error creating your backup.",variant:"destructive"})}finally{l(!1)}};return n?e.jsx("div",{className:"p-8 flex justify-center",children:e.jsx(M,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx(ds,{}),e.jsx(us,{open:d,onOpenChange:m}),e.jsx(ps,{open:o,onOpenChange:u}),e.jsx(ms,{open:x,onOpenChange:h}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs(E,{children:[e.jsxs(P,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(D,{className:"text-sm font-medium",children:"Last Backup"}),e.jsx(Et,{className:"h-4 w-4 text-emerald-500"})]}),e.jsxs(R,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(s==null?void 0:s.last_backup)||"Never"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[(s==null?void 0:s.count)||0," total backups"]})]})]}),e.jsxs(E,{children:[e.jsxs(P,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(D,{className:"text-sm font-medium",children:"Storage Usage"}),e.jsx(Ct,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(R,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(s==null?void 0:s.total_size)||"0 B"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Local storage used"})]})]}),e.jsxs(E,{children:[e.jsxs(P,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(D,{className:"text-sm font-medium",children:"Quick Actions"}),e.jsx(vt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(R,{className:"flex gap-2",children:[e.jsx(v,{size:"sm",onClick:w,disabled:c,children:c?e.jsxs(e.Fragment,{children:[e.jsx(M,{className:"mr-2 h-4 w-4 animate-spin"}),"Backing Up..."]}):"Backup Now"}),e.jsx(v,{size:"sm",variant:"outline",onClick:()=>t("settings"),children:"Settings"})]})]}),e.jsxs(E,{className:window.sbwpData.isPro?"border-emerald-500/50 bg-emerald-500/5":"opacity-80",children:[e.jsxs(P,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(D,{className:"text-sm font-medium",children:"Cloud Storage"}),window.sbwpData.isPro?e.jsx("span",{className:"text-[10px] bg-emerald-500/20 text-emerald-500 px-2 py-0.5 rounded-full font-bold",children:"PRO ACTIVE"}):e.jsx("span",{className:"text-[10px] bg-slate-100 text-slate-500 px-2 py-0.5 rounded-full font-bold",children:"FREE"})]}),e.jsxs(R,{children:[e.jsx("div",{className:"text-2xl font-bold",children:window.sbwpData.isPro?"Not Connected":"Locked"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:window.sbwpData.isPro?"Configure Google Drive / S3":"Upgrade to enable Cloud Backups"}),window.sbwpData.isPro?e.jsx(v,{size:"sm",variant:"outline",className:"mt-4 w-full h-8 text-xs",onClick:()=>m(!0),children:"Configure"}):e.jsx(v,{size:"sm",variant:"secondary",className:"mt-4 w-full h-8 text-xs",children:"Get Pro"})]})]}),window.sbwpData.isPro&&e.jsxs(E,{className:"border-emerald-500/50 bg-emerald-500/5",children:[e.jsxs(P,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(D,{className:"text-sm font-medium",children:"Scheduled Backups"}),e.jsx("span",{className:"text-[10px] bg-emerald-500/20 text-emerald-500 px-2 py-0.5 rounded-full font-bold",children:"PRO ACTIVE"})]}),e.jsxs(R,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"Manage"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Automated daily/weekly backups"}),e.jsx(v,{size:"sm",variant:"outline",className:"mt-4 w-full h-8 text-xs",onClick:()=>t("schedules"),children:"Configure Schedules"})]})]}),e.jsxs(E,{children:[e.jsxs(P,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(D,{className:"text-sm font-medium",children:"Safe Update"}),e.jsx(bt,{className:"h-4 w-4 text-blue-500"})]}),e.jsxs(R,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"Updates"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Test updates in sandbox"}),e.jsx(v,{size:"sm",className:"mt-4 w-full h-8 text-xs bg-blue-600 hover:bg-blue-500 text-white",onClick:async()=>{window.sbwpData.isPro?u(!0):window.location.href="/wp-admin/update-core.php"},children:window.sbwpData.isPro?"Test Updates":"Go to Updates"})]})]}),e.jsxs(E,{className:window.sbwpData.isPro?"border-orange-500/50 bg-orange-500/5":"opacity-80",children:[e.jsxs(P,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(D,{className:"text-sm font-medium",children:"Conflict Scanner"}),window.sbwpData.isPro?e.jsx("span",{className:"text-[10px] bg-orange-500/20 text-orange-500 px-2 py-0.5 rounded-full font-bold",children:"PRO ACTIVE"}):e.jsx("span",{className:"text-[10px] bg-slate-100 text-slate-500 px-2 py-0.5 rounded-full font-bold",children:"LOCKED"})]}),e.jsxs(R,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"Diagnose"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Find buggy plugins auto-magically"}),e.jsx(v,{size:"sm",variant:window.sbwpData.isPro?"outline":"secondary",className:"mt-4 w-full h-8 text-xs",onClick:()=>window.sbwpData.isPro&&h(!0),children:window.sbwpData.isPro?"Start Scan":"Get Pro"})]})]})]}),e.jsxs(E,{className:"col-span-3",children:[e.jsxs(P,{children:[e.jsx(D,{children:"Welcome to SafeBackup"}),e.jsx(ee,{children:(s==null?void 0:s.count)===0?"Your site is currently unprotected. Create a backup to get started.":"Your site is protected. You can create a new backup at any time."})]}),e.jsx(R,{children:e.jsx("div",{className:"rounded-md bg-muted p-4",children:e.jsx("p",{className:"text-sm",children:(s==null?void 0:s.count)===0?'Ready to protect your site? Click the "Backup Now" button above to create your first local backup.':`You have ${s==null?void 0:s.count} local backups available.`})})})]})]})}const st=r.forwardRef(({className:t,type:s,...a},n)=>e.jsx("input",{type:s,className:F("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...a}));st.displayName="Input";var fs=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],hs=fs.reduce((t,s)=>{const a=jt(`Primitive.${s}`),n=r.forwardRef((i,c)=>{const{asChild:l,...d}=i,m=l?a:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(m,{...d,ref:c})});return n.displayName=`Primitive.${s}`,{...t,[s]:n}},{}),ws="Label",at=r.forwardRef((t,s)=>e.jsx(hs.label,{...t,ref:s,onMouseDown:a=>{var i;a.target.closest("button, input, select, textarea")||((i=t.onMouseDown)==null||i.call(t,a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));at.displayName=ws;var nt=at;const gs=De("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),rt=r.forwardRef(({className:t,...s},a)=>e.jsx(nt,{ref:a,className:F(gs(),t),...s}));rt.displayName=nt.displayName;function ys({onBack:t}){const[s,a]=r.useState({retention_limit:5}),[n,i]=r.useState(!0),[c,l]=r.useState(!1),{toast:d}=te();r.useEffect(()=>{Mt().then(a).catch(console.error).finally(()=>i(!1))},[]);const m=async()=>{l(!0);try{await _t(s),d({title:"Settings Saved",description:"Your settings have been updated."})}catch{d({title:"Error",description:"Failed to save settings.",variant:"destructive"})}finally{l(!1)}};return n?e.jsx("div",{className:"p-8 flex justify-center",children:e.jsx(M,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):e.jsxs("div",{className:"space-y-6 max-w-2xl",children:[e.jsxs(v,{variant:"ghost",className:"pl-0 gap-2",onClick:t,children:[e.jsx(Re,{className:"h-4 w-4"}),"Back to Dashboard"]}),e.jsxs(E,{children:[e.jsxs(P,{children:[e.jsx(D,{children:"General Settings"}),e.jsx(ee,{children:"Configure how SafeBackup handles your data."})]}),e.jsxs(R,{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(rt,{htmlFor:"retention",children:"Local Backup Retention"}),e.jsx(st,{id:"retention",type:"number",min:1,max:50,value:s.retention_limit,onChange:o=>a(u=>({...u,retention_limit:parseInt(o.target.value)||1}))}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Number of local backups to keep. Oldest backups will be deleted automatically when this limit is reached."})]}),e.jsxs(v,{onClick:m,disabled:c,children:[c&&e.jsx(M,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Changes"]})]})]})]})}function vs({onBack:t}){const[s,a]=r.useState([]),[n,i]=r.useState(!1),[c,l]=r.useState(!1),{toast:d}=te(),m=async()=>{i(!0);try{const h=await(await fetch(`${window.sbwpData.restUrl}/schedules`,{headers:{"X-WP-Nonce":window.sbwpData.nonce}})).json();a(h)}catch(x){console.error(x)}finally{i(!1)}};r.useEffect(()=>{m()},[]);const o=async x=>{l(!0);try{(await fetch(`${window.sbwpData.restUrl}/schedules`,{method:"POST",headers:{"X-WP-Nonce":window.sbwpData.nonce,"Content-Type":"application/json"},body:JSON.stringify({frequency:x,time:"00:00"})})).ok&&(d({title:"Schedule Created",description:`New ${x} schedule added.`}),m())}catch{d({title:"Error",variant:"destructive",description:"Failed to create schedule."})}finally{l(!1)}},u=async x=>{if(confirm("Delete this schedule?"))try{await fetch(`${window.sbwpData.restUrl}/schedules/${x}`,{method:"DELETE",headers:{"X-WP-Nonce":window.sbwpData.nonce}}),d({title:"Schedule Deleted"}),m()}catch{d({title:"Error",variant:"destructive"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(v,{variant:"ghost",size:"sm",onClick:t,children:[e.jsx(Re,{className:"mr-2 h-4 w-4"}),"Back"]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Scheduled Backups"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your automated backup routines."})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(E,{children:[e.jsxs(P,{children:[e.jsx(D,{children:"Create Schedule"}),e.jsx(ee,{children:"Add a new automated backup task."})]}),e.jsxs(R,{className:"space-y-4",children:[e.jsxs(v,{className:"w-full justify-start",onClick:()=>o("daily"),disabled:c,children:[e.jsx(Te,{className:"mr-2 h-4 w-4"}),"Add Daily Backup"]}),e.jsxs(v,{className:"w-full justify-start",variant:"secondary",onClick:()=>o("weekly"),disabled:c,children:[e.jsx(Te,{className:"mr-2 h-4 w-4"}),"Add Weekly Backup"]})]})]}),e.jsxs(E,{children:[e.jsxs(P,{children:[e.jsx(D,{children:"Active Schedules"}),e.jsx(ee,{children:"Your currently running backup jobs."})]}),e.jsx(R,{children:n?e.jsx("div",{className:"flex justify-center p-4",children:e.jsx(M,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):s.length===0?e.jsx("p",{className:"text-sm text-muted-foreground",children:"No active schedules."}):e.jsx("div",{className:"space-y-2",children:s.map(x=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Tt,{className:"h-5 w-5 text-blue-500"}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium capitalize",children:[x.frequency," Backup"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Next run: calculated by WP Cron"})]})]}),e.jsx(v,{variant:"ghost",size:"sm",onClick:()=>u(x.id),children:e.jsx(Pt,{className:"h-4 w-4 text-red-500"})})]},x.id))})})]})]})]})}function ke(){const[t,s]=r.useState("dashboard");return e.jsx("div",{className:"min-h-screen bg-background p-8 font-sans antialiased text-foreground",children:e.jsxs("div",{className:"mx-auto max-w-6xl space-y-8",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"SafeBackup & Repair"}),e.jsx("div",{className:"flex items-center gap-2",children:window.sbwpData.isPro?e.jsx("span",{className:"text-xs font-medium text-emerald-600 bg-emerald-100 dark:bg-emerald-900/30 dark:text-emerald-400 px-2 py-1 rounded-full border border-emerald-200 dark:border-emerald-800",children:"Pro Active"}):e.jsx("span",{className:"text-xs font-medium text-slate-600 bg-slate-100 dark:bg-slate-900/30 dark:text-slate-400 px-2 py-1 rounded-full border border-slate-200 dark:border-slate-800",children:"Free Edition"})})]}),t==="dashboard"&&e.jsx(xs,{onNavigate:s}),t==="settings"&&e.jsx(ys,{onBack:()=>s("dashboard")}),t==="schedules"&&e.jsx(vs,{onBack:()=>s("dashboard")})]})})}const Ee=document.getElementById("sbwp-admin-root");if(Ee)be.createRoot(Ee).render(e.jsx(Ne.StrictMode,{children:e.jsx(ke,{})}));else{const t=document.getElementById("root");t&&be.createRoot(t).render(e.jsx(Ne.StrictMode,{children:e.jsx(ke,{})}))}
