import{r,j as e,c as Re,a as L,b as os,d as P,D as ae,e as ne,f as re,g as oe,h as we,L as z,B as S,R as Ie,S as is,A as ye,T as ot,i as it,k as Ue,l as We,m as lt,n as ct,C as V,o as H,p as q,q as J,s as K,t as de,u as dt,P as Y,v as ut,w as mt,x as ls,y as xt,z as ht,E as pt,F as G,G as fe,H as ft,I as gt,J as wt,K as yt,M as jt,N as vt,O as Ve,Q as Ke}from"./globals-BTwDIQrf.js";var bt=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Nt=bt.reduce((s,t)=>{const a=Re(`Primitive.${t}`),n=r.forwardRef((o,x)=>{const{asChild:i,...d}=o,c=i?a:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(c,{...d,ref:x})});return n.displayName=`Primitive.${t}`,{...s,[t]:n}},{}),kt="Label",cs=r.forwardRef((s,t)=>e.jsx(Nt.label,{...s,ref:t,onMouseDown:a=>{var o;a.target.closest("button, input, select, textarea")||((o=s.onMouseDown)==null||o.call(s,a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));cs.displayName=kt;var ds=cs;const St=os("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),W=r.forwardRef(({className:s,...t},a)=>e.jsx(ds,{ref:a,className:L(St(),s),...t}));W.displayName=ds.displayName;/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=P("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=P("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=P("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=P("ArrowUpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=P("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=P("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=P("CalendarClock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.25V14",key:"re2vv1"}],["path",{d:"M22 16a6 6 0 1 1-12 0 6 6 0 0 1 12 0Z",key:"ame013"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dt=P("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=P("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=P("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=P("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=P("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=P("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=P("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=P("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=P("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=P("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=P("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=P("FileCode",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"m10 13-2 2 2 2",key:"17smn8"}],["path",{d:"m14 17 2-2-2-2",key:"14mezr"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=P("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=P("File",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=P("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=P("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ws=P("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mt=P("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=P("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=P("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=P("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ot=P("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=P("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=P("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=P("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=P("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=P("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=P("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=P("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=P("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=P("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=P("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=P("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function Xt(s,t=[]){let a=[];function n(x,i){const d=r.createContext(i);d.displayName=x+"Context";const c=a.length;a=[...a,i];const p=j=>{var v;const{scope:k,children:R,...w}=j,g=((v=k==null?void 0:k[s])==null?void 0:v[c])||d,l=r.useMemo(()=>w,Object.values(w));return e.jsx(g.Provider,{value:l,children:R})};p.displayName=x+"Provider";function b(j,k){var g;const R=((g=k==null?void 0:k[s])==null?void 0:g[c])||d,w=r.useContext(R);if(w)return w;if(i!==void 0)return i;throw new Error(`\`${j}\` must be used within \`${x}\``)}return[p,b]}const o=()=>{const x=a.map(i=>r.createContext(i));return function(d){const c=(d==null?void 0:d[s])||x;return r.useMemo(()=>({[`__scope${s}`]:{...d,[s]:c}}),[d,c])}};return o.scopeName=s,[n,Ht(o,...t)]}function Ht(...s){const t=s[0];if(s.length===1)return t;const a=()=>{const n=s.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(x){const i=n.reduce((d,{useScope:c,scopeName:p})=>{const j=c(x)[`__scope${p}`];return{...d,...j}},{});return r.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return a.scopeName=t.scopeName,a}var qt=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],vs=qt.reduce((s,t)=>{const a=Re(`Primitive.${t}`),n=r.forwardRef((o,x)=>{const{asChild:i,...d}=o,c=i?a:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(c,{...d,ref:x})});return n.displayName=`Primitive.${t}`,{...s,[t]:n}},{}),Fe="Progress",Me=100,[Gt]=Xt(Fe),[Jt,Yt]=Gt(Fe),bs=r.forwardRef((s,t)=>{const{__scopeProgress:a,value:n=null,max:o,getValueLabel:x=Zt,...i}=s;(o||o===0)&&!Ye(o)&&console.error(Qt(`${o}`,"Progress"));const d=Ye(o)?o:Me;n!==null&&!Ze(n,d)&&console.error(ea(`${n}`,"Progress"));const c=Ze(n,d)?n:null,p=ge(c)?x(c,d):void 0;return e.jsx(Jt,{scope:a,value:c,max:d,children:e.jsx(vs.div,{"aria-valuemax":d,"aria-valuemin":0,"aria-valuenow":ge(c)?c:void 0,"aria-valuetext":p,role:"progressbar","data-state":Ss(c,d),"data-value":c??void 0,"data-max":d,...i,ref:t})})});bs.displayName=Fe;var Ns="ProgressIndicator",ks=r.forwardRef((s,t)=>{const{__scopeProgress:a,...n}=s,o=Yt(Ns,a);return e.jsx(vs.div,{"data-state":Ss(o.value,o.max),"data-value":o.value??void 0,"data-max":o.max,...n,ref:t})});ks.displayName=Ns;function Zt(s,t){return`${Math.round(s/t*100)}%`}function Ss(s,t){return s==null?"indeterminate":s===t?"complete":"loading"}function ge(s){return typeof s=="number"}function Ye(s){return ge(s)&&!isNaN(s)&&s>0}function Ze(s,t){return ge(s)&&!isNaN(s)&&s<=t&&s>=0}function Qt(s,t){return`Invalid prop \`max\` of value \`${s}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Me}\`.`}function ea(s,t){return`Invalid prop \`value\` of value \`${s}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Me} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var Cs=bs,sa=ks;const Ts=r.forwardRef(({className:s,value:t,indicatorClassName:a,...n},o)=>e.jsx(Cs,{ref:o,className:L("relative h-4 w-full overflow-hidden rounded-full bg-secondary",s),...n,children:e.jsx(sa,{className:L("h-full w-full flex-1 bg-primary transition-all",a),style:{transform:`translateX(-${100-(t||0)}%)`}})}));Ts.displayName=Cs.displayName;async function ta(){const s=await fetch(`${window.sbwpData.restUrl}/stats`,{headers:{"X-WP-Nonce":window.sbwpData.nonce}});if(!s.ok)throw new Error("Failed to fetch stats");return s.json()}async function aa(){const s=await fetch(`${window.sbwpData.restUrl}/backups`,{headers:{"X-WP-Nonce":window.sbwpData.nonce}});if(!s.ok)throw new Error("Failed to fetch backups");return s.json()}async function na(s){const t=await fetch(`${window.sbwpData.restUrl}/backups/${s}`,{method:"DELETE",headers:{"X-WP-Nonce":window.sbwpData.nonce}});if(!t.ok){const a=await t.json();throw new Error(a.message||"Failed to delete backup")}return t.json()}async function ra(s){const t=await fetch(`${window.sbwpData.restUrl}/backups/${s}/files`,{headers:{"X-WP-Nonce":window.sbwpData.nonce}});if(!t.ok)throw new Error("Failed to fetch backup files");return t.json()}async function oa(s,t="/"){const a=await fetch(`${window.sbwpData.restUrl}/backups/${s}/download?path=${encodeURIComponent(t)}`,{headers:{"X-WP-Nonce":window.sbwpData.nonce}});if(!a.ok)throw new Error("Failed to get download URL");return a.json()}async function ia(s){const t=await fetch(`${window.sbwpData.restUrl}/backups/${s}/contents`,{headers:{"X-WP-Nonce":window.sbwpData.nonce}});if(!t.ok)throw new Error("Failed to fetch backup contents");return t.json()}async function Qe(s,t){const a=await fetch(`${window.sbwpData.restUrl}/backups/${s}/restore`,{method:"POST",headers:{"X-WP-Nonce":window.sbwpData.nonce,"Content-Type":"application/json"},body:JSON.stringify({items:t})});if(!a.ok){const n=await a.json();throw new Error(n.message||"Failed to restore backup")}return a.json()}async function la(){try{const s=await fetch(`${window.sbwpData.restUrl}/backup/progress?t=${Date.now()}`,{headers:{"X-WP-Nonce":window.sbwpData.nonce}});if(!s.ok)return{percent:0,message:"Idle"};const t=await s.text();return t?JSON.parse(t):{percent:0,message:"Idle"}}catch{return{percent:0,message:"Idle"}}}async function ca(){const s=await fetch(`${window.sbwpData.restUrl}/backup/cancel`,{method:"POST",headers:{"X-WP-Nonce":window.sbwpData.nonce}});if(!s.ok)throw new Error("Failed to cancel backup");return await s.json()}async function da(){const s=await fetch(`${window.sbwpData.restUrl}/cloud/providers`,{headers:{"X-WP-Nonce":window.sbwpData.nonce}});if(s.status===404)return[];if(!s.ok)throw new Error("Failed to fetch cloud providers");return s.json()}async function Ne(s,t,a){const n=await fetch(`${window.sbwpData.root}wp-json/sbwp/v1/cloud/connect`,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":window.sbwpData.nonce},body:JSON.stringify({provider_id:s,action:t,...a})}),o=await n.json();if(!n.ok)throw new Error(o.message||"Failed to connect");return o}async function ua(){return(await fetch(`${window.sbwpData.root}wp-json/sbwp/v1/cloud/settings`,{headers:{"X-WP-Nonce":window.sbwpData.nonce}})).json()}async function ma(s){await fetch(`${window.sbwpData.root}wp-json/sbwp/v1/cloud/settings`,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":window.sbwpData.nonce},body:JSON.stringify(s)})}async function Ps(){const s=await fetch(`${window.sbwpData.restUrl}/settings`,{headers:{"X-WP-Nonce":window.sbwpData.nonce}});if(!s.ok)throw new Error("Failed to fetch settings");return s.json()}async function Es(s){const t=await fetch(`${window.sbwpData.restUrl}/settings`,{method:"POST",headers:{"X-WP-Nonce":window.sbwpData.nonce,"Content-Type":"application/json"},body:JSON.stringify(s)});if(!t.ok)throw new Error("Failed to save settings");return t.json()}async function xa(s="full",t=!1,a){const n=await fetch(`${window.sbwpData.restUrl}/backups`,{method:"POST",headers:{"X-WP-Nonce":window.sbwpData.nonce,"Content-Type":"application/json"},body:JSON.stringify({type:s,resume:t,session_id:a})}),o=await n.text();if(!o)throw console.error(`SBWP Fetch Error: Empty response. Status: ${n.status} ${n.statusText}`),new Error(`Empty response from server (Status ${n.status})`);try{const x=JSON.parse(o);if(!n.ok)throw new Error(x.message||"Failed to create backup");return x}catch{throw console.error("JSON Parse Error:",o),new Error("Invalid server response")}}async function ha(){const s=await fetch(`${window.sbwpData.restUrl}/safe-update/available`,{headers:{"X-WP-Nonce":window.sbwpData.nonce}});if(!s.ok)throw new Error("Failed to fetch available updates");return s.json()}async function pa(s,t=[],a=!1){const n=await fetch(`${window.sbwpData.restUrl}/safe-update/session`,{method:"POST",headers:{"X-WP-Nonce":window.sbwpData.nonce,"Content-Type":"application/json"},body:JSON.stringify({plugins:s,themes:t,core:a})});if(!n.ok)throw new Error("Failed to create safe update session");return n.json()}async function fa(s){const t=await fetch(`${window.sbwpData.restUrl}/safe-update/session/${s}`,{headers:{"X-WP-Nonce":window.sbwpData.nonce}});if(!t.ok)throw new Error("Failed to fetch session");return t.json()}async function ga(){const s=await fetch(`${window.sbwpData.restUrl}/settings/ai`,{headers:{"X-WP-Nonce":window.sbwpData.nonce}});if(!s.ok)throw new Error("Failed to fetch AI settings");return s.json()}async function es(s){const t=await fetch(`${window.sbwpData.restUrl}/settings/ai`,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":window.sbwpData.nonce},body:JSON.stringify({api_key:s})});if(!t.ok)throw new Error("Failed to save AI settings");return t.json()}async function wa(s){const t=await fetch(`${window.sbwpData.restUrl}/ai/humanize-report`,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":window.sbwpData.nonce},body:JSON.stringify({session_id:s})});if(!t.ok){const a=await t.json();throw new Error(a.message||"Failed to get AI summary")}return t.json()}async function ya(){const s=await fetch(`${window.sbwpData.restUrl}/recovery/settings`,{headers:{"X-WP-Nonce":window.sbwpData.nonce}});if(!s.ok)throw new Error("Failed to fetch recovery settings");return s.json()}async function ja(s){const t=await fetch(`${window.sbwpData.restUrl}/recovery/settings`,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":window.sbwpData.nonce},body:JSON.stringify({pin:s})});if(!t.ok)throw new Error("Failed to save recovery PIN");return t.json()}async function va(){const s=await fetch(`${window.sbwpData.restUrl}/recovery/regenerate-key`,{method:"POST",headers:{"X-WP-Nonce":window.sbwpData.nonce}});if(!s.ok)throw new Error("Failed to regenerate key");return s.json()}async function ba(){const s=await fetch(`${window.sbwpData.restUrl}/crash-status`,{headers:{"X-WP-Nonce":window.sbwpData.nonce}});if(!s.ok)throw new Error("Failed to get crash status");return s.json()}const Na=1,ka=1e6;let ke=0;function Sa(){return ke=(ke+1)%Number.MAX_SAFE_INTEGER,ke.toString()}const Se=new Map,ss=s=>{if(Se.has(s))return;const t=setTimeout(()=>{Se.delete(s),te({type:"REMOVE_TOAST",toastId:s})},ka);Se.set(s,t)},Ca=(s,t)=>{switch(t.type){case"ADD_TOAST":return{...s,toasts:[t.toast,...s.toasts].slice(0,Na)};case"UPDATE_TOAST":return{...s,toasts:s.toasts.map(a=>a.id===t.toast.id?{...a,...t.toast}:a)};case"DISMISS_TOAST":{const{toastId:a}=t;return a?ss(a):s.toasts.forEach(n=>{ss(n.id)}),{...s,toasts:s.toasts.map(n=>n.id===a||t.toastId===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return t.toastId===void 0?{...s,toasts:[]}:{...s,toasts:s.toasts.filter(a=>a.id!==t.toastId)}}},xe=[];let he={toasts:[]};function te(s){he=Ca(he,s),xe.forEach(t=>{t(he)})}function Ta({...s}){const t=Sa(),a=o=>te({type:"UPDATE_TOAST",toast:{...o,id:t}}),n=()=>te({type:"DISMISS_TOAST",toastId:t});return te({type:"ADD_TOAST",toast:{...s,id:t,open:!0,onOpenChange:o=>{o||n()}}}),{id:t,dismiss:n,update:a}}function Z(){const[s,t]=r.useState(he);return r.useEffect(()=>(xe.push(t),()=>{const a=xe.indexOf(t);a>-1&&xe.splice(a,1)}),[s]),{...s,toast:Ta,dismiss:a=>te({type:"DISMISS_TOAST",toastId:a})}}function Pa({open:s,onOpenChange:t}){const[a,n]=r.useState("loading"),[o,x]=r.useState([]),[i,d]=r.useState([]),[c,p]=r.useState(null),[b,j]=r.useState(""),[k,R]=r.useState(0),[w,g]=r.useState([]),[l,v]=r.useState(null),[m,E]=r.useState(""),[h,u]=r.useState(""),[N,A]=r.useState(!1);r.useEffect(()=>{s?$():(n("loading"),d([]),p(null),v(null),u(""),A(!1),E(""),R(0),g([]))},[s]),r.useEffect(()=>{let f=null;return a==="running"&&c&&(f=setInterval(async()=>{try{const _=await fa(c);if(_.progress){const O=_.progress.message;j(O),R(_.progress.percent||0),g(C=>C.length===0||C[C.length-1]!==O?[...C,O]:C)}_.status==="completed"?(v(_.result),n("complete")):_.status==="failed"&&(E(_.error_message||"Unknown error"),n("failed"))}catch(_){console.error("Polling error:",_)}},1500)),()=>{f&&clearInterval(f)}},[a,c]);const $=async()=>{n("loading");try{const f=await ha();x(f.plugins),d(f.plugins.map(_=>_.file||_.slug||"").filter(Boolean)),n("select")}catch{E("Failed to load available updates"),n("error")}},U=f=>{d(_=>_.includes(f)?_.filter(O=>O!==f):[..._,f])},D=()=>{d(o.map(f=>f.file||f.slug||"").filter(Boolean))},y=()=>{d([])},F=async()=>{if(i.length!==0){n("running"),j("Creating test environment...");try{const f=await pa(i);p(f.session_id),j("Test session created, waiting for results...")}catch{E("Failed to start safe update test"),n("error")}}},M=f=>{switch(f){case"safe":return e.jsx(ue,{className:"h-4 w-4 text-emerald-500"});case"risky":return e.jsx(ye,{className:"h-4 w-4 text-yellow-500"});case"unsafe":return e.jsx(me,{className:"h-4 w-4 text-red-500"});default:return e.jsx(z,{className:"h-4 w-4 animate-spin text-muted-foreground"})}},T=f=>{switch(f){case"safe":return"bg-emerald-100 text-emerald-700";case"risky":return"bg-yellow-100 text-yellow-700";case"unsafe":return"bg-red-100 text-red-700";default:return"bg-slate-100 text-slate-700"}};return e.jsx(ae,{open:s,onOpenChange:t,children:e.jsxs(ne,{className:"sm:max-w-[550px] max-h-[85vh] overflow-y-auto",children:[e.jsxs(re,{children:[e.jsx(oe,{children:"Safe Update Tester"}),e.jsx(we,{children:"Test updates in a temporary sandbox before applying them to your live site."})]}),e.jsxs("div",{className:"py-4 space-y-4",children:[a==="loading"&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 gap-3",children:[e.jsx(z,{className:"h-8 w-8 animate-spin text-blue-500"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading available updates..."})]}),a==="select"&&e.jsx("div",{className:"space-y-4",children:o.length===0?e.jsxs("div",{className:"text-center py-8 space-y-4",children:[e.jsx("div",{className:"mx-auto w-12 h-12 bg-emerald-100 rounded-full flex items-center justify-center",children:e.jsx(ue,{className:"h-6 w-6 text-emerald-600"})}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"All plugins and themes are up to date!"}),e.jsx(S,{variant:"outline",onClick:()=>t(!1),children:"Close"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-medium",children:[o.length," update",o.length!==1?"s":""," available"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(S,{variant:"ghost",size:"sm",onClick:D,children:"Select All"}),e.jsx(S,{variant:"ghost",size:"sm",onClick:y,children:"Select None"})]})]}),e.jsx("div",{className:"border rounded-lg divide-y max-h-60 overflow-y-auto",children:o.map(f=>{const _=f.file||f.slug||"",O=i.includes(_);return e.jsxs("label",{className:`flex items-center gap-3 p-3 cursor-pointer hover:bg-slate-50 transition-colors ${O?"bg-blue-50/50":""}`,children:[e.jsx("input",{type:"checkbox",checked:O,onChange:()=>U(_),className:"rounded border-slate-300"}),e.jsx(ys,{className:"h-4 w-4 text-slate-400"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-sm truncate",children:f.name}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[f.current_version," → ",f.new_version]})]}),f.requires_php&&e.jsxs("span",{className:"text-[10px] bg-slate-100 px-1.5 py-0.5 rounded",children:["PHP ",f.requires_php,"+"]})]},_)})}),e.jsxs(S,{className:"w-full",disabled:i.length===0,onClick:F,children:[e.jsx(Ot,{className:"h-4 w-4 mr-2"}),"Test ",i.length," Update",i.length!==1?"s":""]})]})}),a==="running"&&e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"relative",children:e.jsx("div",{className:"h-16 w-16 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx(Ie,{className:"h-8 w-8 text-blue-600 animate-spin"})})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"font-semibold",children:"Running Safe Update Test"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:b||"Starting..."})]})]}),e.jsx("div",{className:"h-2 bg-slate-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-500 transition-all duration-500 ease-out",style:{width:`${k}%`}})}),e.jsxs("div",{className:"bg-slate-950 text-slate-50 p-3 rounded-md font-mono text-xs h-32 overflow-y-auto border border-slate-800",children:[w.map((f,_)=>{const O=_===w.length-1;return e.jsxs("div",{className:`flex items-start gap-1 ${O?"text-emerald-400":"text-slate-500"}`,children:[e.jsx("span",{className:"text-slate-600",children:">"}),e.jsx("span",{className:O?"animate-pulse":"",children:f}),O&&e.jsx("span",{className:"inline-block w-2 h-4 bg-emerald-400 animate-[blink_1s_infinite] ml-0.5"})]},_)}),w.length===0&&e.jsxs("div",{className:"flex items-center gap-1 text-emerald-400",children:[e.jsx("span",{className:"text-slate-600",children:">"}),e.jsx("span",{className:"animate-pulse",children:"Initializing..."}),e.jsx("span",{className:"inline-block w-2 h-4 bg-emerald-400 animate-[blink_1s_infinite] ml-0.5"})]})]}),e.jsxs("p",{className:"text-xs text-center text-muted-foreground",children:[k<50?"Downloading updates...":"Testing updates..."," Please don't close this window."]})]}),a==="complete"&&l&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:`px-3 py-1 rounded-full text-sm font-medium ${T(l.summary.overall_status)}`,children:[l.summary.overall_status==="safe"&&"✓ Safe to Update",l.summary.overall_status==="risky"&&"⚠ Proceed with Caution",l.summary.overall_status==="unsafe"&&"✗ Issues Detected"]})}),e.jsx("div",{className:"border rounded-lg divide-y",children:l.items.plugins.map(f=>e.jsxs("div",{className:"p-3 flex items-start gap-3",children:[M(f.status),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-sm",children:f.name}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[f.from_version," → ",f.to_version]}),f.issues.length>0&&e.jsx("div",{className:"mt-2 space-y-1",children:f.issues.map((_,O)=>e.jsx("div",{className:"text-xs bg-red-50 text-red-700 p-2 rounded",children:_.message},O))})]})]},f.slug))}),l.health_checks.length>0&&e.jsxs("div",{className:"border rounded-lg p-3",children:[e.jsx("div",{className:"text-sm font-medium mb-2",children:"Health Checks"}),e.jsx("div",{className:"space-y-1",children:l.health_checks.map((f,_)=>e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[f.status_code===200&&!f.wsod_detected?e.jsx(ue,{className:"h-3 w-3 text-emerald-500"}):e.jsx(me,{className:"h-3 w-3 text-red-500"}),e.jsx("span",{children:f.label}),e.jsxs("span",{className:"text-muted-foreground",children:["(",f.status_code,")"]})]},_))})]}),window.sbwpData.isPro&&c&&e.jsxs("div",{className:"border border-violet-200 rounded-lg p-3 bg-violet-50/50",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(is,{className:"h-4 w-4 text-violet-500"}),e.jsx("span",{className:"text-sm font-medium",children:"AI Explanation"})]}),h?e.jsx("p",{className:"text-sm text-slate-700",children:h}):e.jsx(S,{size:"sm",variant:"outline",className:"text-violet-600 border-violet-200 hover:bg-violet-100",onClick:async()=>{A(!0);try{const f=await wa(c);u(f.summary)}catch{u("Could not generate AI summary. Please check your API key in Settings.")}finally{A(!1)}},disabled:N,children:N?e.jsxs(e.Fragment,{children:[e.jsx(z,{className:"h-4 w-4 animate-spin mr-2"})," Generating..."]}):e.jsx(e.Fragment,{children:"Explain in Plain English"})})]}),e.jsxs("div",{className:"flex gap-2",children:[l.summary.overall_status==="safe"&&e.jsx(S,{className:"flex-1 bg-emerald-600 hover:bg-emerald-700",onClick:()=>window.location.href="/wp-admin/update-core.php",children:"Apply Updates"}),e.jsx(S,{variant:"outline",className:l.summary.overall_status==="safe"?"":"flex-1",onClick:()=>t(!1),children:"Close"})]})]}),(a==="failed"||a==="error")&&e.jsxs("div",{className:"text-center py-8 space-y-4",children:[e.jsx("div",{className:"mx-auto w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(me,{className:"h-6 w-6 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold",children:"Test Failed"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:m})]}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsx(S,{variant:"outline",onClick:$,children:"Try Again"}),e.jsx(S,{variant:"ghost",onClick:()=>t(!1),children:"Close"})]})]})]})]})})}const Ds=r.forwardRef(({className:s,...t},a)=>e.jsx("textarea",{className:L("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:a,...t}));Ds.displayName="Textarea";function Ea({open:s,onOpenChange:t}){var D;const[a,n]=r.useState("idle"),[o,x]=r.useState(""),[i,d]=r.useState({message:"",percent:0}),[c,p]=r.useState(null),[b,j]=r.useState(null),[k,R]=r.useState([]),[w,g]=r.useState(!1),[l,v]=r.useState(!1),m=r.useRef(null);r.useEffect(()=>(s&&window.sbwpData.isPro&&E(),()=>{m.current&&clearInterval(m.current)}),[s]);const E=async()=>{try{const F=await(await fetch(`${window.sbwpData.restUrl}/conflict-scan/check-outdated`,{headers:{"X-WP-Nonce":window.sbwpData.nonce}})).json();R(F.plugins||[]),F.count>0&&g(!0)}catch(y){console.error("Failed to check outdated plugins:",y)}},h=async()=>{n("scanning"),d({message:"Starting conflict scan...",percent:5}),p(null),j(null),g(!1);try{const F=await(await fetch(`${window.sbwpData.restUrl}/conflict-scan/start`,{method:"POST",headers:{"X-WP-Nonce":window.sbwpData.nonce,"Content-Type":"application/json"},body:JSON.stringify({user_context:o})})).json();if(!F.session_id)throw new Error("Failed to start scan");u(F.session_id)}catch(y){console.error("Scan start error:",y),n("idle")}},u=y=>{m.current=setInterval(async()=>{try{const M=await(await fetch(`${window.sbwpData.restUrl}/conflict-scan/session/${y}`,{headers:{"X-WP-Nonce":window.sbwpData.nonce}})).json();M.progress&&d({message:M.progress.message||"Scanning...",percent:M.progress.percent||0}),M.status==="completed"?(clearInterval(m.current),N(M.result)):M.status==="failed"&&(clearInterval(m.current),n("idle"),console.error("Scan failed:",M.error_message))}catch(F){console.error("Poll error:",F)}},1500)},N=y=>{p(y),y.culprit?y.culprit.type==="core_or_server"?n("core_issue"):n("found"):y.multi_plugin_conflict?n("found"):n("clean")},A=async()=>{if(c)try{const M=(await(await fetch(`${window.sbwpData.restUrl}/conflict-scan/sessions`,{headers:{"X-WP-Nonce":window.sbwpData.nonce}})).json())[0];if(!M)return;const f=await(await fetch(`${window.sbwpData.restUrl}/conflict-scan/generate-email/${M.id}`,{method:"POST",headers:{"X-WP-Nonce":window.sbwpData.nonce}})).json();f.subject&&f.body&&(j(f),n("email_ready"))}catch(y){console.error("Email generation error:",y)}},$=()=>{if(!b)return;const y=`Subject: ${b.subject}

${b.body}`;navigator.clipboard.writeText(y),v(!0),setTimeout(()=>v(!1),2e3)},U=()=>{n("idle"),x(""),d({message:"",percent:0}),p(null),j(null),g(!1)};return e.jsx(ae,{open:s,onOpenChange:y=>{y||U(),t(y)},children:e.jsxs(ne,{className:"sm:max-w-[550px]",children:[e.jsxs(re,{children:[e.jsx(oe,{children:"AI Conflict Scanner"}),e.jsx(we,{children:"Automatically identify which plugin is causing issues on your site."})]}),e.jsxs("div",{className:"py-4 space-y-4",children:[a==="idle"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center",children:e.jsx(Pt,{className:"h-8 w-8 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Describe the issue you're experiencing (optional):"}),e.jsx(Ds,{placeholder:"e.g., When I try to edit block settings, the page crashes with a white screen...",value:o,onChange:y=>x(y.target.value),rows:3})]}),w&&k.length>0&&e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Xe,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-yellow-800",children:[k.length," plugin",k.length>1?"s have":" has"," updates available"]}),e.jsx("p",{className:"text-xs text-yellow-700 mt-1",children:"Consider updating before scanning. Outdated plugins often cause conflicts."})]})]})}),e.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"This runs in a sandbox—your live site won't be affected."}),e.jsx(S,{size:"lg",onClick:h,className:"w-full bg-orange-600 hover:bg-orange-700",children:"Start Conflict Scan"})]}),a==="scanning"&&e.jsxs("div",{className:"space-y-4 text-center py-4",children:[e.jsx(z,{className:"h-12 w-12 animate-spin text-orange-500 mx-auto"}),e.jsx("h3",{className:"font-semibold text-lg",children:"Scanning..."}),e.jsx("p",{className:"text-sm text-muted-foreground",children:i.message}),e.jsx("div",{className:"h-2 bg-slate-100 rounded-full overflow-hidden w-full",children:e.jsx("div",{className:"h-full bg-orange-500 transition-all duration-300",style:{width:`${i.percent}%`}})})]}),a==="found"&&c&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 text-red-800 mb-3",children:[e.jsx(ye,{className:"h-6 w-6"}),e.jsx("h3",{className:"font-bold text-lg",children:"Conflict Detected"})]}),c.culprit&&e.jsxs("div",{className:"bg-white p-3 rounded border border-red-100 mb-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"font-semibold",children:c.culprit.name}),c.culprit.is_outdated&&e.jsx("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full",children:"Outdated"})]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Version ",c.culprit.version,c.culprit.is_outdated&&` → ${c.culprit.latest_version} available`]})]}),c.theme_conflict&&e.jsx("p",{className:"text-sm text-red-700 mb-2",children:"⚠️ This conflict only occurs with your current theme."}),c.ai_analysis&&e.jsxs("div",{className:"text-sm space-y-2",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Diagnosis:"})," ",c.ai_analysis.diagnosis]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Recommendation:"})," ",c.ai_analysis.recommendation]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(S,{variant:"outline",className:"flex-1",onClick:A,children:[e.jsx(Ge,{className:"h-4 w-4 mr-2"}),"Generate Developer Email"]}),e.jsx(S,{variant:"outline",onClick:()=>t(!1),children:"Close"})]})]}),a==="core_issue"&&c&&e.jsxs("div",{className:"space-y-4 text-center",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(Xe,{className:"h-8 w-8 text-blue-600"})}),e.jsx("h3",{className:"font-bold text-lg",children:"Not a Plugin Conflict"}),e.jsx("p",{className:"text-muted-foreground",children:"The issue persists even with all plugins disabled. This suggests a server configuration, WordPress core, or theme issue."}),c.ai_analysis&&e.jsx("p",{className:"text-sm",children:c.ai_analysis.recommendation}),e.jsx(S,{variant:"outline",onClick:()=>t(!1),children:"Close"})]}),a==="clean"&&e.jsxs("div",{className:"text-center space-y-4 py-4",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-emerald-100 rounded-full flex items-center justify-center",children:e.jsx(ue,{className:"h-8 w-8 text-emerald-600"})}),e.jsx("h3",{className:"font-bold text-lg",children:"No Conflicts Found"}),e.jsxs("p",{className:"text-muted-foreground",children:["All ",((D=c==null?void 0:c.environment)==null?void 0:D.active_plugins_count)||0," plugins tested successfully."]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"If you're still experiencing issues, they may be caused by your theme, server configuration, or browser."}),e.jsx(S,{variant:"outline",onClick:()=>t(!1),children:"Close"})]}),a==="email_ready"&&b&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-emerald-700",children:[e.jsx(Ge,{className:"h-5 w-5"}),e.jsx("h3",{className:"font-semibold",children:"Developer Email Ready"})]}),e.jsxs("div",{className:"bg-slate-50 border rounded-lg p-3 space-y-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Subject:"}),e.jsx("p",{className:"text-sm font-medium",children:b.subject})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Body:"}),e.jsx("pre",{className:"text-sm whitespace-pre-wrap max-h-48 overflow-y-auto",children:b.body})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(S,{onClick:$,className:"flex-1",children:[e.jsx(hs,{className:"h-4 w-4 mr-2"}),l?"Copied!":"Copy to Clipboard"]}),e.jsx(S,{variant:"outline",onClick:()=>n("found"),children:"Back"})]})]})]})]})})}const _s=r.forwardRef(({className:s,...t},a)=>e.jsx("div",{className:"w-full overflow-auto",children:e.jsx("table",{ref:a,className:L("w-full caption-bottom text-sm",s),...t})}));_s.displayName="Table";const Rs=r.forwardRef(({className:s,...t},a)=>e.jsx("thead",{ref:a,className:L("[&_tr]:border-b",s),...t}));Rs.displayName="TableHeader";const Is=r.forwardRef(({className:s,...t},a)=>e.jsx("tbody",{ref:a,className:L("[&_tr:last-child]:border-0",s),...t}));Is.displayName="TableBody";const Da=r.forwardRef(({className:s,...t},a)=>e.jsx("tfoot",{ref:a,className:L("bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...t}));Da.displayName="TableFooter";const Pe=r.forwardRef(({className:s,...t},a)=>e.jsx("tr",{ref:a,className:L("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...t}));Pe.displayName="TableRow";const ee=r.forwardRef(({className:s,...t},a)=>e.jsx("th",{ref:a,className:L("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...t}));ee.displayName="TableHead";const se=r.forwardRef(({className:s,...t},a)=>e.jsx("td",{ref:a,className:L("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...t}));se.displayName="TableCell";const _a=r.forwardRef(({className:s,...t},a)=>e.jsx("caption",{ref:a,className:L("mt-4 text-sm text-muted-foreground",s),...t}));_a.displayName="TableCaption";function Ra(s){const t=typeof s=="string"?parseInt(s):s;if(t===0)return"0 Bytes";const a=1024,n=["Bytes","KB","MB","GB","TB"],o=Math.floor(Math.log(t)/Math.log(a));return parseFloat((t/Math.pow(a,o)).toFixed(2))+" "+n[o]}function Ia({backup:s,open:t,onOpenChange:a,onComplete:n}){const[o,x]=r.useState("initial"),[i,d]=r.useState("full"),[c,p]=r.useState(!1),[b,j]=r.useState(null),[k,R]=r.useState([]),[w,g]=r.useState([]),{toast:l}=Z();r.useEffect(()=>{t&&(x("initial"),d("full"),p(!1),j(null),R([]),g([]))},[t]);const v=async()=>{if(s){p(!0);try{const u=await ia(s.id);j(u),x("select")}catch{l({title:"Error",description:"Failed to load backup contents.",variant:"destructive"})}finally{p(!1)}}},m=async()=>{if(s){x("restoring");try{i==="full"?await Qe(s.id):await Qe(s.id,{plugins:k,themes:w}),l({title:"Restore Complete",description:"The backup has been restored successfully."}),n(),a(!1),setTimeout(()=>window.location.reload(),1500)}catch(u){x("initial"),l({title:"Restore Failed",description:u.message||"An error occurred during restore.",variant:"destructive"})}}},E=u=>{R(N=>N.includes(u)?N.filter(A=>A!==u):[...N,u])},h=u=>{g(N=>N.includes(u)?N.filter(A=>A!==u):[...N,u])};return s?e.jsx(ae,{open:t,onOpenChange:u=>!c&&a(u),children:e.jsxs(ne,{className:"sm:max-w-2xl",children:[e.jsxs(re,{children:[e.jsx(oe,{children:"Restore Backup"}),e.jsxs(we,{children:["Created on ",s.created_at," • ",Ra(s.size_bytes)]})]}),o==="initial"&&e.jsxs("div",{className:"grid gap-6 py-4",children:[e.jsxs("div",{className:"rounded-lg border border-red-500/50 bg-red-500/10 p-4 text-red-900 dark:text-red-100 flex gap-3",children:[e.jsx(ye,{className:"h-5 w-5 text-red-600 dark:text-red-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium mb-1",children:"Warning"}),e.jsx("div",{className:"text-sm opacity-90",children:"Restoring will overwrite existing files and database. This action cannot be undone."})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:`border-2 rounded-lg p-4 cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-900 transition-colors ${i==="full"?"border-primary bg-slate-50 dark:bg-slate-900":"border-muted"}`,onClick:()=>d("full"),children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Te,{className:"h-5 w-5 text-emerald-500"}),e.jsx("h3",{className:"font-semibold",children:"Full Restore"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Restore everything: Files, Database, Plugins, and Themes."})]}),e.jsxs("div",{className:`border-2 rounded-lg p-4 cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-900 transition-colors ${i==="partial"?"border-primary bg-slate-50 dark:bg-slate-900":"border-muted"}`,onClick:()=>d("partial"),children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ys,{className:"h-5 w-5 text-blue-500"}),e.jsx("h3",{className:"font-semibold",children:"Partial Restore"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Select specific Plugins or Themes to restore. Database is NOT restored."})]})]})]}),o==="select"&&b&&e.jsxs("div",{className:"py-4",children:[e.jsxs(ot,{defaultValue:"plugins",children:[e.jsxs(it,{children:[e.jsxs(Ue,{value:"plugins",children:["Plugins (",b.plugins.length,")"]}),e.jsxs(Ue,{value:"themes",children:["Themes (",b.themes.length,")"]})]}),e.jsx(We,{value:"plugins",className:"mt-4 max-h-[300px] overflow-y-auto border rounded-md p-2",children:b.plugins.length===0?e.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"No plugins found in backup."}):e.jsx("div",{className:"space-y-2",children:b.plugins.map(u=>e.jsxs("div",{className:"flex items-center space-x-2 p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded",children:[e.jsx("input",{type:"checkbox",id:`plugin-${u}`,checked:k.includes(u),onChange:()=>E(u),className:"h-4 w-4 rounded border-gray-300"}),e.jsx(W,{htmlFor:`plugin-${u}`,className:"flex-1 cursor-pointer font-medium",children:u})]},u))})}),e.jsx(We,{value:"themes",className:"mt-4 max-h-[300px] overflow-y-auto border rounded-md p-2",children:b.themes.length===0?e.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"No themes found in backup."}):e.jsx("div",{className:"space-y-2",children:b.themes.map(u=>e.jsxs("div",{className:"flex items-center space-x-2 p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded",children:[e.jsx("input",{type:"checkbox",id:`theme-${u}`,checked:w.includes(u),onChange:()=>h(u),className:"h-4 w-4 rounded border-gray-300"}),e.jsx(W,{htmlFor:`theme-${u}`,className:"flex-1 cursor-pointer font-medium",children:u})]},u))})})]}),e.jsx("div",{className:"flex justify-between items-center mt-4 text-sm text-muted-foreground",children:e.jsxs("span",{children:["Selected: ",k.length," plugins, ",w.length," themes"]})})]}),o==="restoring"&&e.jsxs("div",{className:"py-8 text-center",children:[e.jsx(z,{className:"h-12 w-12 animate-spin text-primary mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Restoring Backup..."}),e.jsxs("p",{className:"text-muted-foreground max-w-sm mx-auto",children:["Please wait while we restore your ",i==="full"?"site":"items",". Do not close this window."]})]}),e.jsxs(lt,{children:[o==="initial"&&e.jsxs(e.Fragment,{children:[e.jsx(S,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),e.jsxs(S,{onClick:()=>i==="full"?m():v(),disabled:c,children:[c&&e.jsx(z,{className:"mr-2 h-4 w-4 animate-spin"}),i==="full"?"Start Restore":"Next Step"]})]}),o==="select"&&e.jsxs(e.Fragment,{children:[e.jsx(S,{variant:"outline",onClick:()=>x("initial"),children:"Back"}),e.jsxs(S,{onClick:m,disabled:k.length===0&&w.length===0,children:["Start Restore (",k.length+w.length," items)"]})]})]})]})}):null}function Aa(s){if(s===0)return"0 B";const t=1024,a=["B","KB","MB","GB"],n=Math.floor(Math.log(s)/Math.log(t));return parseFloat((s/Math.pow(t,n)).toFixed(1))+" "+a[n]}function Fa(s){return s.type==="folder"?e.jsx(Ft,{className:"h-4 w-4 text-yellow-500"}):s.category==="database"||s.name.endsWith(".sql")?e.jsx(ps,{className:"h-4 w-4 text-blue-500"}):s.name.endsWith(".php")?e.jsx(be,{className:"h-4 w-4 text-purple-500"}):s.name.endsWith(".js")||s.name.endsWith(".ts")?e.jsx(be,{className:"h-4 w-4 text-yellow-600"}):s.name.endsWith(".css")?e.jsx(be,{className:"h-4 w-4 text-blue-400"}):s.name.endsWith(".json")||s.name.endsWith(".txt")||s.name.endsWith(".md")?e.jsx(It,{className:"h-4 w-4 text-gray-500"}):e.jsx(gs,{className:"h-4 w-4 text-gray-400"})}function Ma({backup:s,open:t,onOpenChange:a}){const[n,o]=r.useState([]),[x,i]=r.useState(!1),[d,c]=r.useState(null),[p,b]=r.useState(new Set),{toast:j}=Z();r.useEffect(()=>{t&&s&&k()},[t,s]);const k=async()=>{if(s){i(!0);try{const l=await ra(s.id);o(l.files);const v=new Set;l.files.forEach(m=>{m.depth===0&&m.type==="folder"&&v.add(m.path)}),b(v)}catch(l){console.error(l),j({title:"Error",description:"Failed to load backup files",variant:"destructive"})}finally{i(!1)}}},R=async l=>{if(s){c(l);try{const v=await oa(s.id,l),m=document.createElement("a");m.href=v.download_url,m.download=v.filename,document.body.appendChild(m),m.click(),document.body.removeChild(m),j({title:"Download Started",description:v.filename})}catch(v){console.error(v),j({title:"Error",description:"Failed to download file",variant:"destructive"})}finally{c(null)}}},w=l=>{const v=new Set(p);v.has(l)?v.delete(l):v.add(l),b(v)},g=l=>{if(l.depth===0)return!0;const v=l.path.split("/").filter(Boolean);for(let m=0;m<v.length-1;m++){const E="/"+v.slice(0,m+1).join("/");if(!p.has(E))return!1}return!0};return e.jsx(ae,{open:t,onOpenChange:a,children:e.jsxs(ne,{className:"max-w-2xl max-h-[80vh] flex flex-col",children:[e.jsx(re,{children:e.jsx(oe,{children:"Browse Backup"})}),e.jsx("div",{className:"flex justify-end mb-2",children:e.jsxs(S,{size:"sm",onClick:()=>R("/"),disabled:d==="/",children:[d==="/"?e.jsx(z,{className:"h-4 w-4 animate-spin mr-2"}):e.jsx(qe,{className:"h-4 w-4 mr-2"}),"Download All"]})}),x?e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsx(z,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):e.jsx(ct,{className:"h-[400px] border rounded-lg",children:e.jsxs("div",{className:"p-2",children:[n.filter(g).map(l=>e.jsxs("div",{className:"flex items-center gap-2 py-1.5 px-2 hover:bg-muted/50 rounded group",style:{paddingLeft:`${l.depth*20+8}px`},children:[l.type==="folder"&&l.hasChildren?e.jsx("button",{onClick:()=>w(l.path),className:"p-0.5 hover:bg-muted rounded",children:p.has(l.path)?e.jsx(Ae,{className:"h-3 w-3 text-muted-foreground"}):e.jsx(ms,{className:"h-3 w-3 text-muted-foreground"})}):e.jsx("div",{className:"w-4"}),Fa(l),e.jsx("span",{className:"flex-1 text-sm truncate",children:l.name}),l.type==="file"&&e.jsx("span",{className:"text-xs text-muted-foreground",children:Aa(l.size)}),e.jsx(S,{variant:"ghost",size:"icon",className:"h-6 w-6 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>R(l.path),disabled:d===l.path,children:d===l.path?e.jsx(z,{className:"h-3 w-3 animate-spin"}):e.jsx(qe,{className:"h-3 w-3"})})]},l.path)),n.length===0&&e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(gs,{className:"h-8 w-8 mx-auto mb-2 opacity-30"}),e.jsx("p",{children:"No files found in this backup"})]})]})})]})})}function $a(s){return s?new Date(s).toLocaleString():"Unknown"}function Oa(s){const t=typeof s=="string"?parseInt(s):s;if(t===0)return"0 Bytes";const a=1024,n=["Bytes","KB","MB","GB","TB"],o=Math.floor(Math.log(t)/Math.log(a));return parseFloat((t/Math.pow(a,o)).toFixed(2))+" "+n[o]}function Ba({refreshTrigger:s}){const[t,a]=r.useState([]),[n,o]=r.useState(!0),[x,i]=r.useState(null),[d,c]=r.useState(null),[p,b]=r.useState(!1),[j,k]=r.useState(!1),{toast:R}=Z(),w=async()=>{o(!0);try{const m=await aa();console.log("SBWP: Backups loaded:",m),a(m)}catch(m){console.error(m)}finally{o(!1)}};r.useEffect(()=>{w()},[s]);const g=async m=>{if(confirm("Permanently delete this backup?")){i(m);try{await na(m.toString()),R({title:"Backup Deleted",description:"The backup has been removed."}),w()}catch{R({title:"Error",description:"Failed to delete backup.",variant:"destructive"})}finally{i(null)}}},l=m=>{c(m),b(!0)},v=m=>{c(m),k(!0)};return e.jsxs(e.Fragment,{children:[e.jsx(Ia,{backup:d,open:p,onOpenChange:b,onComplete:w}),e.jsx(Ma,{backup:d,open:j,onOpenChange:k}),e.jsxs(V,{className:"col-span-3",children:[e.jsxs(H,{children:[e.jsx(q,{children:"Existing Backups"}),e.jsx(J,{children:"Manage your local backup points."})]}),e.jsx(K,{children:n?e.jsx("div",{className:"flex justify-center p-4",children:e.jsx(z,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):t.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground bg-muted/20 rounded-lg",children:[e.jsx(ws,{className:"h-8 w-8 mx-auto mb-2 opacity-20"}),e.jsx("p",{children:"No backups found."})]}):e.jsx("div",{className:"rounded-md border",children:e.jsxs(_s,{children:[e.jsx(Rs,{children:e.jsxs(Pe,{children:[e.jsx(ee,{children:"Date"}),e.jsx(ee,{children:"Type"}),e.jsx(ee,{children:"Size"}),e.jsx(ee,{className:"text-right",children:"Actions"})]})}),e.jsx(Is,{children:t.map(m=>e.jsxs(Pe,{children:[e.jsx(se,{className:"font-medium",children:$a(m.created_at)}),e.jsx(se,{className:"capitalize",children:e.jsxs("span",{className:"flex items-center gap-1",children:[m.type,Number(m.is_locked)===1?e.jsx("span",{title:"Locked - required for incremental restores",children:e.jsx($t,{className:"h-3 w-3 text-orange-500"})}):null]})}),e.jsx(se,{children:Oa(m.size_bytes)}),e.jsxs(se,{className:"text-right",children:[e.jsx(S,{variant:"ghost",size:"icon",onClick:()=>v(m),title:"Browse Files",children:e.jsx(At,{className:"h-4 w-4 text-yellow-600 hover:text-yellow-700"})}),e.jsx(S,{variant:"ghost",size:"icon",onClick:()=>l(m),title:"Restore",children:e.jsx(Bt,{className:"h-4 w-4 text-blue-500 hover:text-blue-700"})}),e.jsx(S,{variant:"ghost",size:"icon",disabled:x===m.id||Number(m.is_locked)===1,onClick:()=>g(m.id),title:Number(m.is_locked)===1?"Locked - required for incremental restores":"Delete",children:x===m.id?e.jsx(z,{className:"h-4 w-4 animate-spin"}):e.jsx(js,{className:`h-4 w-4 ${Number(m.is_locked)===1?"text-gray-300":"text-red-500 hover:text-red-700"}`})})]})]},m.id))})]})})})]})]})}function La({onNavigate:s}){const[t,a]=r.useState(null),[n,o]=r.useState(!0),[x,i]=r.useState(!1),[d,c]=r.useState(!1),[p,b]=r.useState(!1),[j,k]=r.useState(0),[R,w]=r.useState(0),[g,l]=r.useState(""),[v,m]=r.useState(null),[E,h]=r.useState(!0),[u,N]=r.useState(!1),[A,$]=r.useState(!1),[U,D]=r.useState(!1),[y,F]=r.useState(null),{toast:M}=Z(),T=async()=>{try{const C=await ta();a(C)}catch(C){console.error("Failed to load stats",C)}finally{o(!1)}};r.useEffect(()=>{T(),ba().then(m).catch(console.error),Ps().then(C=>h(C.incremental_enabled??!0)).catch(console.error)},[]);const f=async()=>{let C="full";U?C="db_only":E&&!A&&(C="incremental");const B=Date.now().toString();F(B),i(!0),w(1),l("Initializing backup process...");try{const I=await xa(C,!1,B);if(I.code)throw new Error(I.message);M({title:"Backup Started",description:"Your backup is running in the background. You can leave this page."})}catch(I){console.error(I),i(!1),F(null),M({title:"Backup Failed to Start",description:I.message||"Could not initiate backup.",variant:"destructive"})}finally{$(!1),D(!1)}};r.useEffect(()=>{let C;const B=async()=>{try{const I=await la();if(y){if(I.session_id&&I.session_id!==y)return}else if(I.active&&I.percent>0&&I.percent<100){F(I.session_id||"legacy"),i(!0),w(I.percent),I.message&&l(I.message);return}else return;if(!I.active&&I.percent>=100){i(!1),F(null),w(100),l("Backup Complete"),await T(),k(Q=>Q+1),C&&clearInterval(C),M({title:"Backup Complete",description:"Background backup finished successfully."});return}I.active&&(I.percent>R&&w(I.percent),I.message&&l(I.message),(I.percent>=100||I.message&&I.message.includes("Complete"))&&(i(!1),F(null),w(100),l("Backup Complete"),await T(),k(Q=>Q+1),C&&clearInterval(C),M({title:"Backup Complete",description:"Background backup finished successfully."})))}catch(I){console.error("Backup progress poll error",I)}};return B(),C=setInterval(B,2e3),()=>{C&&clearInterval(C)}},[x,y,R]);const _=async C=>{console.log("SBWP: Toggling incremental to:",C),h(C);try{const B=await Es({retention_limit:5,incremental_enabled:C});console.log("SBWP: Settings saved, result:",B),k(I=>I+1)}catch(B){console.error("SBWP: Failed to save incremental setting:",(B==null?void 0:B.message)||B),M({title:"Error",description:(B==null?void 0:B.message)||"Failed to save setting",variant:"destructive"}),h(!C)}},O=async()=>{try{await ca(),i(!1),w(0),l("IDLE"),k(C=>C+1),M({title:"Backup Cancelled",description:"The backup process was stopped."})}catch(C){console.error("Cancel failed",C),M({title:"Error",description:"Failed to stop backup",variant:"destructive"})}};return n?e.jsx("div",{className:"p-8 flex justify-center",children:e.jsx(z,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx(Pa,{open:d,onOpenChange:c}),e.jsx(Ea,{open:p,onOpenChange:b}),(v==null?void 0:v.has_crash)&&e.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-red-500/20 p-2 rounded-full",children:e.jsx(ye,{className:"h-5 w-5 text-red-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-red-800 dark:text-red-200",children:"Site Issues Detected"}),e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 truncate max-w-lg",children:"Recent errors found in debug.log"})]})]}),e.jsxs(S,{variant:"destructive",size:"sm",onClick:()=>window.open(v.recovery_url,"_blank"),children:[e.jsx(fs,{className:"h-4 w-4 mr-2"}),"Open Recovery Portal"]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(V,{children:[e.jsxs(H,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(q,{className:"text-sm font-medium",children:"Last Backup"}),e.jsx(Te,{className:"h-4 w-4 text-emerald-500"})]}),e.jsxs(K,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(t==null?void 0:t.last_backup)||"Never"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[(t==null?void 0:t.count)||0," total backups"]})]})]}),e.jsxs(V,{children:[e.jsxs(H,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(q,{className:"text-sm font-medium",children:"Storage Usage"}),e.jsx(ws,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(K,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(t==null?void 0:t.total_size)||"0 B"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Local storage used"})]})]}),e.jsxs(V,{className:"lg:col-span-2",children:[e.jsxs(H,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(q,{className:"text-sm font-medium",children:x?"Backing up...":"Backup"}),e.jsx(Ie,{className:`h-4 w-4 text-muted-foreground ${x?"animate-spin":""}`})]}),e.jsx(K,{className:"space-y-3",children:x?e.jsxs("div",{className:"relative overflow-hidden rounded-md bg-zinc-950 p-4 border border-zinc-800 shadow-inner",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-[1px] bg-gradient-to-r from-transparent via-zinc-500 to-transparent opacity-50"}),e.jsxs("div",{className:"space-y-4 relative z-10",children:[e.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-zinc-800",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500 animate-pulse"}),e.jsx("span",{className:"text-xs font-mono text-zinc-300 uppercase tracking-wider",children:"Processing Backup"}),e.jsx("button",{onClick:O,className:"ml-2 text-zinc-600 hover:text-red-400 transition-colors",title:"Stop Backup",children:e.jsx(me,{className:"w-4 h-4"})})]}),e.jsxs("span",{className:"text-xs font-mono text-emerald-500 font-bold",children:[R,"%"]})]}),e.jsxs("div",{className:"space-y-1 py-1",children:[e.jsxs("div",{className:"font-mono text-[10px] text-zinc-400 flex gap-2",children:[e.jsx("span",{className:"text-emerald-500",children:"➜"}),e.jsxs("span",{children:["Task: ",g.split("(")[0]]})]}),e.jsxs("div",{className:"font-mono text-[10px] text-zinc-300 flex gap-2 truncate",children:[e.jsx("span",{className:"text-blue-400",children:"ℹ"}),e.jsx("span",{className:"opacity-90 break-all",children:g})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(Ts,{value:R,className:"h-1 bg-zinc-800",indicatorClassName:"bg-gradient-to-r from-emerald-600 to-emerald-400"}),e.jsxs("div",{className:"flex justify-between text-[9px] text-zinc-600 uppercase font-mono",children:[e.jsx("span",{children:"Start"}),e.jsx("span",{children:"End"})]})]}),e.jsxs("div",{className:"text-[10px] text-zinc-700 font-mono mt-2 bg-zinc-900/50 p-1 rounded border border-zinc-800 break-all",children:["RAW: ",JSON.stringify({p:R,m:g})]})]}),e.jsx("div",{className:"absolute -bottom-4 -right-4 text-zinc-800 opacity-20",children:e.jsx(Te,{className:"w-24 h-24"})})]}):e.jsxs(e.Fragment,{children:[e.jsxs(S,{size:"lg",onClick:f,className:"w-full",children:[e.jsx(He,{className:"h-4 w-4 mr-2"}),"Backup Now"]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Kt,{className:"h-4 w-4 text-yellow-500"}),e.jsxs("div",{children:[e.jsx(W,{htmlFor:"incremental",className:"text-sm font-medium cursor-pointer",children:"Smart Incremental"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Only backup changed files"})]})]}),e.jsx(de,{id:"incremental",checked:E,onCheckedChange:_})]}),e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>N(!u),className:"flex items-center gap-1 text-xs text-muted-foreground hover:text-foreground transition-colors w-full justify-center py-1",children:[u?e.jsx(Rt,{className:"h-3 w-3"}):e.jsx(Ae,{className:"h-3 w-3"}),u?"Less options":"More options"]}),u&&e.jsxs("div",{className:"mt-2 space-y-2 p-3 border rounded-lg bg-background",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(He,{className:"h-3 w-3 text-muted-foreground"}),e.jsx("span",{className:"text-xs",children:"Force full backup"})]}),e.jsx(de,{checked:A,onCheckedChange:C=>{$(C),C&&D(!1)},disabled:!E})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ps,{className:"h-3 w-3 text-muted-foreground"}),e.jsx("span",{className:"text-xs",children:"Database only"})]}),e.jsx(de,{checked:U,onCheckedChange:C=>{D(C),C&&$(!1)}})]})]})]})]})})]}),e.jsx(V,{className:"lg:col-span-4 md:col-span-2",children:e.jsx(K,{className:"p-0",children:e.jsxs("div",{className:"grid md:grid-cols-2 divide-y md:divide-y-0 md:divide-x",children:[e.jsxs("div",{className:"p-4 flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ct,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Safe Update"})]}),window.sbwpData.isPro&&e.jsx("span",{className:"text-[10px] bg-blue-500/20 text-blue-600 px-2 py-0.5 rounded-full font-bold",children:"PRO"})]}),e.jsx("p",{className:"text-xs text-muted-foreground flex-1",children:"Test updates safely in a sandbox before applying to production."}),e.jsx(S,{size:"sm",className:"mt-3 w-full bg-blue-600 hover:bg-blue-500 text-white",onClick:()=>{window.sbwpData.isPro?c(!0):window.location.href="/wp-admin/update-core.php"},children:window.sbwpData.isPro?"Test Updates":"Go to Updates"})]}),e.jsxs("div",{className:"p-4 flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(zt,{className:"h-4 w-4 text-orange-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Conflict Scanner"})]}),window.sbwpData.isPro&&e.jsx("span",{className:"text-[10px] bg-orange-500/20 text-orange-500 px-2 py-0.5 rounded-full font-bold",children:"PRO"})]}),e.jsx("p",{className:"text-xs text-muted-foreground flex-1",children:"Find buggy plugins auto-magically."}),e.jsx(S,{size:"sm",variant:"outline",className:"mt-3 w-full",onClick:()=>window.sbwpData.isPro&&b(!0),children:window.sbwpData.isPro?"Start Scan":"Get Pro"})]})]})})})]}),e.jsx(Ba,{refreshTrigger:j})]})}const X=r.forwardRef(({className:s,type:t,...a},n)=>e.jsx("input",{type:t,className:L("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",s),ref:n,...a}));X.displayName="Input";var za=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ua=za.reduce((s,t)=>{const a=Re(`Primitive.${t}`),n=r.forwardRef((o,x)=>{const{asChild:i,...d}=o,c=i?a:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(c,{...d,ref:x})});return n.displayName=`Primitive.${t}`,{...s,[t]:n}},{}),Wa="Separator",ts="horizontal",Va=["horizontal","vertical"],As=r.forwardRef((s,t)=>{const{decorative:a,orientation:n=ts,...o}=s,x=Ka(n)?n:ts,d=a?{role:"none"}:{"aria-orientation":x==="vertical"?x:void 0,role:"separator"};return e.jsx(Ua.div,{"data-orientation":x,...d,...o,ref:t})});As.displayName=Wa;function Ka(s){return Va.includes(s)}var Fs=As;const pe=r.forwardRef(({className:s,orientation:t="horizontal",decorative:a=!0,...n},o)=>e.jsx(Fs,{ref:o,decorative:a,orientation:t,className:L("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",s),...n}));pe.displayName=Fs.displayName;function Xa({open:s,onOpenChange:t}){const[a,n]=r.useState([]),[o,x]=r.useState(!1),[i,d]=r.useState(null),[c,p]=r.useState(null),[b,j]=r.useState(""),[k,R]=r.useState(""),[w,g]=r.useState({accessKey:"",secretKey:"",region:"",bucket:"",endpoint:""}),[l,v]=r.useState(5),m=()=>{x(!0),Promise.all([da(),ua()]).then(([h,u])=>{n(h),u.retention_count&&v(u.retention_count)}).catch(console.error).finally(()=>x(!1))};r.useEffect(()=>{s&&m()},[s]);const E=async h=>{d(h);try{await Ne(h,"disconnect"),m()}catch(u){console.error(u)}finally{d(null)}};return e.jsx(ae,{open:s,onOpenChange:t,children:e.jsxs(ne,{className:"sm:max-w-[500px]",children:[e.jsxs(re,{children:[e.jsx(oe,{children:"Cloud Storage Settings"}),e.jsx(we,{children:"Connect Google Drive to enable automatic off-site backups."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg bg-slate-50 dark:bg-slate-900/50",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(W,{className:"text-sm font-medium",children:"Retention Limit"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Number of backups to keep per provider."})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(X,{type:"number",min:"1",max:"100",className:"w-20 text-right h-8",value:l,onChange:h=>{v(parseInt(h.target.value)||5)},onBlur:()=>ma({retention_count:l})})})]}),o&&a.length===0?e.jsx("div",{className:"flex justify-center p-4",children:e.jsx(z,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):e.jsxs("div",{className:"space-y-4",children:[a.length===0&&e.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"No providers available."}),a.map(h=>{var u;return e.jsxs("div",{className:"rounded-lg border p-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-slate-100 dark:bg-slate-800",children:e.jsx(xs,{className:"h-5 w-5 text-slate-500"})}),e.jsxs("div",{className:"grid gap-0.5",children:[e.jsx("div",{className:"font-medium text-sm",children:h.name}),e.jsx("div",{className:"text-[10px] text-muted-foreground uppercase flex items-center gap-1",children:h.connected?e.jsxs("span",{className:"text-emerald-600 flex items-center gap-1",children:["Connected ",((u=h.user_info)==null?void 0:u.email)&&`as ${h.user_info.email}`]}):"Not Connected"})]})]}),h.connected?e.jsx(S,{size:"sm",variant:"outline",onClick:()=>E(h.id),disabled:i===h.id,className:"text-red-500 hover:text-red-700 hover:bg-red-50",children:i===h.id?e.jsx(z,{className:"h-4 w-4 animate-spin"}):"Disconnect"}):e.jsxs(S,{size:"sm",variant:"ghost",onClick:()=>p(c===h.id?null:h.id),children:[c===h.id?"Cancel":"Setup",c===h.id?e.jsx(Ae,{className:"ml-2 h-4 w-4"}):e.jsx(ms,{className:"ml-2 h-4 w-4"})]})]}),c===h.id&&h.id==="gdrive"&&!h.connected&&e.jsxs("div",{className:"mt-4 pt-4 border-t space-y-4 animate-in slide-in-from-top-2 fade-in duration-200",children:[h.global_creds?e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"rounded-md bg-emerald-50 dark:bg-emerald-900/20 p-3 text-xs text-emerald-800 dark:text-emerald-200 flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"font-semibold",children:"✓ Ready to Connect"}),e.jsx("span",{children:"(Secure configuration active)"})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Click below to authorize this site to save backups to ",e.jsx("strong",{children:"YOUR"})," Google Drive account."]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"rounded-md bg-blue-50 dark:bg-blue-900/20 p-3 text-xs text-blue-800 dark:text-blue-200",children:[e.jsx("p",{className:"font-semibold mb-1",children:"Setup Instructions:"}),e.jsxs("ol",{className:"list-decimal pl-4 space-y-1",children:[e.jsxs("li",{children:["Create a project in ",e.jsx("a",{href:"https://console.cloud.google.com/projectcreate",target:"_blank",rel:"noopener noreferrer",className:"underline text-blue-600 dark:text-blue-400",children:"Google Cloud Console"}),"."]}),e.jsxs("li",{children:["Add this ",e.jsx("strong",{children:"Authorized Redirect URI"}),":"]})]}),e.jsx("div",{className:"mt-2 flex gap-2",children:e.jsxs("code",{className:"flex-1 bg-white dark:bg-black/20 p-1.5 rounded border font-mono text-[10px] break-all",children:[window.sbwpData.root,"wp-admin/admin-ajax.php?action=sbwp_oauth_callback"]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"client_id",children:"Client ID"}),e.jsx(X,{id:"client_id",placeholder:"xxxx.apps.googleusercontent.com",value:b,onChange:N=>j(N.target.value),className:"font-mono text-xs"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"client_secret",children:"Client Secret"}),e.jsx(X,{id:"client_secret",type:"password",placeholder:"Client Secret",value:k,onChange:N=>R(N.target.value),className:"font-mono text-xs"})]})]}),e.jsxs(S,{className:"w-full",onClick:async()=>{d("gdrive");try{const N=await Ne("gdrive","prepare",{client_id:b,client_secret:k});console.log("SBWP: Prepare result:",N);let A=N.auth_url;if(!A&&N.success){console.warn("SBWP: Server missing auth_url, using fallback.");const D=encodeURIComponent(`${window.sbwpData.root}wp-admin/admin-ajax.php?action=sbwp_oauth_callback`),y=encodeURIComponent("https://www.googleapis.com/auth/drive.file https://www.googleapis.com/auth/userinfo.email");A=`https://accounts.google.com/o/oauth2/v2/auth?client_id=${b}&redirect_uri=${D}&response_type=code&scope=${y}&access_type=offline&prompt=consent`}if(!A)throw new Error("Prepare failed - could not generate auth URL");const $=window.open(A,"sbwp_auth","width=600,height=700"),U=setInterval(()=>{$!=null&&$.closed&&(clearInterval(U),m(),d(null))},1e3);window.addEventListener("message",D=>{var y;((y=D.data)==null?void 0:y.type)==="sbwp_auth_success"&&(clearInterval(U),$==null||$.close(),m(),d(null),p(null))},{once:!0})}catch(N){console.error("SBWP Auth Error:",N),d(null),alert(N.message||"Failed to initialize authentication.")}},disabled:i===h.id||!h.global_creds&&(!b||!k),children:[i===h.id?e.jsx(z,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(fs,{className:"mr-2 h-4 w-4"}),h.global_creds?"Connect YOUR Google Drive":"Connect Google Drive"]})]}),c===h.id&&["aws","do_spaces","wasabi"].includes(h.id)&&!h.connected&&e.jsxs("div",{className:"mt-4 pt-4 border-t space-y-4 animate-in slide-in-from-top-2 fade-in duration-200",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{children:"Access Key"}),e.jsx(X,{value:w.accessKey,onChange:N=>g({...w,accessKey:N.target.value}),type:"text",className:"font-mono text-xs"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{children:"Secret Key"}),e.jsx(X,{value:w.secretKey,onChange:N=>g({...w,secretKey:N.target.value}),type:"password",className:"font-mono text-xs"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{children:"Bucket Name"}),e.jsx(X,{value:w.bucket,onChange:N=>g({...w,bucket:N.target.value}),type:"text",className:"font-mono text-xs"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{children:"Region"}),e.jsx(X,{value:w.region,onChange:N=>g({...w,region:N.target.value}),placeholder:h.id==="do_spaces"?"nyc3":"us-east-1",type:"text",className:"font-mono text-xs"})]})]}),e.jsx(S,{className:"w-full",disabled:i===h.id||!w.accessKey||!w.secretKey||!w.bucket,onClick:async()=>{d(h.id);try{await Ne(h.id,"connect",{access_key:w.accessKey,secret_key:w.secretKey,bucket:w.bucket,region:w.region||"us-east-1",endpoint:w.endpoint}),m(),p(null),g({accessKey:"",secretKey:"",region:"",bucket:"",endpoint:""})}catch(N){console.error(N),alert(N.message||"Connection failed")}finally{d(null)}},children:i===h.id?e.jsx(z,{className:"mr-2 h-4 w-4 animate-spin"}):"Connect Storage"})]})]},h.id)})]})]})]})})}function Ha({onBack:s,onNavigate:t}){const[a,n]=r.useState({retention_limit:5}),[o,x]=r.useState(null),[i,d]=r.useState(null),[c,p]=r.useState(""),[b,j]=r.useState(""),[k,R]=r.useState(!0),[w,g]=r.useState(!1),[l,v]=r.useState(!1),[m,E]=r.useState(!1),{toast:h}=Z(),u=window.sbwpData.isPro;r.useEffect(()=>{(async()=>{try{const[y,F]=await Promise.all([Ps(),ya()]);if(n(y),d(F),u){const M=await ga();x(M)}}catch(y){console.error(y),h({title:"Error",description:"Failed to load settings.",variant:"destructive"})}finally{R(!1)}})()},[u,h]);const N=async()=>{i!=null&&i.url&&(await dt(i.url)?(E(!0),setTimeout(()=>E(!1),2e3),h({title:"Copied!",description:"Recovery URL copied to clipboard."})):h({title:"Copy Failed",description:"Please copy the URL manually.",variant:"destructive"}))},A=async()=>{if(confirm("Are you sure? This will invalidate your old recovery URL.")){g(!0);try{const D=await va();d(D),h({title:"Key Regenerated",description:"Your recovery URL has been updated."})}catch{h({title:"Error",description:"Failed to regenerate key.",variant:"destructive"})}finally{g(!1)}}},$=async()=>{if(confirm("Remove OpenAI API Key?")){g(!0);try{const D=await es("");x(D),p(""),h({title:"API Key Removed"})}catch{h({title:"Error",description:"Failed to remove API key.",variant:"destructive"})}finally{g(!1)}}},U=async()=>{g(!0);const D=[];D.push(Es(a)),b?D.push(ja(b).then(y=>(d(y),j(""),y))):b===""&&(i==null||i.has_pin),u&&c&&D.push(es(c).then(y=>(x(y),p(""),y)));try{await Promise.all(D),h({title:"Settings Saved",description:"All changes have been applied successfully."})}catch(y){console.error(y),h({title:"Error",description:"Some settings failed to save.",variant:"destructive"})}finally{g(!1)}};return k?e.jsx("div",{className:"p-8 flex justify-center",children:e.jsx(z,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):e.jsxs("div",{className:"space-y-8 pb-24",children:[e.jsx(Xa,{open:l,onOpenChange:v}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs(S,{variant:"ghost",className:"pl-0 gap-2 text-muted-foreground hover:text-foreground -ml-2 mb-2",onClick:s,children:[e.jsx(us,{className:"h-4 w-4"}),"Back to Dashboard"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-lg bg-primary/10 flex items-center justify-center",children:e.jsx(Ut,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Settings"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Configure backup preferences and security options"})]})]})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h2",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wide",children:"General"}),e.jsx(pe,{className:"flex-1"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(V,{children:[e.jsxs(H,{className:"pb-4",children:[e.jsx(q,{className:"text-base",children:"Backup Retention"}),e.jsx(J,{children:"Number of recent backups to keep on the server."})]}),e.jsx(K,{children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(X,{id:"retention",type:"number",min:1,max:50,className:"w-24",value:a.retention_limit,onChange:D=>n(y=>({...y,retention_limit:parseInt(D.target.value)||1}))}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"backups"})]})})]}),e.jsxs(V,{className:a.alerts_enabled?"ring-1 ring-red-500/20 bg-red-500/5":"",children:[e.jsxs(H,{className:"pb-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(q,{className:"text-base flex items-center gap-2",children:[e.jsx(Tt,{className:"h-4 w-4"}),"Crash Alerts"]}),e.jsx(de,{id:"alerts-enabled",checked:a.alerts_enabled||!1,onCheckedChange:D=>n(y=>({...y,alerts_enabled:D}))})]}),e.jsx(J,{children:"Receive an email with a recovery link if your site crashes."})]}),a.alerts_enabled&&e.jsx(K,{className:"pt-0",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{htmlFor:"alert-email",className:"text-sm",children:"Notification Email"}),e.jsx(X,{id:"alert-email",type:"email",placeholder:"admin@example.com",value:a.alert_email||"",onChange:D=>n(y=>({...y,alert_email:D.target.value}))})]})})]})]})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h2",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wide",children:"Security"}),e.jsx(pe,{className:"flex-1"})]}),e.jsxs(V,{className:"ring-1 ring-orange-500/20 bg-gradient-to-br from-orange-500/5 to-transparent",children:[e.jsxs(H,{className:"pb-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(q,{className:"text-lg flex items-center gap-2",children:[e.jsx(Wt,{className:"h-5 w-5 text-orange-600"}),"Recovery Portal"]}),(i==null?void 0:i.has_pin)&&e.jsxs("span",{className:"text-xs bg-emerald-500/10 text-emerald-600 px-2.5 py-1 rounded-full font-medium flex items-center gap-1.5 border border-emerald-500/20",children:[e.jsx(Mt,{className:"h-3 w-3"}),"PIN Protected"]})]}),e.jsx(J,{children:"Emergency access to your site when WordPress is down."})]}),e.jsxs(K,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{className:"text-sm",children:"Recovery URL"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"flex-1 flex items-center gap-2 bg-muted/50 p-3 rounded-md border",children:[e.jsx("code",{className:"flex-1 text-xs font-mono truncate text-muted-foreground",children:i==null?void 0:i.url}),e.jsx(S,{variant:"ghost",size:"icon",className:"h-7 w-7 shrink-0",onClick:N,children:m?e.jsx(_t,{className:"h-3.5 w-3.5 text-emerald-600"}):e.jsx(hs,{className:"h-3.5 w-3.5"})})]}),e.jsxs(S,{variant:"outline",size:"sm",className:"shrink-0 text-muted-foreground hover:text-destructive",onClick:A,children:[e.jsx(Ie,{className:"h-3.5 w-3.5 mr-2"}),"Reset"]})]})]}),e.jsxs("div",{className:"space-y-2 max-w-sm",children:[e.jsx(W,{className:"text-sm",children:i!=null&&i.has_pin?"Update PIN":"Set PIN (Optional)"}),e.jsx(X,{type:"password",placeholder:i!=null&&i.has_pin?"Enter new PIN to change":"Enter PIN to protect portal",value:b,onChange:D=>j(D.target.value)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:i!=null&&i.has_pin?"Leave blank to keep your current PIN.":"Add an extra layer of security to your recovery portal."})]})]})]})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h2",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wide",children:"Pro Features"}),e.jsx(pe,{className:"flex-1"}),!u&&e.jsx("span",{className:"text-xs font-medium px-2 py-0.5 rounded-full bg-gradient-to-r from-violet-500/10 to-purple-500/10 text-violet-600 border border-violet-500/20",children:"Upgrade to Pro"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(V,{className:u?"":"opacity-60",children:[e.jsxs(H,{className:"pb-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(q,{className:"text-base flex items-center gap-2",children:[e.jsx(xs,{className:"h-4 w-4"}),"Cloud Storage"]}),!u&&e.jsx("span",{className:"text-[10px] font-bold px-1.5 py-0.5 rounded bg-slate-100 text-slate-500",children:"PRO"})]}),e.jsx(J,{children:"Sync backups to Google Drive or AWS S3."})]}),e.jsx(K,{children:e.jsx(S,{variant:u?"outline":"secondary",size:"sm",className:"w-full",onClick:()=>u&&v(!0),disabled:!u,children:u?"Configure Cloud":"Requires Pro"})})]}),e.jsxs(V,{className:u?"":"opacity-60",children:[e.jsxs(H,{className:"pb-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(q,{className:"text-base flex items-center gap-2",children:[e.jsx(Dt,{className:"h-4 w-4"}),"Schedules"]}),!u&&e.jsx("span",{className:"text-[10px] font-bold px-1.5 py-0.5 rounded bg-slate-100 text-slate-500",children:"PRO"})]}),e.jsx(J,{children:"Automated daily or weekly backups."})]}),e.jsx(K,{children:e.jsx(S,{variant:u?"outline":"secondary",size:"sm",className:"w-full",onClick:()=>u&&t("schedules"),disabled:!u,children:u?"Manage Schedules":"Requires Pro"})})]}),e.jsxs(V,{className:u?o!=null&&o.is_configured?"ring-1 ring-violet-500/20 bg-violet-500/5":"":"opacity-60",children:[e.jsxs(H,{className:"pb-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(q,{className:"text-base flex items-center gap-2",children:[e.jsx(is,{className:"h-4 w-4 text-violet-500"}),"AI Assistant"]}),!u&&e.jsx("span",{className:"text-[10px] font-bold px-1.5 py-0.5 rounded bg-slate-100 text-slate-500",children:"PRO"}),u&&(o==null?void 0:o.is_configured)&&e.jsx("span",{className:"text-[10px] font-bold px-1.5 py-0.5 rounded bg-emerald-100 text-emerald-600",children:"ACTIVE"})]}),e.jsx(J,{children:"AI-powered crash analysis and explanations."})]}),e.jsx(K,{children:u?o!=null&&o.is_configured?e.jsxs("div",{className:"flex items-center justify-between p-2.5 bg-muted/50 rounded-md border",children:[e.jsx("span",{className:"font-mono text-xs text-muted-foreground",children:o.masked_key}),e.jsx(S,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-destructive",onClick:$,children:e.jsx(Vt,{className:"h-3.5 w-3.5"})})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx(X,{type:"password",className:"font-mono text-xs",placeholder:"sk-...",value:c,onChange:D=>p(D.target.value)}),e.jsx("p",{className:"text-[10px] text-muted-foreground text-right",children:"Enter your OpenAI API Key"})]}):e.jsx(S,{variant:"secondary",size:"sm",className:"w-full",disabled:!0,children:"Requires Pro"})})]})]})]}),e.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:e.jsxs(S,{size:"lg",onClick:U,disabled:w,className:"shadow-xl rounded-full px-6 hover:scale-105 transition-transform",children:[w&&e.jsx(z,{className:"mr-2 h-4 w-4 animate-spin"}),e.jsx(Lt,{className:"mr-2 h-4 w-4"}),"Save Changes"]})})]})}function qa({onBack:s}){const[t,a]=r.useState([]),[n,o]=r.useState(!1),[x,i]=r.useState(!1),{toast:d}=Z(),c=async()=>{o(!0);try{const k=await(await fetch(`${window.sbwpData.restUrl}/schedules`,{headers:{"X-WP-Nonce":window.sbwpData.nonce}})).json();a(k)}catch(j){console.error(j)}finally{o(!1)}};r.useEffect(()=>{c()},[]);const p=async j=>{i(!0);try{(await fetch(`${window.sbwpData.restUrl}/schedules`,{method:"POST",headers:{"X-WP-Nonce":window.sbwpData.nonce,"Content-Type":"application/json"},body:JSON.stringify({frequency:j,time:"00:00"})})).ok&&(d({title:"Schedule Created",description:`New ${j} schedule added.`}),c())}catch{d({title:"Error",variant:"destructive",description:"Failed to create schedule."})}finally{i(!1)}},b=async j=>{if(confirm("Delete this schedule?"))try{await fetch(`${window.sbwpData.restUrl}/schedules/${j}`,{method:"DELETE",headers:{"X-WP-Nonce":window.sbwpData.nonce}}),d({title:"Schedule Deleted"}),c()}catch{d({title:"Error",variant:"destructive"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(S,{variant:"ghost",size:"sm",onClick:s,children:[e.jsx(us,{className:"mr-2 h-4 w-4"}),"Back"]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Scheduled Backups"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your automated backup routines."})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(V,{children:[e.jsxs(H,{children:[e.jsx(q,{children:"Create Schedule"}),e.jsx(J,{children:"Add a new automated backup task."})]}),e.jsxs(K,{className:"space-y-4",children:[e.jsxs(S,{className:"w-full justify-start",onClick:()=>p("daily"),disabled:x,children:[e.jsx(Je,{className:"mr-2 h-4 w-4"}),"Add Daily Backup"]}),e.jsxs(S,{className:"w-full justify-start",variant:"secondary",onClick:()=>p("weekly"),disabled:x,children:[e.jsx(Je,{className:"mr-2 h-4 w-4"}),"Add Weekly Backup"]})]})]}),e.jsxs(V,{children:[e.jsxs(H,{children:[e.jsx(q,{children:"Active Schedules"}),e.jsx(J,{children:"Your currently running backup jobs."})]}),e.jsx(K,{children:n?e.jsx("div",{className:"flex justify-center p-4",children:e.jsx(z,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):t.length===0?e.jsx("p",{className:"text-sm text-muted-foreground",children:"No active schedules."}):e.jsx("div",{className:"space-y-2",children:t.map(j=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Et,{className:"h-5 w-5 text-blue-500"}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium capitalize",children:[j.frequency," Backup"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Next run: calculated by WP Cron"})]})]}),e.jsx(S,{variant:"ghost",size:"sm",onClick:()=>b(j.id),children:e.jsx(js,{className:"h-4 w-4 text-red-500"})})]},j.id))})})]})]})]})}var Ga=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Ja="VisuallyHidden",$e=r.forwardRef((s,t)=>e.jsx(Y.span,{...s,ref:t,style:{...Ga,...s.style}}));$e.displayName=Ja;var Oe="ToastProvider",[Be,Ya,Za]=mt("Toast"),[Ms]=ut("Toast",[Za]),[Qa,je]=Ms(Oe),$s=s=>{const{__scopeToast:t,label:a="Notification",duration:n=5e3,swipeDirection:o="right",swipeThreshold:x=50,children:i}=s,[d,c]=r.useState(null),[p,b]=r.useState(0),j=r.useRef(!1),k=r.useRef(!1);return a.trim()||console.error(`Invalid prop \`label\` supplied to \`${Oe}\`. Expected non-empty \`string\`.`),e.jsx(Be.Provider,{scope:t,children:e.jsx(Qa,{scope:t,label:a,duration:n,swipeDirection:o,swipeThreshold:x,toastCount:p,viewport:d,onViewportChange:c,onToastAdd:r.useCallback(()=>b(R=>R+1),[]),onToastRemove:r.useCallback(()=>b(R=>R-1),[]),isFocusedToastEscapeKeyDownRef:j,isClosePausedRef:k,children:i})})};$s.displayName=Oe;var Os="ToastViewport",en=["F8"],Ee="toast.viewportPause",De="toast.viewportResume",Bs=r.forwardRef((s,t)=>{const{__scopeToast:a,hotkey:n=en,label:o="Notifications ({hotkey})",...x}=s,i=je(Os,a),d=Ya(a),c=r.useRef(null),p=r.useRef(null),b=r.useRef(null),j=r.useRef(null),k=ls(t,j,i.onViewportChange),R=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),w=i.toastCount>0;r.useEffect(()=>{const l=v=>{var E;n.length!==0&&n.every(h=>v[h]||v.code===h)&&((E=j.current)==null||E.focus())};return document.addEventListener("keydown",l),()=>document.removeEventListener("keydown",l)},[n]),r.useEffect(()=>{const l=c.current,v=j.current;if(w&&l&&v){const m=()=>{if(!i.isClosePausedRef.current){const N=new CustomEvent(Ee);v.dispatchEvent(N),i.isClosePausedRef.current=!0}},E=()=>{if(i.isClosePausedRef.current){const N=new CustomEvent(De);v.dispatchEvent(N),i.isClosePausedRef.current=!1}},h=N=>{!l.contains(N.relatedTarget)&&E()},u=()=>{l.contains(document.activeElement)||E()};return l.addEventListener("focusin",m),l.addEventListener("focusout",h),l.addEventListener("pointermove",m),l.addEventListener("pointerleave",u),window.addEventListener("blur",m),window.addEventListener("focus",E),()=>{l.removeEventListener("focusin",m),l.removeEventListener("focusout",h),l.removeEventListener("pointermove",m),l.removeEventListener("pointerleave",u),window.removeEventListener("blur",m),window.removeEventListener("focus",E)}}},[w,i.isClosePausedRef]);const g=r.useCallback(({tabbingDirection:l})=>{const m=d().map(E=>{const h=E.ref.current,u=[h,...hn(h)];return l==="forwards"?u:u.reverse()});return(l==="forwards"?m.reverse():m).flat()},[d]);return r.useEffect(()=>{const l=j.current;if(l){const v=m=>{var u,N,A;const E=m.altKey||m.ctrlKey||m.metaKey;if(m.key==="Tab"&&!E){const $=document.activeElement,U=m.shiftKey;if(m.target===l&&U){(u=p.current)==null||u.focus();return}const F=g({tabbingDirection:U?"backwards":"forwards"}),M=F.findIndex(T=>T===$);Ce(F.slice(M+1))?m.preventDefault():U?(N=p.current)==null||N.focus():(A=b.current)==null||A.focus()}};return l.addEventListener("keydown",v),()=>l.removeEventListener("keydown",v)}},[d,g]),e.jsxs(xt,{ref:c,role:"region","aria-label":o.replace("{hotkey}",R),tabIndex:-1,style:{pointerEvents:w?void 0:"none"},children:[w&&e.jsx(_e,{ref:p,onFocusFromOutsideViewport:()=>{const l=g({tabbingDirection:"forwards"});Ce(l)}}),e.jsx(Be.Slot,{scope:a,children:e.jsx(Y.ol,{tabIndex:-1,...x,ref:k})}),w&&e.jsx(_e,{ref:b,onFocusFromOutsideViewport:()=>{const l=g({tabbingDirection:"backwards"});Ce(l)}})]})});Bs.displayName=Os;var Ls="ToastFocusProxy",_e=r.forwardRef((s,t)=>{const{__scopeToast:a,onFocusFromOutsideViewport:n,...o}=s,x=je(Ls,a);return e.jsx($e,{tabIndex:0,...o,ref:t,style:{position:"fixed"},onFocus:i=>{var p;const d=i.relatedTarget;!((p=x.viewport)!=null&&p.contains(d))&&n()}})});_e.displayName=Ls;var ie="Toast",sn="toast.swipeStart",tn="toast.swipeMove",an="toast.swipeCancel",nn="toast.swipeEnd",zs=r.forwardRef((s,t)=>{const{forceMount:a,open:n,defaultOpen:o,onOpenChange:x,...i}=s,[d,c]=ht({prop:n,defaultProp:o??!0,onChange:x,caller:ie});return e.jsx(pt,{present:a||d,children:e.jsx(ln,{open:d,...i,ref:t,onClose:()=>c(!1),onPause:fe(s.onPause),onResume:fe(s.onResume),onSwipeStart:G(s.onSwipeStart,p=>{p.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:G(s.onSwipeMove,p=>{const{x:b,y:j}=p.detail.delta;p.currentTarget.setAttribute("data-swipe","move"),p.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${b}px`),p.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${j}px`)}),onSwipeCancel:G(s.onSwipeCancel,p=>{p.currentTarget.setAttribute("data-swipe","cancel"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),p.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),p.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:G(s.onSwipeEnd,p=>{const{x:b,y:j}=p.detail.delta;p.currentTarget.setAttribute("data-swipe","end"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),p.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),p.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${b}px`),p.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${j}px`),c(!1)})})})});zs.displayName=ie;var[rn,on]=Ms(ie,{onClose(){}}),ln=r.forwardRef((s,t)=>{const{__scopeToast:a,type:n="foreground",duration:o,open:x,onClose:i,onEscapeKeyDown:d,onPause:c,onResume:p,onSwipeStart:b,onSwipeMove:j,onSwipeCancel:k,onSwipeEnd:R,...w}=s,g=je(ie,a),[l,v]=r.useState(null),m=ls(t,T=>v(T)),E=r.useRef(null),h=r.useRef(null),u=o||g.duration,N=r.useRef(0),A=r.useRef(u),$=r.useRef(0),{onToastAdd:U,onToastRemove:D}=g,y=fe(()=>{var f;(l==null?void 0:l.contains(document.activeElement))&&((f=g.viewport)==null||f.focus()),i()}),F=r.useCallback(T=>{!T||T===1/0||(window.clearTimeout($.current),N.current=new Date().getTime(),$.current=window.setTimeout(y,T))},[y]);r.useEffect(()=>{const T=g.viewport;if(T){const f=()=>{F(A.current),p==null||p()},_=()=>{const O=new Date().getTime()-N.current;A.current=A.current-O,window.clearTimeout($.current),c==null||c()};return T.addEventListener(Ee,_),T.addEventListener(De,f),()=>{T.removeEventListener(Ee,_),T.removeEventListener(De,f)}}},[g.viewport,u,c,p,F]),r.useEffect(()=>{x&&!g.isClosePausedRef.current&&F(u)},[x,u,g.isClosePausedRef,F]),r.useEffect(()=>(U(),()=>D()),[U,D]);const M=r.useMemo(()=>l?qs(l):null,[l]);return g.viewport?e.jsxs(e.Fragment,{children:[M&&e.jsx(cn,{__scopeToast:a,role:"status","aria-live":n==="foreground"?"assertive":"polite",children:M}),e.jsx(rn,{scope:a,onClose:y,children:ft.createPortal(e.jsx(Be.ItemSlot,{scope:a,children:e.jsx(gt,{asChild:!0,onEscapeKeyDown:G(d,()=>{g.isFocusedToastEscapeKeyDownRef.current||y(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:e.jsx(Y.li,{tabIndex:0,"data-state":x?"open":"closed","data-swipe-direction":g.swipeDirection,...w,ref:m,style:{userSelect:"none",touchAction:"none",...s.style},onKeyDown:G(s.onKeyDown,T=>{T.key==="Escape"&&(d==null||d(T.nativeEvent),T.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,y()))}),onPointerDown:G(s.onPointerDown,T=>{T.button===0&&(E.current={x:T.clientX,y:T.clientY})}),onPointerMove:G(s.onPointerMove,T=>{if(!E.current)return;const f=T.clientX-E.current.x,_=T.clientY-E.current.y,O=!!h.current,C=["left","right"].includes(g.swipeDirection),B=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,I=C?B(0,f):0,Q=C?0:B(0,_),ve=T.pointerType==="touch"?10:2,le={x:I,y:Q},ze={originalEvent:T,delta:le};O?(h.current=le,ce(tn,j,ze,{discrete:!1})):as(le,g.swipeDirection,ve)?(h.current=le,ce(sn,b,ze,{discrete:!1}),T.target.setPointerCapture(T.pointerId)):(Math.abs(f)>ve||Math.abs(_)>ve)&&(E.current=null)}),onPointerUp:G(s.onPointerUp,T=>{const f=h.current,_=T.target;if(_.hasPointerCapture(T.pointerId)&&_.releasePointerCapture(T.pointerId),h.current=null,E.current=null,f){const O=T.currentTarget,C={originalEvent:T,delta:f};as(f,g.swipeDirection,g.swipeThreshold)?ce(nn,R,C,{discrete:!0}):ce(an,k,C,{discrete:!0}),O.addEventListener("click",B=>B.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),cn=s=>{const{__scopeToast:t,children:a,...n}=s,o=je(ie,t),[x,i]=r.useState(!1),[d,c]=r.useState(!1);return mn(()=>i(!0)),r.useEffect(()=>{const p=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(p)},[]),d?null:e.jsx(wt,{asChild:!0,children:e.jsx($e,{...n,children:x&&e.jsxs(e.Fragment,{children:[o.label," ",a]})})})},dn="ToastTitle",Us=r.forwardRef((s,t)=>{const{__scopeToast:a,...n}=s;return e.jsx(Y.div,{...n,ref:t})});Us.displayName=dn;var un="ToastDescription",Ws=r.forwardRef((s,t)=>{const{__scopeToast:a,...n}=s;return e.jsx(Y.div,{...n,ref:t})});Ws.displayName=un;var Vs="ToastAction",Ks=r.forwardRef((s,t)=>{const{altText:a,...n}=s;return a.trim()?e.jsx(Hs,{altText:a,asChild:!0,children:e.jsx(Le,{...n,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${Vs}\`. Expected non-empty \`string\`.`),null)});Ks.displayName=Vs;var Xs="ToastClose",Le=r.forwardRef((s,t)=>{const{__scopeToast:a,...n}=s,o=on(Xs,a);return e.jsx(Hs,{asChild:!0,children:e.jsx(Y.button,{type:"button",...n,ref:t,onClick:G(s.onClick,o.onClose)})})});Le.displayName=Xs;var Hs=r.forwardRef((s,t)=>{const{__scopeToast:a,altText:n,...o}=s;return e.jsx(Y.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...o,ref:t})});function qs(s){const t=[];return Array.from(s.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&t.push(n.textContent),xn(n)){const o=n.ariaHidden||n.hidden||n.style.display==="none",x=n.dataset.radixToastAnnounceExclude==="";if(!o)if(x){const i=n.dataset.radixToastAnnounceAlt;i&&t.push(i)}else t.push(...qs(n))}}),t}function ce(s,t,a,{discrete:n}){const o=a.originalEvent.currentTarget,x=new CustomEvent(s,{bubbles:!0,cancelable:!0,detail:a});t&&o.addEventListener(s,t,{once:!0}),n?yt(o,x):o.dispatchEvent(x)}var as=(s,t,a=0)=>{const n=Math.abs(s.x),o=Math.abs(s.y),x=n>o;return t==="left"||t==="right"?x&&n>a:!x&&o>a};function mn(s=()=>{}){const t=fe(s);jt(()=>{let a=0,n=0;return a=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(a),window.cancelAnimationFrame(n)}},[t])}function xn(s){return s.nodeType===s.ELEMENT_NODE}function hn(s){const t=[],a=document.createTreeWalker(s,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const o=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||o?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;a.nextNode();)t.push(a.currentNode);return t}function Ce(s){const t=document.activeElement;return s.some(a=>a===t?!0:(a.focus(),document.activeElement!==t))}var pn=$s,Gs=Bs,Js=zs,Ys=Us,Zs=Ws,Qs=Ks,et=Le;const fn=pn,st=r.forwardRef(({className:s,...t},a)=>e.jsx(Gs,{ref:a,className:L("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",s),...t}));st.displayName=Gs.displayName;const gn=os("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),tt=r.forwardRef(({className:s,variant:t,...a},n)=>e.jsx(Js,{ref:n,className:L(gn({variant:t}),s),...a}));tt.displayName=Js.displayName;const wn=r.forwardRef(({className:s,...t},a)=>e.jsx(Qs,{ref:a,className:L("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",s),...t}));wn.displayName=Qs.displayName;const at=r.forwardRef(({className:s,...t},a)=>e.jsx(et,{ref:a,className:L("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",s),"toast-close":"",...t,children:e.jsx(vt,{className:"h-4 w-4"})}));at.displayName=et.displayName;const nt=r.forwardRef(({className:s,...t},a)=>e.jsx(Ys,{ref:a,className:L("text-sm font-semibold",s),...t}));nt.displayName=Ys.displayName;const rt=r.forwardRef(({className:s,...t},a)=>e.jsx(Zs,{ref:a,className:L("text-sm opacity-90",s),...t}));rt.displayName=Zs.displayName;function yn(){const{toasts:s}=Z();return e.jsxs(fn,{children:[s.map(function({id:t,title:a,description:n,action:o,...x}){return e.jsxs(tt,{...x,children:[e.jsxs("div",{className:"grid gap-1",children:[a&&e.jsx(nt,{children:a}),n&&e.jsx(rt,{children:n})]}),o,e.jsx(at,{})]},t)}),e.jsx(st,{})]})}function ns(){const[s,t]=r.useState("dashboard");return e.jsxs(e.Fragment,{children:[e.jsx(yn,{}),e.jsx("div",{className:"min-h-screen bg-background p-8 font-sans antialiased text-foreground",children:e.jsxs("div",{className:"mx-auto max-w-6xl space-y-8",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"SafeBackup & Repair"}),e.jsxs("div",{className:"flex items-center gap-2",children:[window.sbwpData.isPro?e.jsx("span",{className:"text-xs font-medium text-emerald-600 bg-emerald-100 dark:bg-emerald-900/30 dark:text-emerald-400 px-2 py-1 rounded-full border border-emerald-200 dark:border-emerald-800",children:"Pro Active"}):e.jsx("span",{className:"text-xs font-medium text-slate-600 bg-slate-100 dark:bg-slate-900/30 dark:text-slate-400 px-2 py-1 rounded-full border border-slate-200 dark:border-slate-800",children:"Free Edition"}),e.jsx("button",{onClick:()=>t("settings"),className:"text-sm text-muted-foreground hover:text-foreground transition-colors",children:"Settings"})]})]}),s==="dashboard"&&e.jsx(La,{onNavigate:t}),s==="settings"&&e.jsx(Ha,{onBack:()=>t("dashboard"),onNavigate:t}),s==="schedules"&&e.jsx(qa,{onBack:()=>t("dashboard")})]})})]})}const rs=document.getElementById("sbwp-admin-root");if(rs)Ve.createRoot(rs).render(e.jsx(Ke.StrictMode,{children:e.jsx(ns,{})}));else{const s=document.getElementById("root");s&&Ve.createRoot(s).render(e.jsx(Ke.StrictMode,{children:e.jsx(ns,{})}))}
