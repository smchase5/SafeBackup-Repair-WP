import{c as k,r as n,j as e,a as $e,b as C,P as $,d as Dt,e as Rt,u as Be,B as At,f as Mt,g as It,h as _,i as se,k as _t,R as Ft,l as Ot,m as Lt,n as $t,o as Ve,C as Bt,D as he,p as we,q as ge,s as ve,t as ye,v as b,L as I,A as Vt,w as D,x as R,y as A,z as ae,E as M,F as Ut,G as Pe,H as De}from"./globals-CAem_bp5.js";/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=k("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=k("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=k("ArrowUpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=k("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=k("CalendarClock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.25V14",key:"re2vv1"}],["path",{d:"M22 16a6 6 0 1 1-12 0 6 6 0 0 1 12 0Z",key:"ame013"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=k("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=k("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=k("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=k("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=k("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=k("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=k("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=k("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=k("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=k("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);function Zt(t,s=[]){let a=[];function r(l,p){const i=n.createContext(p);i.displayName=l+"Context";const d=a.length;a=[...a,p];const c=m=>{var T;const{scope:h,children:v,...y}=m,g=((T=h==null?void 0:h[t])==null?void 0:T[d])||i,f=n.useMemo(()=>y,Object.values(y));return e.jsx(g.Provider,{value:f,children:v})};c.displayName=l+"Provider";function u(m,h){var g;const v=((g=h==null?void 0:h[t])==null?void 0:g[d])||i,y=n.useContext(v);if(y)return y;if(p!==void 0)return p;throw new Error(`\`${m}\` must be used within \`${l}\``)}return[c,u]}const o=()=>{const l=a.map(p=>n.createContext(p));return function(i){const d=(i==null?void 0:i[t])||l;return n.useMemo(()=>({[`__scope${t}`]:{...i,[t]:d}}),[i,d])}};return o.scopeName=t,[r,es(o,...s)]}function es(...t){const s=t[0];if(t.length===1)return s;const a=()=>{const r=t.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(l){const p=r.reduce((i,{useScope:d,scopeName:c})=>{const m=d(l)[`__scope${c}`];return{...i,...m}},{});return n.useMemo(()=>({[`__scope${s.scopeName}`]:p}),[p])}};return a.scopeName=s.scopeName,a}var ts=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],He=ts.reduce((t,s)=>{const a=$e(`Primitive.${s}`),r=n.forwardRef((o,l)=>{const{asChild:p,...i}=o,d=p?a:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(d,{...i,ref:l})});return r.displayName=`Primitive.${s}`,{...t,[s]:r}},{}),be="Progress",Ne=100,[ss]=Zt(be),[as,rs]=ss(be),We=n.forwardRef((t,s)=>{const{__scopeProgress:a,value:r=null,max:o,getValueLabel:l=ns,...p}=t;(o||o===0)&&!Ae(o)&&console.error(os(`${o}`,"Progress"));const i=Ae(o)?o:Ne;r!==null&&!Me(r,i)&&console.error(is(`${r}`,"Progress"));const d=Me(r,i)?r:null,c=re(d)?l(d,i):void 0;return e.jsx(as,{scope:a,value:d,max:i,children:e.jsx(He.div,{"aria-valuemax":i,"aria-valuemin":0,"aria-valuenow":re(d)?d:void 0,"aria-valuetext":c,role:"progressbar","data-state":Ye(d,i),"data-value":d??void 0,"data-max":i,...p,ref:s})})});We.displayName=be;var Xe="ProgressIndicator",Ke=n.forwardRef((t,s)=>{const{__scopeProgress:a,...r}=t,o=rs(Xe,a);return e.jsx(He.div,{"data-state":Ye(o.value,o.max),"data-value":o.value??void 0,"data-max":o.max,...r,ref:s})});Ke.displayName=Xe;function ns(t,s){return`${Math.round(t/s*100)}%`}function Ye(t,s){return t==null?"indeterminate":t===s?"complete":"loading"}function re(t){return typeof t=="number"}function Ae(t){return re(t)&&!isNaN(t)&&t>0}function Me(t,s){return re(t)&&!isNaN(t)&&t<=s&&t>=0}function os(t,s){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${s}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Ne}\`.`}function is(t,s){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${s}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Ne} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var Ge=We,cs=Ke;const qe=n.forwardRef(({className:t,value:s,...a},r)=>e.jsx(Ge,{ref:r,className:C("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...a,children:e.jsx(cs,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})}));qe.displayName=Ge.displayName;async function ls(){const t=await fetch(`${window.sbwpData.restUrl}/stats`,{headers:{"X-WP-Nonce":window.sbwpData.nonce}});if(!t.ok)throw new Error("Failed to fetch stats");return t.json()}async function ds(){const t=await fetch(`${window.sbwpData.restUrl}/backups`,{headers:{"X-WP-Nonce":window.sbwpData.nonce}});if(!t.ok)throw new Error("Failed to fetch backups");return t.json()}async function us(t){const s=await fetch(`${window.sbwpData.restUrl}/backups/${t}`,{method:"DELETE",headers:{"X-WP-Nonce":window.sbwpData.nonce}});if(!s.ok)throw new Error("Failed to delete backup");return s.json()}async function ps(){try{const t=await fetch(`${window.sbwpData.restUrl}/backup/progress`,{headers:{"X-WP-Nonce":window.sbwpData.nonce}});if(!t.ok)return{percent:0,message:"Idle"};const s=await t.text();return s?JSON.parse(s):{percent:0,message:"Idle"}}catch{return{percent:0,message:"Idle"}}}async function ms(){const t=await fetch(`${window.sbwpData.restUrl}/cloud/providers`,{headers:{"X-WP-Nonce":window.sbwpData.nonce}});if(t.status===404)return[];if(!t.ok)throw new Error("Failed to fetch cloud providers");return t.json()}async function xs(t,s){const a=await fetch(`${window.sbwpData.restUrl}/cloud/connect`,{method:"POST",headers:{"X-WP-Nonce":window.sbwpData.nonce,"Content-Type":"application/json"},body:JSON.stringify({provider_id:t,action:s})});if(!a.ok)throw new Error("Failed to update provider");return a.json()}async function fs(){const t=await fetch(`${window.sbwpData.restUrl}/settings`,{headers:{"X-WP-Nonce":window.sbwpData.nonce}});if(!t.ok)throw new Error("Failed to fetch settings");return t.json()}async function hs(t){const s=await fetch(`${window.sbwpData.restUrl}/settings`,{method:"POST",headers:{"X-WP-Nonce":window.sbwpData.nonce,"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok)throw new Error("Failed to save settings");return s.json()}async function Ie(t=!1){const s=await fetch(`${window.sbwpData.restUrl}/backups`,{method:"POST",headers:{"X-WP-Nonce":window.sbwpData.nonce,"Content-Type":"application/json"},body:JSON.stringify({resume:t})}),a=await s.text();if(!a)throw console.error(`SBWP Fetch Error: Empty response. Status: ${s.status} ${s.statusText}`),new Error(`Empty response from server (Status ${s.status})`);try{const r=JSON.parse(a);if(!s.ok)throw new Error(r.message||"Failed to create backup");return r}catch{throw console.error("JSON Parse Error:",a),new Error("Invalid server response")}}const ws=1,gs=1e6;let ce=0;function vs(){return ce=(ce+1)%Number.MAX_SAFE_INTEGER,ce.toString()}const le=new Map,_e=t=>{if(le.has(t))return;const s=setTimeout(()=>{le.delete(t),K({type:"REMOVE_TOAST",toastId:t})},gs);le.set(t,s)},ys=(t,s)=>{switch(s.type){case"ADD_TOAST":return{...t,toasts:[s.toast,...t.toasts].slice(0,ws)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(a=>a.id===s.toast.id?{...a,...s.toast}:a)};case"DISMISS_TOAST":{const{toastId:a}=s;return a?_e(a):t.toasts.forEach(r=>{_e(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===a||s.toastId===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return s.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(a=>a.id!==s.toastId)}}},ee=[];let te={toasts:[]};function K(t){te=ys(te,t),ee.forEach(s=>{s(te)})}function js({...t}){const s=vs(),a=o=>K({type:"UPDATE_TOAST",toast:{...o,id:s}}),r=()=>K({type:"DISMISS_TOAST",toastId:s});return K({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:o=>{o||r()}}}),{id:s,dismiss:r,update:a}}function Y(){const[t,s]=n.useState(te);return n.useEffect(()=>(ee.push(s),()=>{const a=ee.indexOf(s);a>-1&&ee.splice(a,1)}),[t]),{...t,toast:js,dismiss:a=>K({type:"DISMISS_TOAST",toastId:a})}}var bs=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Ns="VisuallyHidden",Te=n.forwardRef((t,s)=>e.jsx($.span,{...t,ref:s,style:{...bs,...t.style}}));Te.displayName=Ns;var Se="ToastProvider",[Ce,Ts,Ss]=Rt("Toast"),[Je]=Dt("Toast",[Ss]),[Cs,ne]=Je(Se),Qe=t=>{const{__scopeToast:s,label:a="Notification",duration:r=5e3,swipeDirection:o="right",swipeThreshold:l=50,children:p}=t,[i,d]=n.useState(null),[c,u]=n.useState(0),m=n.useRef(!1),h=n.useRef(!1);return a.trim()||console.error(`Invalid prop \`label\` supplied to \`${Se}\`. Expected non-empty \`string\`.`),e.jsx(Ce.Provider,{scope:s,children:e.jsx(Cs,{scope:s,label:a,duration:r,swipeDirection:o,swipeThreshold:l,toastCount:c,viewport:i,onViewportChange:d,onToastAdd:n.useCallback(()=>u(v=>v+1),[]),onToastRemove:n.useCallback(()=>u(v=>v-1),[]),isFocusedToastEscapeKeyDownRef:m,isClosePausedRef:h,children:p})})};Qe.displayName=Se;var Ze="ToastViewport",ks=["F8"],pe="toast.viewportPause",me="toast.viewportResume",et=n.forwardRef((t,s)=>{const{__scopeToast:a,hotkey:r=ks,label:o="Notifications ({hotkey})",...l}=t,p=ne(Ze,a),i=Ts(a),d=n.useRef(null),c=n.useRef(null),u=n.useRef(null),m=n.useRef(null),h=Be(s,m,p.onViewportChange),v=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),y=p.toastCount>0;n.useEffect(()=>{const f=T=>{var N;r.length!==0&&r.every(x=>T[x]||T.code===x)&&((N=m.current)==null||N.focus())};return document.addEventListener("keydown",f),()=>document.removeEventListener("keydown",f)},[r]),n.useEffect(()=>{const f=d.current,T=m.current;if(y&&f&&T){const j=()=>{if(!p.isClosePausedRef.current){const E=new CustomEvent(pe);T.dispatchEvent(E),p.isClosePausedRef.current=!0}},N=()=>{if(p.isClosePausedRef.current){const E=new CustomEvent(me);T.dispatchEvent(E),p.isClosePausedRef.current=!1}},x=E=>{!f.contains(E.relatedTarget)&&N()},S=()=>{f.contains(document.activeElement)||N()};return f.addEventListener("focusin",j),f.addEventListener("focusout",x),f.addEventListener("pointermove",j),f.addEventListener("pointerleave",S),window.addEventListener("blur",j),window.addEventListener("focus",N),()=>{f.removeEventListener("focusin",j),f.removeEventListener("focusout",x),f.removeEventListener("pointermove",j),f.removeEventListener("pointerleave",S),window.removeEventListener("blur",j),window.removeEventListener("focus",N)}}},[y,p.isClosePausedRef]);const g=n.useCallback(({tabbingDirection:f})=>{const j=i().map(N=>{const x=N.ref.current,S=[x,...Bs(x)];return f==="forwards"?S:S.reverse()});return(f==="forwards"?j.reverse():j).flat()},[i]);return n.useEffect(()=>{const f=m.current;if(f){const T=j=>{var S,E,O;const N=j.altKey||j.ctrlKey||j.metaKey;if(j.key==="Tab"&&!N){const U=document.activeElement,B=j.shiftKey;if(j.target===f&&B){(S=c.current)==null||S.focus();return}const L=g({tabbingDirection:B?"backwards":"forwards"}),q=L.findIndex(w=>w===U);de(L.slice(q+1))?j.preventDefault():B?(E=c.current)==null||E.focus():(O=u.current)==null||O.focus()}};return f.addEventListener("keydown",T),()=>f.removeEventListener("keydown",T)}},[i,g]),e.jsxs(At,{ref:d,role:"region","aria-label":o.replace("{hotkey}",v),tabIndex:-1,style:{pointerEvents:y?void 0:"none"},children:[y&&e.jsx(xe,{ref:c,onFocusFromOutsideViewport:()=>{const f=g({tabbingDirection:"forwards"});de(f)}}),e.jsx(Ce.Slot,{scope:a,children:e.jsx($.ol,{tabIndex:-1,...l,ref:h})}),y&&e.jsx(xe,{ref:u,onFocusFromOutsideViewport:()=>{const f=g({tabbingDirection:"backwards"});de(f)}})]})});et.displayName=Ze;var tt="ToastFocusProxy",xe=n.forwardRef((t,s)=>{const{__scopeToast:a,onFocusFromOutsideViewport:r,...o}=t,l=ne(tt,a);return e.jsx(Te,{tabIndex:0,...o,ref:s,style:{position:"fixed"},onFocus:p=>{var c;const i=p.relatedTarget;!((c=l.viewport)!=null&&c.contains(i))&&r()}})});xe.displayName=tt;var G="Toast",Es="toast.swipeStart",Ps="toast.swipeMove",Ds="toast.swipeCancel",Rs="toast.swipeEnd",st=n.forwardRef((t,s)=>{const{forceMount:a,open:r,defaultOpen:o,onOpenChange:l,...p}=t,[i,d]=Mt({prop:r,defaultProp:o??!0,onChange:l,caller:G});return e.jsx(It,{present:a||i,children:e.jsx(Is,{open:i,...p,ref:s,onClose:()=>d(!1),onPause:se(t.onPause),onResume:se(t.onResume),onSwipeStart:_(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:_(t.onSwipeMove,c=>{const{x:u,y:m}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${m}px`)}),onSwipeCancel:_(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:_(t.onSwipeEnd,c=>{const{x:u,y:m}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${m}px`),d(!1)})})})});st.displayName=G;var[As,Ms]=Je(G,{onClose(){}}),Is=n.forwardRef((t,s)=>{const{__scopeToast:a,type:r="foreground",duration:o,open:l,onClose:p,onEscapeKeyDown:i,onPause:d,onResume:c,onSwipeStart:u,onSwipeMove:m,onSwipeCancel:h,onSwipeEnd:v,...y}=t,g=ne(G,a),[f,T]=n.useState(null),j=Be(s,w=>T(w)),N=n.useRef(null),x=n.useRef(null),S=o||g.duration,E=n.useRef(0),O=n.useRef(S),U=n.useRef(0),{onToastAdd:B,onToastRemove:oe}=g,V=se(()=>{var P;(f==null?void 0:f.contains(document.activeElement))&&((P=g.viewport)==null||P.focus()),p()}),L=n.useCallback(w=>{!w||w===1/0||(window.clearTimeout(U.current),E.current=new Date().getTime(),U.current=window.setTimeout(V,w))},[V]);n.useEffect(()=>{const w=g.viewport;if(w){const P=()=>{L(O.current),c==null||c()},F=()=>{const z=new Date().getTime()-E.current;O.current=O.current-z,window.clearTimeout(U.current),d==null||d()};return w.addEventListener(pe,F),w.addEventListener(me,P),()=>{w.removeEventListener(pe,F),w.removeEventListener(me,P)}}},[g.viewport,S,d,c,L]),n.useEffect(()=>{l&&!g.isClosePausedRef.current&&L(S)},[l,S,g.isClosePausedRef,L]),n.useEffect(()=>(B(),()=>oe()),[B,oe]);const q=n.useMemo(()=>f?lt(f):null,[f]);return g.viewport?e.jsxs(e.Fragment,{children:[q&&e.jsx(_s,{__scopeToast:a,role:"status","aria-live":r==="foreground"?"assertive":"polite",children:q}),e.jsx(As,{scope:a,onClose:V,children:_t.createPortal(e.jsx(Ce.ItemSlot,{scope:a,children:e.jsx(Ft,{asChild:!0,onEscapeKeyDown:_(i,()=>{g.isFocusedToastEscapeKeyDownRef.current||V(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:e.jsx($.li,{tabIndex:0,"data-state":l?"open":"closed","data-swipe-direction":g.swipeDirection,...y,ref:j,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:_(t.onKeyDown,w=>{w.key==="Escape"&&(i==null||i(w.nativeEvent),w.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,V()))}),onPointerDown:_(t.onPointerDown,w=>{w.button===0&&(N.current={x:w.clientX,y:w.clientY})}),onPointerMove:_(t.onPointerMove,w=>{if(!N.current)return;const P=w.clientX-N.current.x,F=w.clientY-N.current.y,z=!!x.current,H=["left","right"].includes(g.swipeDirection),J=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,Et=H?J(0,P):0,Pt=H?0:J(0,F),ie=w.pointerType==="touch"?10:2,Q={x:Et,y:Pt},Ee={originalEvent:w,delta:Q};z?(x.current=Q,Z(Ps,m,Ee,{discrete:!1})):Fe(Q,g.swipeDirection,ie)?(x.current=Q,Z(Es,u,Ee,{discrete:!1}),w.target.setPointerCapture(w.pointerId)):(Math.abs(P)>ie||Math.abs(F)>ie)&&(N.current=null)}),onPointerUp:_(t.onPointerUp,w=>{const P=x.current,F=w.target;if(F.hasPointerCapture(w.pointerId)&&F.releasePointerCapture(w.pointerId),x.current=null,N.current=null,P){const z=w.currentTarget,H={originalEvent:w,delta:P};Fe(P,g.swipeDirection,g.swipeThreshold)?Z(Rs,v,H,{discrete:!0}):Z(Ds,h,H,{discrete:!0}),z.addEventListener("click",J=>J.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),_s=t=>{const{__scopeToast:s,children:a,...r}=t,o=ne(G,s),[l,p]=n.useState(!1),[i,d]=n.useState(!1);return Ls(()=>p(!0)),n.useEffect(()=>{const c=window.setTimeout(()=>d(!0),1e3);return()=>window.clearTimeout(c)},[]),i?null:e.jsx(Ot,{asChild:!0,children:e.jsx(Te,{...r,children:l&&e.jsxs(e.Fragment,{children:[o.label," ",a]})})})},Fs="ToastTitle",at=n.forwardRef((t,s)=>{const{__scopeToast:a,...r}=t;return e.jsx($.div,{...r,ref:s})});at.displayName=Fs;var Os="ToastDescription",rt=n.forwardRef((t,s)=>{const{__scopeToast:a,...r}=t;return e.jsx($.div,{...r,ref:s})});rt.displayName=Os;var nt="ToastAction",ot=n.forwardRef((t,s)=>{const{altText:a,...r}=t;return a.trim()?e.jsx(ct,{altText:a,asChild:!0,children:e.jsx(ke,{...r,ref:s})}):(console.error(`Invalid prop \`altText\` supplied to \`${nt}\`. Expected non-empty \`string\`.`),null)});ot.displayName=nt;var it="ToastClose",ke=n.forwardRef((t,s)=>{const{__scopeToast:a,...r}=t,o=Ms(it,a);return e.jsx(ct,{asChild:!0,children:e.jsx($.button,{type:"button",...r,ref:s,onClick:_(t.onClick,o.onClose)})})});ke.displayName=it;var ct=n.forwardRef((t,s)=>{const{__scopeToast:a,altText:r,...o}=t;return e.jsx($.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...o,ref:s})});function lt(t){const s=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&s.push(r.textContent),$s(r)){const o=r.ariaHidden||r.hidden||r.style.display==="none",l=r.dataset.radixToastAnnounceExclude==="";if(!o)if(l){const p=r.dataset.radixToastAnnounceAlt;p&&s.push(p)}else s.push(...lt(r))}}),s}function Z(t,s,a,{discrete:r}){const o=a.originalEvent.currentTarget,l=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:a});s&&o.addEventListener(t,s,{once:!0}),r?$t(o,l):o.dispatchEvent(l)}var Fe=(t,s,a=0)=>{const r=Math.abs(t.x),o=Math.abs(t.y),l=r>o;return s==="left"||s==="right"?l&&r>a:!l&&o>a};function Ls(t=()=>{}){const s=se(t);Lt(()=>{let a=0,r=0;return a=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(s)),()=>{window.cancelAnimationFrame(a),window.cancelAnimationFrame(r)}},[s])}function $s(t){return t.nodeType===t.ELEMENT_NODE}function Bs(t){const s=[],a=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;a.nextNode();)s.push(a.currentNode);return s}function de(t){const s=document.activeElement;return t.some(a=>a===s?!0:(a.focus(),document.activeElement!==s))}var Vs=Qe,dt=et,ut=st,pt=at,mt=rt,xt=ot,ft=ke;const Us=Vs,ht=n.forwardRef(({className:t,...s},a)=>e.jsx(dt,{ref:a,className:C("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...s}));ht.displayName=dt.displayName;const zs=Ve("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),wt=n.forwardRef(({className:t,variant:s,...a},r)=>e.jsx(ut,{ref:r,className:C(zs({variant:s}),t),...a}));wt.displayName=ut.displayName;const Hs=n.forwardRef(({className:t,...s},a)=>e.jsx(xt,{ref:a,className:C("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...s}));Hs.displayName=xt.displayName;const gt=n.forwardRef(({className:t,...s},a)=>e.jsx(ft,{ref:a,className:C("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...s,children:e.jsx(Bt,{className:"h-4 w-4"})}));gt.displayName=ft.displayName;const vt=n.forwardRef(({className:t,...s},a)=>e.jsx(pt,{ref:a,className:C("text-sm font-semibold",t),...s}));vt.displayName=pt.displayName;const yt=n.forwardRef(({className:t,...s},a)=>e.jsx(mt,{ref:a,className:C("text-sm opacity-90",t),...s}));yt.displayName=mt.displayName;function Ws(){const{toasts:t}=Y();return e.jsxs(Us,{children:[t.map(function({id:s,title:a,description:r,action:o,...l}){return e.jsxs(wt,{...l,children:[e.jsxs("div",{className:"grid gap-1",children:[a&&e.jsx(vt,{children:a}),r&&e.jsx(yt,{children:r})]}),o,e.jsx(gt,{})]},s)}),e.jsx(ht,{})]})}function Xs({open:t,onOpenChange:s}){const[a,r]=n.useState("idle"),[o,l]=n.useState(""),[p,i]=n.useState(0),[d,c]=n.useState([]),u=async()=>{r("running"),c([]),i(0);try{const h=await(await fetch(`${window.sbwpData.restUrl}/safe-update/start`,{method:"POST",headers:{"X-WP-Nonce":window.sbwpData.nonce}})).json();for(const v of h.steps)l(v.label),c(y=>[...y,`> ${v.label}`]),await new Promise(y=>setTimeout(y,v.duration/2)),i(y=>y+100/h.steps.length);r("complete"),c(v=>[...v,"✅ Test Complete: No Issues Found."])}catch{r("error"),c(h=>[...h,"❌ Error: Failed to start safe update simulator."])}};return e.jsx(he,{open:t,onOpenChange:s,children:e.jsxs(we,{className:"sm:max-w-[500px]",children:[e.jsxs(ge,{children:[e.jsx(ve,{children:"Safe Update Tester"}),e.jsx(ye,{children:"Test updates in a temporary sandbox before applying them to your live site."})]}),e.jsxs("div",{className:"py-4 space-y-4",children:[a==="idle"&&e.jsxs("div",{className:"text-center py-8 space-y-4",children:[e.jsx("div",{className:"mx-auto w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(qt,{className:"h-6 w-6 text-blue-600"})}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"This will clone your site to a temporary staging area and attempt to update 3 plugins."}),e.jsx(b,{className:"w-full",onClick:u,children:"Start Safe Update Test"})]}),a==="running"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(I,{className:"h-5 w-5 animate-spin text-blue-500"}),e.jsx("span",{className:"font-medium text-sm",children:o})]}),e.jsx("div",{className:"h-2 bg-slate-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-500 transition-all duration-500",style:{width:`${p}%`}})}),e.jsx("div",{className:"bg-slate-950 text-slate-50 p-3 rounded-md font-mono text-xs h-32 overflow-y-auto",children:d.map((m,h)=>e.jsx("div",{children:m},h))})]}),a==="complete"&&e.jsxs("div",{className:"text-center py-4 space-y-4",children:[e.jsx("div",{className:"mx-auto w-12 h-12 bg-emerald-100 rounded-full flex items-center justify-center",children:e.jsx(je,{className:"h-6 w-6 text-emerald-600"})}),e.jsx("h3",{className:"font-bold",children:"Updates Passed"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"The updates were applied successfully in the sandbox. It is safe to update your live site."}),e.jsx(b,{className:"w-full bg-emerald-600 hover:bg-emerald-700",onClick:()=>window.location.href="/wp-admin/update-core.php",children:"Apply Updates Logic"})]})]})]})})}function Ks({open:t,onOpenChange:s}){const[a,r]=n.useState("idle"),[o,l]=n.useState(0),[p,i]=n.useState(0),[d,c]=n.useState(null),u=async()=>{r("scanning"),l(0),i(0);const m=setInterval(()=>{l(h=>{const v=h+5;return v>90?90:v}),i(h=>h+1)},200);try{const v=await(await fetch(`${window.sbwpData.restUrl}/conflict-scan/start`,{method:"POST",headers:{"X-WP-Nonce":window.sbwpData.nonce}})).json();clearInterval(m),l(100),v.culprit?(r("found"),c(v.culprit)):r("clean")}catch(h){clearInterval(m),r("idle"),console.error(h)}};return e.jsx(he,{open:t,onOpenChange:s,children:e.jsxs(we,{className:"sm:max-w-[500px]",children:[e.jsxs(ge,{children:[e.jsx(ve,{children:"Automated Conflict Scanner"}),e.jsx(ye,{children:"Automatically diagnose plugin conflicts by simulating binary searches."})]}),e.jsxs("div",{className:"py-6 space-y-6",children:[a==="idle"&&e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center",children:e.jsx(Wt,{className:"h-8 w-8 text-orange-600"})}),e.jsx("p",{className:"text-muted-foreground",children:"This tool will temporarily simulate deactivating plugins to identify which one is causing errors on your site."}),e.jsx(b,{size:"lg",onClick:u,className:"bg-orange-600 hover:bg-orange-700",children:"Start Auto-Diagnosis"})]}),a==="scanning"&&e.jsxs("div",{className:"space-y-4 text-center",children:[e.jsx(I,{className:"h-12 w-12 animate-spin text-orange-500 mx-auto"}),e.jsx("h3",{className:"font-semibold text-lg",children:"Scanning Plugins..."}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Checked ",p," plugins so far"]}),e.jsx("div",{className:"h-2 bg-slate-100 rounded-full overflow-hidden w-full",children:e.jsx("div",{className:"h-full bg-orange-500 transition-all duration-300",style:{width:`${o}%`}})})]}),a==="found"&&d&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3 text-red-800",children:[e.jsx(Vt,{className:"h-6 w-6"}),e.jsx("h3",{className:"font-bold text-lg",children:"Conflict Detected!"})]}),e.jsxs("div",{className:"bg-white p-3 rounded border border-red-100",children:[e.jsx("p",{className:"font-semibold",children:d.name}),e.jsx("p",{className:"text-xs text-muted-foreground font-mono mt-1",children:d.file})]}),e.jsxs("p",{className:"text-sm text-red-700",children:[e.jsx("strong",{children:"Issue:"})," ",d.reason]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsx(b,{variant:"destructive",className:"flex-1",children:"Deactivate Plugin"}),e.jsx(b,{variant:"outline",className:"flex-1",onClick:()=>s(!1),children:"Ignore"})]})]}),a==="clean"&&e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-emerald-100 rounded-full flex items-center justify-center",children:e.jsx(je,{className:"h-8 w-8 text-emerald-600"})}),e.jsx("h3",{className:"font-bold text-lg",children:"No Conflicts Found"}),e.jsx("p",{className:"text-muted-foreground",children:"your plugins appear to be working correctly together."}),e.jsx(b,{variant:"outline",onClick:()=>s(!1),children:"Close"})]})]})]})})}const jt=n.forwardRef(({className:t,...s},a)=>e.jsx("div",{className:"w-full overflow-auto",children:e.jsx("table",{ref:a,className:C("w-full caption-bottom text-sm",t),...s})}));jt.displayName="Table";const bt=n.forwardRef(({className:t,...s},a)=>e.jsx("thead",{ref:a,className:C("[&_tr]:border-b",t),...s}));bt.displayName="TableHeader";const Nt=n.forwardRef(({className:t,...s},a)=>e.jsx("tbody",{ref:a,className:C("[&_tr:last-child]:border-0",t),...s}));Nt.displayName="TableBody";const Ys=n.forwardRef(({className:t,...s},a)=>e.jsx("tfoot",{ref:a,className:C("bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...s}));Ys.displayName="TableFooter";const fe=n.forwardRef(({className:t,...s},a)=>e.jsx("tr",{ref:a,className:C("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...s}));fe.displayName="TableRow";const W=n.forwardRef(({className:t,...s},a)=>e.jsx("th",{ref:a,className:C("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...s}));W.displayName="TableHead";const X=n.forwardRef(({className:t,...s},a)=>e.jsx("td",{ref:a,className:C("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...s}));X.displayName="TableCell";const Gs=n.forwardRef(({className:t,...s},a)=>e.jsx("caption",{ref:a,className:C("mt-4 text-sm text-muted-foreground",t),...s}));Gs.displayName="TableCaption";function qs(t){return t?new Date(t).toLocaleString():"Unknown"}function Js(t){const s=typeof t=="string"?parseInt(t):t;if(s===0)return"0 Bytes";const a=1024,r=["Bytes","KB","MB","GB","TB"],o=Math.floor(Math.log(s)/Math.log(a));return parseFloat((s/Math.pow(a,o)).toFixed(2))+" "+r[o]}function Qs({refreshTrigger:t}){const[s,a]=n.useState([]),[r,o]=n.useState(!0),[l,p]=n.useState(null),{toast:i}=Y(),d=async()=>{o(!0);try{const u=await ds();a(u)}catch(u){console.error(u)}finally{o(!1)}};n.useEffect(()=>{d()},[t]);const c=async u=>{if(confirm("Permanently delete this backup?")){p(u);try{await us(u.toString()),i({title:"Backup Deleted",description:"The backup has been removed."}),d()}catch{i({title:"Error",description:"Failed to delete backup.",variant:"destructive"})}finally{p(null)}}};return e.jsxs(D,{className:"col-span-3",children:[e.jsxs(R,{children:[e.jsx(A,{children:"Existing Backups"}),e.jsx(ae,{children:"Manage your local backup points."})]}),e.jsx(M,{children:r?e.jsx("div",{className:"flex justify-center p-4",children:e.jsx(I,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):s.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground bg-muted/20 rounded-lg",children:[e.jsx(ue,{className:"h-8 w-8 mx-auto mb-2 opacity-20"}),e.jsx("p",{children:"No backups found."})]}):e.jsx("div",{className:"rounded-md border",children:e.jsxs(jt,{children:[e.jsx(bt,{children:e.jsxs(fe,{children:[e.jsx(W,{children:"Date"}),e.jsx(W,{children:"Type"}),e.jsx(W,{children:"Size"}),e.jsx(W,{className:"text-right",children:"Actions"})]})}),e.jsx(Nt,{children:s.map(u=>e.jsxs(fe,{children:[e.jsx(X,{className:"font-medium",children:qs(u.created_at)}),e.jsx(X,{className:"capitalize",children:u.type}),e.jsx(X,{children:Js(u.size_bytes)}),e.jsx(X,{className:"text-right",children:e.jsx(b,{variant:"ghost",size:"icon",disabled:l===u.id,onClick:()=>c(u.id),children:l===u.id?e.jsx(I,{className:"h-4 w-4 animate-spin"}):e.jsx(ze,{className:"h-4 w-4 text-red-500 hover:text-red-700"})})})]},u.id))})]})})})]})}function Zs({onNavigate:t}){const[s,a]=n.useState(null),[r,o]=n.useState(!0),[l,p]=n.useState(!1),[i,d]=n.useState(!1),[c,u]=n.useState(!1),[m,h]=n.useState(0),[v,y]=n.useState(0),[g,f]=n.useState(""),{toast:T}=Y(),j=async()=>{try{const x=await ls();a(x)}catch(x){console.error("Failed to load stats",x)}finally{o(!1)}};n.useEffect(()=>{j()},[]),n.useEffect(()=>{let x;return l?x=setInterval(async()=>{try{const S=await ps();y(S.percent),f(S.message)}catch{}},1e3):(y(0),f("")),()=>clearInterval(x)},[l]);const N=async()=>{p(!0),y(1);try{let x=await Ie(!1);if(x.code)throw new Error(x.message);for(;x.status==="processing";)if(x.percent&&y(x.percent),x.message&&f(x.message),x=await Ie(!0),x.code)throw new Error(x.message);T({title:"Backup Complete",description:"Your local backup was created successfully."}),await j(),h(S=>S+1)}catch(x){console.error(x),T({title:"Backup Failed",description:"There was an error creating your backup.",variant:"destructive"})}finally{p(!1)}};return r?e.jsx("div",{className:"p-8 flex justify-center",children:e.jsx(I,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx(Ws,{}),e.jsx(Xs,{open:i,onOpenChange:d}),e.jsx(Ks,{open:c,onOpenChange:u}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs(D,{children:[e.jsxs(R,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(A,{className:"text-sm font-medium",children:"Last Backup"}),e.jsx(Qt,{className:"h-4 w-4 text-emerald-500"})]}),e.jsxs(M,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(s==null?void 0:s.last_backup)||"Never"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[(s==null?void 0:s.count)||0," total backups"]})]})]}),e.jsxs(D,{children:[e.jsxs(R,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(A,{className:"text-sm font-medium",children:"Storage Usage"}),e.jsx(ue,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(M,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(s==null?void 0:s.total_size)||"0 B"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Local storage used"})]})]}),e.jsxs(D,{children:[e.jsxs(R,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(A,{className:"text-sm font-medium",children:"Quick Actions"}),e.jsx(Ut,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(M,{className:"flex flex-col gap-2",children:l?e.jsxs("div",{className:"space-y-2 w-full",children:[e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[(()=>{const x=(g||"").toLowerCase();return v>=100?e.jsx(Kt,{className:"h-4 w-4 text-emerald-500"}):x.includes("exporting")?e.jsx(Gt,{className:"h-4 w-4 text-blue-500 animate-pulse"}):x.includes("scanning")?e.jsx(Jt,{className:"h-4 w-4 text-yellow-500 animate-pulse"}):x.includes("archiving")?e.jsx(zt,{className:"h-4 w-4 text-orange-500 animate-pulse"}):x.includes("finalizing")?e.jsx(ue,{className:"h-4 w-4 text-purple-500 animate-pulse"}):e.jsx(I,{className:"h-4 w-4 animate-spin text-muted-foreground"})})(),e.jsx("span",{children:g||"Starting..."})]}),e.jsxs("span",{children:[v,"%"]})]}),e.jsx(qe,{value:v,className:"h-2"})]}):e.jsxs("div",{className:"flex gap-2",children:[e.jsx(b,{size:"sm",onClick:N,children:"Backup Now"}),e.jsx(b,{size:"sm",variant:"outline",onClick:()=>t("settings"),children:"Settings"})]})})]}),e.jsxs(D,{children:[e.jsxs(R,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(A,{className:"text-sm font-medium",children:"Safe Update"}),e.jsx(Ht,{className:"h-4 w-4 text-blue-500"})]}),e.jsxs(M,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"Updates"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Test updates in sandbox"}),e.jsx(b,{size:"sm",className:"mt-4 w-full h-8 text-xs bg-blue-600 hover:bg-blue-500 text-white",onClick:async()=>{window.sbwpData.isPro?d(!0):window.location.href="/wp-admin/update-core.php"},children:window.sbwpData.isPro?"Test Updates":"Go to Updates"})]})]}),e.jsxs(D,{className:window.sbwpData.isPro?"border-orange-500/50 bg-orange-500/5":"opacity-80",children:[e.jsxs(R,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(A,{className:"text-sm font-medium",children:"Conflict Scanner"}),window.sbwpData.isPro?e.jsx("span",{className:"text-[10px] bg-orange-500/20 text-orange-500 px-2 py-0.5 rounded-full font-bold",children:"PRO ACTIVE"}):e.jsx("span",{className:"text-[10px] bg-slate-100 text-slate-500 px-2 py-0.5 rounded-full font-bold",children:"LOCKED"})]}),e.jsxs(M,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"Diagnose"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Find buggy plugins auto-magically"}),e.jsx(b,{size:"sm",variant:window.sbwpData.isPro?"outline":"secondary",className:"mt-4 w-full h-8 text-xs",onClick:()=>window.sbwpData.isPro&&u(!0),children:window.sbwpData.isPro?"Start Scan":"Get Pro"})]})]})]}),e.jsx(Qs,{refreshTrigger:m})]})}const Tt=n.forwardRef(({className:t,type:s,...a},r)=>e.jsx("input",{type:s,className:C("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...a}));Tt.displayName="Input";var ea=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ta=ea.reduce((t,s)=>{const a=$e(`Primitive.${s}`),r=n.forwardRef((o,l)=>{const{asChild:p,...i}=o,d=p?a:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(d,{...i,ref:l})});return r.displayName=`Primitive.${s}`,{...t,[s]:r}},{}),sa="Label",St=n.forwardRef((t,s)=>e.jsx(ta.label,{...t,ref:s,onMouseDown:a=>{var o;a.target.closest("button, input, select, textarea")||((o=t.onMouseDown)==null||o.call(t,a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));St.displayName=sa;var Ct=St;const aa=Ve("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),kt=n.forwardRef(({className:t,...s},a)=>e.jsx(Ct,{ref:a,className:C(aa(),t),...s}));kt.displayName=Ct.displayName;function ra({open:t,onOpenChange:s}){const[a,r]=n.useState([]),[o,l]=n.useState(!1),[p,i]=n.useState(null),d=()=>{l(!0),ms().then(r).catch(console.error).finally(()=>l(!1))};n.useEffect(()=>{t&&d()},[t]);const c=async u=>{i(u.id);try{await xs(u.id,u.connected?"disconnect":"connect"),d()}catch(m){console.error(m)}finally{i(null)}};return e.jsx(he,{open:t,onOpenChange:s,children:e.jsxs(we,{className:"sm:max-w-[425px]",children:[e.jsxs(ge,{children:[e.jsx(ve,{children:"Cloud Storage Settings"}),e.jsx(ye,{children:"Connect your cloud storage provider to enable automatic off-site backups."})]}),e.jsx("div",{className:"grid gap-4 py-4",children:o&&a.length===0?e.jsx("div",{className:"flex justify-center p-4",children:e.jsx(I,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):e.jsxs("div",{className:"space-y-2",children:[a.length===0&&e.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"No providers available."}),a.map(u=>e.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-slate-100 dark:bg-slate-800",children:e.jsx(Yt,{className:"h-4 w-4 text-slate-500"})}),e.jsxs("div",{className:"grid gap-0.5",children:[e.jsx("div",{className:"font-medium text-sm",children:u.name}),e.jsx("div",{className:"text-[10px] text-muted-foreground uppercase",children:u.connected?"Connected":"Not Connected"})]})]}),e.jsx(b,{size:"sm",variant:u.connected?"outline":"default",onClick:()=>c(u),disabled:p===u.id||u.id!=="gdrive"&&u.id!=="aws_s3"&&u.id!=="dropbox",children:p===u.id?e.jsx(I,{className:"h-4 w-4 animate-spin"}):u.connected?e.jsxs("div",{className:"flex items-center gap-2 group",children:[e.jsx(je,{className:"h-4 w-4 text-green-500 group-hover:hidden"}),e.jsx("span",{className:"hidden group-hover:inline text-xs text-red-500",children:"Disconnect"})]}):"Connect"})]},u.id))]})})]})})}function na({onBack:t,onNavigate:s}){const[a,r]=n.useState({retention_limit:5}),[o,l]=n.useState(!0),[p,i]=n.useState(!1),[d,c]=n.useState(!1),{toast:u}=Y();n.useEffect(()=>{fs().then(r).catch(console.error).finally(()=>l(!1))},[]);const m=async()=>{i(!0);try{await hs(a),u({title:"Settings Saved",description:"Your settings have been updated."})}catch{u({title:"Error",description:"Failed to save settings.",variant:"destructive"})}finally{i(!1)}};return o?e.jsx("div",{className:"p-8 flex justify-center",children:e.jsx(I,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):e.jsxs("div",{className:"space-y-6 max-w-2xl",children:[e.jsx(ra,{open:d,onOpenChange:c}),e.jsxs(b,{variant:"ghost",className:"pl-0 gap-2",onClick:t,children:[e.jsx(Ue,{className:"h-4 w-4"}),"Back to Dashboard"]}),e.jsx("h2",{className:"text-xl font-semibold tracking-tight",children:"Configuration"}),e.jsxs(D,{children:[e.jsxs(R,{children:[e.jsx(A,{children:"General Settings"}),e.jsx(ae,{children:"Configure how SafeBackup handles your data."})]}),e.jsxs(M,{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(kt,{htmlFor:"retention",children:"Local Backup Retention"}),e.jsx(Tt,{id:"retention",type:"number",min:1,max:50,value:a.retention_limit,onChange:h=>r(v=>({...v,retention_limit:parseInt(h.target.value)||1}))}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Number of local backups to keep. Oldest backups will be deleted automatically when this limit is reached."})]}),e.jsxs(b,{onClick:m,disabled:p,children:[p&&e.jsx(I,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Changes"]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(D,{className:window.sbwpData.isPro?"border-emerald-500/50 bg-emerald-500/5":"opacity-80",children:[e.jsxs(R,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(A,{className:"text-sm font-medium",children:"Cloud Storage"}),window.sbwpData.isPro?e.jsx("span",{className:"text-[10px] bg-emerald-500/20 text-emerald-500 px-2 py-0.5 rounded-full font-bold",children:"PRO ACTIVE"}):e.jsx("span",{className:"text-[10px] bg-slate-100 text-slate-500 px-2 py-0.5 rounded-full font-bold",children:"FREE"})]}),e.jsxs(M,{children:[e.jsx("div",{className:"text-2xl font-bold",children:window.sbwpData.isPro?"Configure":"Locked"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:window.sbwpData.isPro?"Connect to Google Drive / S3":"Upgrade to enable Cloud Backups"}),window.sbwpData.isPro?e.jsx(b,{size:"sm",variant:"outline",className:"mt-4 w-full h-8 text-xs",onClick:()=>c(!0),children:"Configure Cloud"}):e.jsx(b,{size:"sm",variant:"secondary",className:"mt-4 w-full h-8 text-xs",children:"Get Pro"})]})]}),window.sbwpData.isPro&&e.jsxs(D,{className:"border-emerald-500/50 bg-emerald-500/5",children:[e.jsxs(R,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(A,{className:"text-sm font-medium",children:"Scheduled Backups"}),e.jsx("span",{className:"text-[10px] bg-emerald-500/20 text-emerald-500 px-2 py-0.5 rounded-full font-bold",children:"PRO ACTIVE"})]}),e.jsxs(M,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"Manage"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Automated daily/weekly backups"}),e.jsx(b,{size:"sm",variant:"outline",className:"mt-4 w-full h-8 text-xs",onClick:()=>s("schedules"),children:"Configure Schedules"})]})]})]})]})}function oa({onBack:t}){const[s,a]=n.useState([]),[r,o]=n.useState(!1),[l,p]=n.useState(!1),{toast:i}=Y(),d=async()=>{o(!0);try{const h=await(await fetch(`${window.sbwpData.restUrl}/schedules`,{headers:{"X-WP-Nonce":window.sbwpData.nonce}})).json();a(h)}catch(m){console.error(m)}finally{o(!1)}};n.useEffect(()=>{d()},[]);const c=async m=>{p(!0);try{(await fetch(`${window.sbwpData.restUrl}/schedules`,{method:"POST",headers:{"X-WP-Nonce":window.sbwpData.nonce,"Content-Type":"application/json"},body:JSON.stringify({frequency:m,time:"00:00"})})).ok&&(i({title:"Schedule Created",description:`New ${m} schedule added.`}),d())}catch{i({title:"Error",variant:"destructive",description:"Failed to create schedule."})}finally{p(!1)}},u=async m=>{if(confirm("Delete this schedule?"))try{await fetch(`${window.sbwpData.restUrl}/schedules/${m}`,{method:"DELETE",headers:{"X-WP-Nonce":window.sbwpData.nonce}}),i({title:"Schedule Deleted"}),d()}catch{i({title:"Error",variant:"destructive"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(b,{variant:"ghost",size:"sm",onClick:t,children:[e.jsx(Ue,{className:"mr-2 h-4 w-4"}),"Back"]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Scheduled Backups"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your automated backup routines."})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(D,{children:[e.jsxs(R,{children:[e.jsx(A,{children:"Create Schedule"}),e.jsx(ae,{children:"Add a new automated backup task."})]}),e.jsxs(M,{className:"space-y-4",children:[e.jsxs(b,{className:"w-full justify-start",onClick:()=>c("daily"),disabled:l,children:[e.jsx(Re,{className:"mr-2 h-4 w-4"}),"Add Daily Backup"]}),e.jsxs(b,{className:"w-full justify-start",variant:"secondary",onClick:()=>c("weekly"),disabled:l,children:[e.jsx(Re,{className:"mr-2 h-4 w-4"}),"Add Weekly Backup"]})]})]}),e.jsxs(D,{children:[e.jsxs(R,{children:[e.jsx(A,{children:"Active Schedules"}),e.jsx(ae,{children:"Your currently running backup jobs."})]}),e.jsx(M,{children:r?e.jsx("div",{className:"flex justify-center p-4",children:e.jsx(I,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):s.length===0?e.jsx("p",{className:"text-sm text-muted-foreground",children:"No active schedules."}):e.jsx("div",{className:"space-y-2",children:s.map(m=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Xt,{className:"h-5 w-5 text-blue-500"}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium capitalize",children:[m.frequency," Backup"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Next run: calculated by WP Cron"})]})]}),e.jsx(b,{variant:"ghost",size:"sm",onClick:()=>u(m.id),children:e.jsx(ze,{className:"h-4 w-4 text-red-500"})})]},m.id))})})]})]})]})}function Oe(){const[t,s]=n.useState("dashboard");return e.jsx("div",{className:"min-h-screen bg-background p-8 font-sans antialiased text-foreground",children:e.jsxs("div",{className:"mx-auto max-w-6xl space-y-8",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"SafeBackup & Repair"}),e.jsx("div",{className:"flex items-center gap-2",children:window.sbwpData.isPro?e.jsx("span",{className:"text-xs font-medium text-emerald-600 bg-emerald-100 dark:bg-emerald-900/30 dark:text-emerald-400 px-2 py-1 rounded-full border border-emerald-200 dark:border-emerald-800",children:"Pro Active"}):e.jsx("span",{className:"text-xs font-medium text-slate-600 bg-slate-100 dark:bg-slate-900/30 dark:text-slate-400 px-2 py-1 rounded-full border border-slate-200 dark:border-slate-800",children:"Free Edition"})})]}),t==="dashboard"&&e.jsx(Zs,{onNavigate:s}),t==="settings"&&e.jsx(na,{onBack:()=>s("dashboard"),onNavigate:s}),t==="schedules"&&e.jsx(oa,{onBack:()=>s("dashboard")})]})})}const Le=document.getElementById("sbwp-admin-root");if(Le)Pe.createRoot(Le).render(e.jsx(De.StrictMode,{children:e.jsx(Oe,{})}));else{const t=document.getElementById("root");t&&Pe.createRoot(t).render(e.jsx(De.StrictMode,{children:e.jsx(Oe,{})}))}
